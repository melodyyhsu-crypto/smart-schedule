(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function iv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ic={exports:{}},zs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function XS(){if(Lm)return zs;Lm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:c,ref:r!==void 0?r:null,props:l}}return zs.Fragment=e,zs.jsx=n,zs.jsxs=n,zs}var qm;function WS(){return qm||(qm=1,Ic.exports=XS()),Ic.exports}var G=WS(),xc={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function QS(){if(Bm)return ce;Bm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function U(M,J,Q){this.props=M,this.context=J,this.refs=R,this.updater=Q||A}U.prototype.isReactComponent={},U.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function D(){}D.prototype=U.prototype;function I(M,J,Q){this.props=M,this.context=J,this.refs=R,this.updater=Q||A}var L=I.prototype=new D;L.constructor=I,C(L,U.prototype),L.isPureReactComponent=!0;var q=Array.isArray;function Y(){}var H={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function K(M,J,Q){var ee=Q.ref;return{$$typeof:t,type:M,key:J,ref:ee!==void 0?ee:null,props:Q}}function te(M,J){return K(M.type,J,M.props)}function pe(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function Ee(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return J[Q]})}var Me=/\/+/g;function Re(M,J){return typeof M=="object"&&M!==null&&M.key!=null?Ee(""+M.key):J.toString(36)}function Xe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Y,Y):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,J,Q,ee,de){var me=typeof M;(me==="undefined"||me==="boolean")&&(M=null);var Ne=!1;if(M===null)Ne=!0;else switch(me){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(M.$$typeof){case t:case e:Ne=!0;break;case v:return Ne=M._init,V(Ne(M._payload),J,Q,ee,de)}}if(Ne)return de=de(M),Ne=ee===""?"."+Re(M,0):ee,q(de)?(Q="",Ne!=null&&(Q=Ne.replace(Me,"$&/")+"/"),V(de,J,Q,"",function(Wo){return Wo})):de!=null&&(pe(de)&&(de=te(de,Q+(de.key==null||M&&M.key===de.key?"":(""+de.key).replace(Me,"$&/")+"/")+Ne)),J.push(de)),1;Ne=0;var yt=ee===""?".":ee+":";if(q(M))for(var $e=0;$e<M.length;$e++)ee=M[$e],me=yt+Re(ee,$e),Ne+=V(ee,J,Q,me,de);else if($e=E(M),typeof $e=="function")for(M=$e.call(M),$e=0;!(ee=M.next()).done;)ee=ee.value,me=yt+Re(ee,$e++),Ne+=V(ee,J,Q,me,de);else if(me==="object"){if(typeof M.then=="function")return V(Xe(M),J,Q,ee,de);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function X(M,J,Q){if(M==null)return M;var ee=[],de=0;return V(M,ee,"","",function(me){return J.call(Q,me,de++)}),ee}function j(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Se=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ie={map:X,forEach:function(M,J,Q){X(M,function(){J.apply(this,arguments)},Q)},count:function(M){var J=0;return X(M,function(){J++}),J},toArray:function(M){return X(M,function(J){return J})||[]},only:function(M){if(!pe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ce.Activity=_,ce.Children=Ie,ce.Component=U,ce.Fragment=n,ce.Profiler=r,ce.PureComponent=I,ce.StrictMode=s,ce.Suspense=g,ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return H.H.useMemoCache(M)}},ce.cache=function(M){return function(){return M.apply(null,arguments)}},ce.cacheSignal=function(){return null},ce.cloneElement=function(M,J,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ee=C({},M.props),de=M.key;if(J!=null)for(me in J.key!==void 0&&(de=""+J.key),J)!oe.call(J,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&J.ref===void 0||(ee[me]=J[me]);var me=arguments.length-2;if(me===1)ee.children=Q;else if(1<me){for(var Ne=Array(me),yt=0;yt<me;yt++)Ne[yt]=arguments[yt+2];ee.children=Ne}return K(M.type,de,ee)},ce.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},ce.createElement=function(M,J,Q){var ee,de={},me=null;if(J!=null)for(ee in J.key!==void 0&&(me=""+J.key),J)oe.call(J,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=J[ee]);var Ne=arguments.length-2;if(Ne===1)de.children=Q;else if(1<Ne){for(var yt=Array(Ne),$e=0;$e<Ne;$e++)yt[$e]=arguments[$e+2];de.children=yt}if(M&&M.defaultProps)for(ee in Ne=M.defaultProps,Ne)de[ee]===void 0&&(de[ee]=Ne[ee]);return K(M,me,de)},ce.createRef=function(){return{current:null}},ce.forwardRef=function(M){return{$$typeof:h,render:M}},ce.isValidElement=pe,ce.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:j}},ce.memo=function(M,J){return{$$typeof:p,type:M,compare:J===void 0?null:J}},ce.startTransition=function(M){var J=H.T,Q={};H.T=Q;try{var ee=M(),de=H.S;de!==null&&de(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Y,Se)}catch(me){Se(me)}finally{J!==null&&Q.types!==null&&(J.types=Q.types),H.T=J}},ce.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ce.use=function(M){return H.H.use(M)},ce.useActionState=function(M,J,Q){return H.H.useActionState(M,J,Q)},ce.useCallback=function(M,J){return H.H.useCallback(M,J)},ce.useContext=function(M){return H.H.useContext(M)},ce.useDebugValue=function(){},ce.useDeferredValue=function(M,J){return H.H.useDeferredValue(M,J)},ce.useEffect=function(M,J){return H.H.useEffect(M,J)},ce.useEffectEvent=function(M){return H.H.useEffectEvent(M)},ce.useId=function(){return H.H.useId()},ce.useImperativeHandle=function(M,J,Q){return H.H.useImperativeHandle(M,J,Q)},ce.useInsertionEffect=function(M,J){return H.H.useInsertionEffect(M,J)},ce.useLayoutEffect=function(M,J){return H.H.useLayoutEffect(M,J)},ce.useMemo=function(M,J){return H.H.useMemo(M,J)},ce.useOptimistic=function(M,J){return H.H.useOptimistic(M,J)},ce.useReducer=function(M,J,Q){return H.H.useReducer(M,J,Q)},ce.useRef=function(M){return H.H.useRef(M)},ce.useState=function(M){return H.H.useState(M)},ce.useSyncExternalStore=function(M,J,Q){return H.H.useSyncExternalStore(M,J,Q)},ce.useTransition=function(){return H.H.useTransition()},ce.version="19.2.4",ce}var Gm;function Ed(){return Gm||(Gm=1,xc.exports=QS()),xc.exports}var Ke=Ed();const ZS=iv(Ke);var Dc={exports:{}},Fs={},Uc={exports:{}},kc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function jS(){return Hm||(Hm=1,(function(t){function e(V,X){var j=V.length;V.push(X);e:for(;0<j;){var Se=j-1>>>1,Ie=V[Se];if(0<r(Ie,X))V[Se]=X,V[j]=Ie,j=Se;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var X=V[0],j=V.pop();if(j!==X){V[0]=j;e:for(var Se=0,Ie=V.length,M=Ie>>>1;Se<M;){var J=2*(Se+1)-1,Q=V[J],ee=J+1,de=V[ee];if(0>r(Q,j))ee<Ie&&0>r(de,Q)?(V[Se]=de,V[ee]=j,Se=ee):(V[Se]=Q,V[J]=j,Se=J);else if(ee<Ie&&0>r(de,j))V[Se]=de,V[ee]=j,Se=ee;else break e}}return X}function r(V,X){var j=V.sortIndex-X.sortIndex;return j!==0?j:V.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,_=null,S=3,E=!1,A=!1,C=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(V){for(var X=n(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=V)s(p),X.sortIndex=X.expirationTime,e(g,X);else break;X=n(p)}}function q(V){if(C=!1,L(V),!A)if(n(g)!==null)A=!0,Y||(Y=!0,Ee());else{var X=n(p);X!==null&&Xe(q,X.startTime-V)}}var Y=!1,H=-1,oe=5,K=-1;function te(){return R?!0:!(t.unstable_now()-K<oe)}function pe(){if(R=!1,Y){var V=t.unstable_now();K=V;var X=!0;try{e:{A=!1,C&&(C=!1,D(H),H=-1),E=!0;var j=S;try{t:{for(L(V),_=n(g);_!==null&&!(_.expirationTime>V&&te());){var Se=_.callback;if(typeof Se=="function"){_.callback=null,S=_.priorityLevel;var Ie=Se(_.expirationTime<=V);if(V=t.unstable_now(),typeof Ie=="function"){_.callback=Ie,L(V),X=!0;break t}_===n(g)&&s(g),L(V)}else s(g);_=n(g)}if(_!==null)X=!0;else{var M=n(p);M!==null&&Xe(q,M.startTime-V),X=!1}}break e}finally{_=null,S=j,E=!1}X=void 0}}finally{X?Ee():Y=!1}}}var Ee;if(typeof I=="function")Ee=function(){I(pe)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Re=Me.port2;Me.port1.onmessage=pe,Ee=function(){Re.postMessage(null)}}else Ee=function(){U(pe,0)};function Xe(V,X){H=U(function(){V(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(V){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var j=S;S=X;try{return V()}finally{S=j}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=S;S=V;try{return X()}finally{S=j}},t.unstable_scheduleCallback=function(V,X,j){var Se=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Se+j:Se):j=Se,V){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=j+Ie,V={id:v++,callback:X,priorityLevel:V,startTime:j,expirationTime:Ie,sortIndex:-1},j>Se?(V.sortIndex=j,e(p,V),n(g)===null&&V===n(p)&&(C?(D(H),H=-1):C=!0,Xe(q,j-Se))):(V.sortIndex=Ie,e(g,V),A||E||(A=!0,Y||(Y=!0,Ee()))),V},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(V){var X=S;return function(){var j=S;S=X;try{return V.apply(this,arguments)}finally{S=j}}}})(kc)),kc}var Vm;function eT(){return Vm||(Vm=1,Uc.exports=jS()),Uc.exports}var Oc={exports:{}},ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function tT(){if(zm)return ht;zm=1;var t=Ed();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ht.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},ht.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},ht.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},ht.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},ht.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:E}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ht.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},ht.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ht.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},ht.requestFormReset=function(g){s.d.r(g)},ht.unstable_batchedUpdates=function(g,p){return g(p)},ht.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},ht.useFormStatus=function(){return c.H.useHostTransitionStatus()},ht.version="19.2.4",ht}var Fm;function nT(){if(Fm)return Oc.exports;Fm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Oc.exports=tT(),Oc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function iT(){if($m)return Fs;$m=1;var t=eT(),e=Ed(),n=nT();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var m=a.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){a=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===a)return g(m),i;if(y===u)return g(m),o;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=m,u=y;else{for(var T=!1,w=m.child;w;){if(w===a){T=!0,a=m,u=y;break}if(w===u){T=!0,u=m,a=y;break}w=w.sibling}if(!T){for(w=y.child;w;){if(w===a){T=!0,a=y,u=m;break}if(w===u){T=!0,u=y,a=m;break}w=w.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=pe&&i[pe]||i["@@iterator"],typeof i=="function"?i:null)}var Me=Symbol.for("react.client.reference");function Re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Me?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case U:return"Profiler";case R:return"StrictMode";case q:return"Suspense";case Y:return"SuspenseList";case K:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case I:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return o=i.displayName||null,o!==null?o:Re(i.type)||"Memo";case oe:o=i._payload,i=i._init;try{return Re(i(o))}catch{}}return null}var Xe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},Se=[],Ie=-1;function M(i){return{current:i}}function J(i){0>Ie||(i.current=Se[Ie],Se[Ie]=null,Ie--)}function Q(i,o){Ie++,Se[Ie]=i.current,i.current=o}var ee=M(null),de=M(null),me=M(null),Ne=M(null);function yt(i,o){switch(Q(me,o),Q(de,i),Q(ee,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?rm(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=rm(o),i=am(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(ee),Q(ee,i)}function $e(){J(ee),J(de),J(me)}function Wo(i){i.memoizedState!==null&&Q(Ne,i);var o=ee.current,a=am(o,i.type);o!==a&&(Q(de,i),Q(ee,a))}function cr(i){de.current===i&&(J(ee),J(de)),Ne.current===i&&(J(Ne),Bs._currentValue=j)}var fl,Od;function pi(i){if(fl===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);fl=o&&o[1]||"",Od=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fl+i+Od}var hl=!1;function pl(i,o){if(!i||hl)return"";hl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(B){var P=B}Reflect.construct(i,[],$)}else{try{$.call()}catch(B){P=B}i.call($.prototype)}}else{try{throw Error()}catch(B){P=B}($=i())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(B){if(B&&P&&typeof B.stack=="string")return[B.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],w=y[1];if(T&&w){var b=T.split(`
`),O=w.split(`
`);for(m=u=0;u<b.length&&!b[u].includes("DetermineComponentFrameRoot");)u++;for(;m<O.length&&!O[m].includes("DetermineComponentFrameRoot");)m++;if(u===b.length||m===O.length)for(u=b.length-1,m=O.length-1;1<=u&&0<=m&&b[u]!==O[m];)m--;for(;1<=u&&0<=m;u--,m--)if(b[u]!==O[m]){if(u!==1||m!==1)do if(u--,m--,0>m||b[u]!==O[m]){var z=`
`+b[u].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=u&&0<=m);break}}}finally{hl=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?pi(a):""}function b0(i,o){switch(i.tag){case 26:case 27:case 5:return pi(i.type);case 16:return pi("Lazy");case 13:return i.child!==o&&o!==null?pi("Suspense Fallback"):pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return pl(i.type,!1);case 11:return pl(i.type.render,!1);case 1:return pl(i.type,!0);case 31:return pi("Activity");default:return""}}function Pd(i){try{var o="",a=null;do o+=b0(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ml=Object.prototype.hasOwnProperty,gl=t.unstable_scheduleCallback,yl=t.unstable_cancelCallback,R0=t.unstable_shouldYield,N0=t.unstable_requestPaint,Mt=t.unstable_now,M0=t.unstable_getCurrentPriorityLevel,Ld=t.unstable_ImmediatePriority,qd=t.unstable_UserBlockingPriority,dr=t.unstable_NormalPriority,I0=t.unstable_LowPriority,Bd=t.unstable_IdlePriority,x0=t.log,D0=t.unstable_setDisableYieldValue,Qo=null,It=null;function Ln(i){if(typeof x0=="function"&&D0(i),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Qo,i)}catch{}}var xt=Math.clz32?Math.clz32:O0,U0=Math.log,k0=Math.LN2;function O0(i){return i>>>=0,i===0?32:31-(U0(i)/k0|0)|0}var fr=256,hr=262144,pr=4194304;function mi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mr(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var m=0,y=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~y,u!==0?m=mi(u):(T&=w,T!==0?m=mi(T):a||(a=w&~i,a!==0&&(m=mi(a))))):(w=u&~y,w!==0?m=mi(w):T!==0?m=mi(T):a||(a=u&~i,a!==0&&(m=mi(a)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,a=o&-o,y>=a||y===32&&(a&4194048)!==0)?o:m}function Zo(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function P0(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gd(){var i=pr;return pr<<=1,(pr&62914560)===0&&(pr=4194304),i}function vl(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function jo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function L0(i,o,a,u,m,y){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,b=i.expirationTimes,O=i.hiddenUpdates;for(a=T&~a;0<a;){var z=31-xt(a),$=1<<z;w[z]=0,b[z]=-1;var P=O[z];if(P!==null)for(O[z]=null,z=0;z<P.length;z++){var B=P[z];B!==null&&(B.lane&=-536870913)}a&=~$}u!==0&&Hd(i,u,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(T&~o))}function Hd(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-xt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Vd(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-xt(a),m=1<<u;m&o|i[u]&o&&(i[u]|=o),a&=~m}}function zd(i,o){var a=o&-o;return a=(a&42)!==0?1:_l(a),(a&(i.suspendedLanes|o))!==0?0:a}function _l(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Sl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Fd(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:Im(i.type))}function $d(i,o){var a=X.p;try{return X.p=i,o()}finally{X.p=a}}var qn=Math.random().toString(36).slice(2),rt="__reactFiber$"+qn,Tt="__reactProps$"+qn,zi="__reactContainer$"+qn,Tl="__reactEvents$"+qn,q0="__reactListeners$"+qn,B0="__reactHandles$"+qn,Jd="__reactResources$"+qn,es="__reactMarker$"+qn;function El(i){delete i[rt],delete i[Tt],delete i[Tl],delete i[q0],delete i[B0]}function Fi(i){var o=i[rt];if(o)return o;for(var a=i.parentNode;a;){if(o=a[zi]||a[rt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=pm(i);i!==null;){if(a=i[rt])return a;i=pm(i)}return o}i=a,a=i.parentNode}return null}function $i(i){if(i=i[rt]||i[zi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function ts(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ji(i){var o=i[Jd];return o||(o=i[Jd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function it(i){i[es]=!0}var Yd=new Set,Kd={};function gi(i,o){Yi(i,o),Yi(i+"Capture",o)}function Yi(i,o){for(Kd[i]=o,i=0;i<o.length;i++)Yd.add(o[i])}var G0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Wd={};function H0(i){return ml.call(Wd,i)?!0:ml.call(Xd,i)?!1:G0.test(i)?Wd[i]=!0:(Xd[i]=!0,!1)}function gr(i,o,a){if(H0(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function yr(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function pn(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ht(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Qd(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function V0(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){a=""+T,y.call(this,T)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function wl(i){if(!i._valueTracker){var o=Qd(i)?"checked":"value";i._valueTracker=V0(i,o,""+i[o])}}function Zd(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=Qd(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function vr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var z0=/[\n"\\]/g;function Vt(i){return i.replace(z0,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Al(i,o,a,u,m,y,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),o!=null?T==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ht(o)):i.value!==""+Ht(o)&&(i.value=""+Ht(o)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),o!=null?Cl(i,T,Ht(o)):a!=null?Cl(i,T,Ht(a)):u!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Ht(w):i.removeAttribute("name")}function jd(i,o,a,u,m,y,T,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){wl(i);return}a=a!=null?""+Ht(a):"",o=o!=null?""+Ht(o):a,w||o===i.value||(i.value=o),i.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),wl(i)}function Cl(i,o,a){o==="number"&&vr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ki(i,o,a,u){if(i=i.options,o){o={};for(var m=0;m<a.length;m++)o["$"+a[m]]=!0;for(a=0;a<i.length;a++)m=o.hasOwnProperty("$"+i[a].value),i[a].selected!==m&&(i[a].selected=m),m&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ht(a),o=null,m=0;m<i.length;m++){if(i[m].value===a){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function ef(i,o,a){if(o!=null&&(o=""+Ht(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ht(a):""}function tf(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(Xe(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ht(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),wl(i)}function Xi(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var F0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||F0.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function of(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&a[m]!==u&&nf(i,m,u)}else for(var y in o)o.hasOwnProperty(y)&&nf(i,y,o[y])}function bl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),J0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(i){return J0.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function mn(){}var Rl=null;function Nl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wi=null,Qi=null;function sf(i){var o=$i(i);if(o&&(i=o.stateNode)){var a=i[Tt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Al(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Vt(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var m=u[Tt]||null;if(!m)throw Error(s(90));Al(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&Zd(u)}break e;case"textarea":ef(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Ki(i,!!a.multiple,o,!1)}}}var Ml=!1;function rf(i,o,a){if(Ml)return i(o,a);Ml=!0;try{var u=i(o);return u}finally{if(Ml=!1,(Wi!==null||Qi!==null)&&(ra(),Wi&&(o=Wi,i=Qi,Qi=Wi=null,sf(o),i)))for(o=0;o<i.length;o++)sf(i[o])}}function ns(i,o){var a=i.stateNode;if(a===null)return null;var u=a[Tt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Il=!1;if(gn)try{var is={};Object.defineProperty(is,"passive",{get:function(){Il=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Il=!1}var Bn=null,xl=null,Sr=null;function af(){if(Sr)return Sr;var i,o=xl,a=o.length,u,m="value"in Bn?Bn.value:Bn.textContent,y=m.length;for(i=0;i<a&&o[i]===m[i];i++);var T=a-i;for(u=1;u<=T&&o[a-u]===m[y-u];u++);return Sr=m.slice(i,1<u?1-u:void 0)}function Tr(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Er(){return!0}function lf(){return!1}function Et(i){function o(a,u,m,y,T){this._reactName=a,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Er:lf,this.isPropagationStopped=lf,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),o}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=Et(yi),os=_({},yi,{view:0,detail:0}),Y0=Et(os),Dl,Ul,ss,Ar=_({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ss&&(ss&&i.type==="mousemove"?(Dl=i.screenX-ss.screenX,Ul=i.screenY-ss.screenY):Ul=Dl=0,ss=i),Dl)},movementY:function(i){return"movementY"in i?i.movementY:Ul}}),uf=Et(Ar),K0=_({},Ar,{dataTransfer:0}),X0=Et(K0),W0=_({},os,{relatedTarget:0}),kl=Et(W0),Q0=_({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=Et(Q0),j0=_({},yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),e_=Et(j0),t_=_({},yi,{data:0}),cf=Et(t_),n_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s_(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=o_[i])?!!o[i]:!1}function Ol(){return s_}var r_=_({},os,{key:function(i){if(i.key){var o=n_[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Tr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?i_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(i){return i.type==="keypress"?Tr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Tr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),a_=Et(r_),l_=_({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=Et(l_),u_=_({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),c_=Et(u_),d_=_({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),f_=Et(d_),h_=_({},Ar,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),p_=Et(h_),m_=_({},yi,{newState:0,oldState:0}),g_=Et(m_),y_=[9,13,27,32],Pl=gn&&"CompositionEvent"in window,rs=null;gn&&"documentMode"in document&&(rs=document.documentMode);var v_=gn&&"TextEvent"in window&&!rs,ff=gn&&(!Pl||rs&&8<rs&&11>=rs),hf=" ",pf=!1;function mf(i,o){switch(i){case"keyup":return y_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zi=!1;function __(i,o){switch(i){case"compositionend":return gf(o);case"keypress":return o.which!==32?null:(pf=!0,hf);case"textInput":return i=o.data,i===hf&&pf?null:i;default:return null}}function S_(i,o){if(Zi)return i==="compositionend"||!Pl&&mf(i,o)?(i=af(),Sr=xl=Bn=null,Zi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ff&&o.locale!=="ko"?null:o.data;default:return null}}var T_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!T_[i.type]:o==="textarea"}function vf(i,o,a,u){Wi?Qi?Qi.push(u):Qi=[u]:Wi=u,o=ha(o,"onChange"),0<o.length&&(a=new wr("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var as=null,ls=null;function E_(i){em(i,0)}function Cr(i){var o=ts(i);if(Zd(o))return i}function _f(i,o){if(i==="change")return o}var Sf=!1;if(gn){var Ll;if(gn){var ql="oninput"in document;if(!ql){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),ql=typeof Tf.oninput=="function"}Ll=ql}else Ll=!1;Sf=Ll&&(!document.documentMode||9<document.documentMode)}function Ef(){as&&(as.detachEvent("onpropertychange",wf),ls=as=null)}function wf(i){if(i.propertyName==="value"&&Cr(ls)){var o=[];vf(o,ls,i,Nl(i)),rf(E_,o)}}function w_(i,o,a){i==="focusin"?(Ef(),as=o,ls=a,as.attachEvent("onpropertychange",wf)):i==="focusout"&&Ef()}function A_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cr(ls)}function C_(i,o){if(i==="click")return Cr(o)}function b_(i,o){if(i==="input"||i==="change")return Cr(o)}function R_(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Dt=typeof Object.is=="function"?Object.is:R_;function us(i,o){if(Dt(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var m=a[u];if(!ml.call(o,m)||!Dt(i[m],o[m]))return!1}return!0}function Af(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cf(i,o){var a=Af(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Af(a)}}function bf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?bf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Rf(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=vr(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=vr(i.document)}return o}function Bl(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var N_=gn&&"documentMode"in document&&11>=document.documentMode,ji=null,Gl=null,cs=null,Hl=!1;function Nf(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hl||ji==null||ji!==vr(u)||(u=ji,"selectionStart"in u&&Bl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),cs&&us(cs,u)||(cs=u,u=ha(Gl,"onSelect"),0<u.length&&(o=new wr("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=ji)))}function vi(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var eo={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionrun:vi("Transition","TransitionRun"),transitionstart:vi("Transition","TransitionStart"),transitioncancel:vi("Transition","TransitionCancel"),transitionend:vi("Transition","TransitionEnd")},Vl={},Mf={};gn&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function _i(i){if(Vl[i])return Vl[i];if(!eo[i])return i;var o=eo[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Mf)return Vl[i]=o[a];return i}var If=_i("animationend"),xf=_i("animationiteration"),Df=_i("animationstart"),M_=_i("transitionrun"),I_=_i("transitionstart"),x_=_i("transitioncancel"),Uf=_i("transitionend"),kf=new Map,zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zl.push("scrollEnd");function jt(i,o){kf.set(i,o),gi(o,[i])}var br=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},zt=[],to=0,Fl=0;function Rr(){for(var i=to,o=Fl=to=0;o<i;){var a=zt[o];zt[o++]=null;var u=zt[o];zt[o++]=null;var m=zt[o];zt[o++]=null;var y=zt[o];if(zt[o++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&Of(a,m,y)}}function Nr(i,o,a,u){zt[to++]=i,zt[to++]=o,zt[to++]=a,zt[to++]=u,Fl|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function $l(i,o,a,u){return Nr(i,o,a,u),Mr(i)}function Si(i,o){return Nr(i,null,null,o),Mr(i)}function Of(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var m=!1,y=i.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&o!==null&&(m=31-xt(a),i=y.hiddenUpdates,u=i[m],u===null?i[m]=[o]:u.push(o),o.lane=a|536870912),y):null}function Mr(i){if(50<Ds)throw Ds=0,ec=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var no={};function D_(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(i,o,a,u){return new D_(i,o,a,u)}function Jl(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yn(i,o){var a=i.alternate;return a===null?(a=Ut(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Pf(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Ir(i,o,a,u,m,y){var T=0;if(u=i,typeof i=="function")Jl(i)&&(T=1);else if(typeof i=="string")T=LS(i,a,ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case K:return i=Ut(31,a,o,m),i.elementType=K,i.lanes=y,i;case C:return Ti(a.children,m,y,o);case R:T=8,m|=24;break;case U:return i=Ut(12,a,o,m|2),i.elementType=U,i.lanes=y,i;case q:return i=Ut(13,a,o,m),i.elementType=q,i.lanes=y,i;case Y:return i=Ut(19,a,o,m),i.elementType=Y,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:T=10;break e;case D:T=9;break e;case L:T=11;break e;case H:T=14;break e;case oe:T=16,u=null;break e}T=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=Ut(T,a,o,m),o.elementType=i,o.type=u,o.lanes=y,o}function Ti(i,o,a,u){return i=Ut(7,i,u,o),i.lanes=a,i}function Yl(i,o,a){return i=Ut(6,i,null,o),i.lanes=a,i}function Lf(i){var o=Ut(18,null,null,0);return o.stateNode=i,o}function Kl(i,o,a){return o=Ut(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var qf=new WeakMap;function Ft(i,o){if(typeof i=="object"&&i!==null){var a=qf.get(i);return a!==void 0?a:(o={value:i,source:o,stack:Pd(o)},qf.set(i,o),o)}return{value:i,source:o,stack:Pd(o)}}var io=[],oo=0,xr=null,ds=0,$t=[],Jt=0,Gn=null,un=1,cn="";function vn(i,o){io[oo++]=ds,io[oo++]=xr,xr=i,ds=o}function Bf(i,o,a){$t[Jt++]=un,$t[Jt++]=cn,$t[Jt++]=Gn,Gn=i;var u=un;i=cn;var m=32-xt(u)-1;u&=~(1<<m),a+=1;var y=32-xt(o)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,un=1<<32-xt(o)+m|a<<m|u,cn=y+i}else un=1<<y|a<<m|u,cn=i}function Xl(i){i.return!==null&&(vn(i,1),Bf(i,1,0))}function Wl(i){for(;i===xr;)xr=io[--oo],io[oo]=null,ds=io[--oo],io[oo]=null;for(;i===Gn;)Gn=$t[--Jt],$t[Jt]=null,cn=$t[--Jt],$t[Jt]=null,un=$t[--Jt],$t[Jt]=null}function Gf(i,o){$t[Jt++]=un,$t[Jt++]=cn,$t[Jt++]=Gn,un=o.id,cn=o.overflow,Gn=i}var at=null,Be=null,Te=!1,Hn=null,Yt=!1,Ql=Error(s(519));function Vn(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fs(Ft(o,i)),Ql}function Hf(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[rt]=i,o[Tt]=u,a){case"dialog":ye("cancel",o),ye("close",o);break;case"iframe":case"object":case"embed":ye("load",o);break;case"video":case"audio":for(a=0;a<ks.length;a++)ye(ks[a],o);break;case"source":ye("error",o);break;case"img":case"image":case"link":ye("error",o),ye("load",o);break;case"details":ye("toggle",o);break;case"input":ye("invalid",o),jd(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ye("invalid",o);break;case"textarea":ye("invalid",o),tf(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||om(o.textContent,a)?(u.popover!=null&&(ye("beforetoggle",o),ye("toggle",o)),u.onScroll!=null&&ye("scroll",o),u.onScrollEnd!=null&&ye("scrollend",o),u.onClick!=null&&(o.onclick=mn),o=!0):o=!1,o||Vn(i,!0)}function Vf(i){for(at=i.return;at;)switch(at.tag){case 5:case 31:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:at=at.return}}function so(i){if(i!==at)return!1;if(!Te)return Vf(i),Te=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||mc(i.type,i.memoizedProps)),a=!a),a&&Be&&Vn(i),Vf(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Be=hm(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Be=hm(i)}else o===27?(o=Be,ni(i.type)?(i=Sc,Sc=null,Be=i):Be=o):Be=at?Xt(i.stateNode.nextSibling):null;return!0}function Ei(){Be=at=null,Te=!1}function Zl(){var i=Hn;return i!==null&&(bt===null?bt=i:bt.push.apply(bt,i),Hn=null),i}function fs(i){Hn===null?Hn=[i]:Hn.push(i)}var jl=M(null),wi=null,_n=null;function zn(i,o,a){Q(jl,o._currentValue),o._currentValue=a}function Sn(i){i._currentValue=jl.current,J(jl)}function eu(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function tu(i,o,a,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=m;for(var b=0;b<o.length;b++)if(w.context===o[b]){y.lanes|=a,w=y.alternate,w!==null&&(w.lanes|=a),eu(y.return,a,i),u||(T=null);break e}y=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=a,y=T.alternate,y!==null&&(y.lanes|=a),eu(T,a,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function ro(i,o,a,u){i=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=m.type;Dt(m.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(m===Ne.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Bs):i=[Bs])}m=m.return}i!==null&&tu(o,i,a,u),o.flags|=262144}function Dr(i){for(i=i.firstContext;i!==null;){if(!Dt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ai(i){wi=i,_n=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function lt(i){return zf(wi,i)}function Ur(i,o){return wi===null&&Ai(i),zf(i,o)}function zf(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},_n===null){if(i===null)throw Error(s(308));_n=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else _n=_n.next=o;return a}var U_=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},k_=t.unstable_scheduleCallback,O_=t.unstable_NormalPriority,We={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nu(){return{controller:new U_,data:new Map,refCount:0}}function hs(i){i.refCount--,i.refCount===0&&k_(O_,function(){i.controller.abort()})}var ps=null,iu=0,ao=0,lo=null;function P_(i,o){if(ps===null){var a=ps=[];iu=0,ao=rc(),lo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return iu++,o.then(Ff,Ff),o}function Ff(){if(--iu===0&&ps!==null){lo!==null&&(lo.status="fulfilled");var i=ps;ps=null,ao=0,lo=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function L_(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<a.length;m++)(0,a[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),u}var $f=V.S;V.S=function(i,o){Np=Mt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&P_(i,o),$f!==null&&$f(i,o)};var Ci=M(null);function ou(){var i=Ci.current;return i!==null?i:Le.pooledCache}function kr(i,o){o===null?Q(Ci,Ci.current):Q(Ci,o.pool)}function Jf(){var i=ou();return i===null?null:{parent:We._currentValue,pool:i}}var uo=Error(s(460)),su=Error(s(474)),Or=Error(s(542)),Pr={then:function(){}};function Yf(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Kf(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(mn,mn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Wf(i),i;default:if(typeof o.status=="string")o.then(mn,mn);else{if(i=Le,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Wf(i),i}throw Ri=o,uo}}function bi(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ri=a,uo):a}}var Ri=null;function Xf(){if(Ri===null)throw Error(s(459));var i=Ri;return Ri=null,i}function Wf(i){if(i===uo||i===Or)throw Error(s(483))}var co=null,ms=0;function Lr(i){var o=ms;return ms+=1,co===null&&(co=[]),Kf(co,i,o)}function gs(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function qr(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Qf(i){function o(x,N){if(i){var k=x.deletions;k===null?(x.deletions=[N],x.flags|=16):k.push(N)}}function a(x,N){if(!i)return null;for(;N!==null;)o(x,N),N=N.sibling;return null}function u(x){for(var N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function m(x,N){return x=yn(x,N),x.index=0,x.sibling=null,x}function y(x,N,k){return x.index=k,i?(k=x.alternate,k!==null?(k=k.index,k<N?(x.flags|=67108866,N):k):(x.flags|=67108866,N)):(x.flags|=1048576,N)}function T(x){return i&&x.alternate===null&&(x.flags|=67108866),x}function w(x,N,k,F){return N===null||N.tag!==6?(N=Yl(k,x.mode,F),N.return=x,N):(N=m(N,k),N.return=x,N)}function b(x,N,k,F){var se=k.type;return se===C?z(x,N,k.props.children,F,k.key):N!==null&&(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===oe&&bi(se)===N.type)?(N=m(N,k.props),gs(N,k),N.return=x,N):(N=Ir(k.type,k.key,k.props,null,x.mode,F),gs(N,k),N.return=x,N)}function O(x,N,k,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Kl(k,x.mode,F),N.return=x,N):(N=m(N,k.children||[]),N.return=x,N)}function z(x,N,k,F,se){return N===null||N.tag!==7?(N=Ti(k,x.mode,F,se),N.return=x,N):(N=m(N,k),N.return=x,N)}function $(x,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Yl(""+N,x.mode,k),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E:return k=Ir(N.type,N.key,N.props,null,x.mode,k),gs(k,N),k.return=x,k;case A:return N=Kl(N,x.mode,k),N.return=x,N;case oe:return N=bi(N),$(x,N,k)}if(Xe(N)||Ee(N))return N=Ti(N,x.mode,k,null),N.return=x,N;if(typeof N.then=="function")return $(x,Lr(N),k);if(N.$$typeof===I)return $(x,Ur(x,N),k);qr(x,N)}return null}function P(x,N,k,F){var se=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return se!==null?null:w(x,N,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return k.key===se?b(x,N,k,F):null;case A:return k.key===se?O(x,N,k,F):null;case oe:return k=bi(k),P(x,N,k,F)}if(Xe(k)||Ee(k))return se!==null?null:z(x,N,k,F,null);if(typeof k.then=="function")return P(x,N,Lr(k),F);if(k.$$typeof===I)return P(x,N,Ur(x,k),F);qr(x,k)}return null}function B(x,N,k,F,se){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return x=x.get(k)||null,w(N,x,""+F,se);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return x=x.get(F.key===null?k:F.key)||null,b(N,x,F,se);case A:return x=x.get(F.key===null?k:F.key)||null,O(N,x,F,se);case oe:return F=bi(F),B(x,N,k,F,se)}if(Xe(F)||Ee(F))return x=x.get(k)||null,z(N,x,F,se,null);if(typeof F.then=="function")return B(x,N,k,Lr(F),se);if(F.$$typeof===I)return B(x,N,k,Ur(N,F),se);qr(N,F)}return null}function Z(x,N,k,F){for(var se=null,we=null,ne=N,he=N=0,_e=null;ne!==null&&he<k.length;he++){ne.index>he?(_e=ne,ne=null):_e=ne.sibling;var Ae=P(x,ne,k[he],F);if(Ae===null){ne===null&&(ne=_e);break}i&&ne&&Ae.alternate===null&&o(x,ne),N=y(Ae,N,he),we===null?se=Ae:we.sibling=Ae,we=Ae,ne=_e}if(he===k.length)return a(x,ne),Te&&vn(x,he),se;if(ne===null){for(;he<k.length;he++)ne=$(x,k[he],F),ne!==null&&(N=y(ne,N,he),we===null?se=ne:we.sibling=ne,we=ne);return Te&&vn(x,he),se}for(ne=u(ne);he<k.length;he++)_e=B(ne,x,he,k[he],F),_e!==null&&(i&&_e.alternate!==null&&ne.delete(_e.key===null?he:_e.key),N=y(_e,N,he),we===null?se=_e:we.sibling=_e,we=_e);return i&&ne.forEach(function(ai){return o(x,ai)}),Te&&vn(x,he),se}function re(x,N,k,F){if(k==null)throw Error(s(151));for(var se=null,we=null,ne=N,he=N=0,_e=null,Ae=k.next();ne!==null&&!Ae.done;he++,Ae=k.next()){ne.index>he?(_e=ne,ne=null):_e=ne.sibling;var ai=P(x,ne,Ae.value,F);if(ai===null){ne===null&&(ne=_e);break}i&&ne&&ai.alternate===null&&o(x,ne),N=y(ai,N,he),we===null?se=ai:we.sibling=ai,we=ai,ne=_e}if(Ae.done)return a(x,ne),Te&&vn(x,he),se;if(ne===null){for(;!Ae.done;he++,Ae=k.next())Ae=$(x,Ae.value,F),Ae!==null&&(N=y(Ae,N,he),we===null?se=Ae:we.sibling=Ae,we=Ae);return Te&&vn(x,he),se}for(ne=u(ne);!Ae.done;he++,Ae=k.next())Ae=B(ne,x,he,Ae.value,F),Ae!==null&&(i&&Ae.alternate!==null&&ne.delete(Ae.key===null?he:Ae.key),N=y(Ae,N,he),we===null?se=Ae:we.sibling=Ae,we=Ae);return i&&ne.forEach(function(KS){return o(x,KS)}),Te&&vn(x,he),se}function Pe(x,N,k,F){if(typeof k=="object"&&k!==null&&k.type===C&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case E:e:{for(var se=k.key;N!==null;){if(N.key===se){if(se=k.type,se===C){if(N.tag===7){a(x,N.sibling),F=m(N,k.props.children),F.return=x,x=F;break e}}else if(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===oe&&bi(se)===N.type){a(x,N.sibling),F=m(N,k.props),gs(F,k),F.return=x,x=F;break e}a(x,N);break}else o(x,N);N=N.sibling}k.type===C?(F=Ti(k.props.children,x.mode,F,k.key),F.return=x,x=F):(F=Ir(k.type,k.key,k.props,null,x.mode,F),gs(F,k),F.return=x,x=F)}return T(x);case A:e:{for(se=k.key;N!==null;){if(N.key===se)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){a(x,N.sibling),F=m(N,k.children||[]),F.return=x,x=F;break e}else{a(x,N);break}else o(x,N);N=N.sibling}F=Kl(k,x.mode,F),F.return=x,x=F}return T(x);case oe:return k=bi(k),Pe(x,N,k,F)}if(Xe(k))return Z(x,N,k,F);if(Ee(k)){if(se=Ee(k),typeof se!="function")throw Error(s(150));return k=se.call(k),re(x,N,k,F)}if(typeof k.then=="function")return Pe(x,N,Lr(k),F);if(k.$$typeof===I)return Pe(x,N,Ur(x,k),F);qr(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(a(x,N.sibling),F=m(N,k),F.return=x,x=F):(a(x,N),F=Yl(k,x.mode,F),F.return=x,x=F),T(x)):a(x,N)}return function(x,N,k,F){try{ms=0;var se=Pe(x,N,k,F);return co=null,se}catch(ne){if(ne===uo||ne===Or)throw ne;var we=Ut(29,ne,null,x.mode);return we.lanes=F,we.return=x,we}finally{}}}var Ni=Qf(!0),Zf=Qf(!1),Fn=!1;function ru(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function au(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $n(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Jn(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(be&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=Mr(i),Of(i,null,a),o}return Nr(i,u,o,a),Mr(i)}function ys(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,Vd(i,a)}}function lu(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var m=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,a=a.next}while(a!==null);y===null?m=y=o:y=y.next=o}else m=y=o;a={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var uu=!1;function vs(){if(uu){var i=lo;if(i!==null)throw i}}function _s(i,o,a,u){uu=!1;var m=i.updateQueue;Fn=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var b=w,O=b.next;b.next=null,T===null?y=O:T.next=O,T=b;var z=i.alternate;z!==null&&(z=z.updateQueue,w=z.lastBaseUpdate,w!==T&&(w===null?z.firstBaseUpdate=O:w.next=O,z.lastBaseUpdate=b))}if(y!==null){var $=m.baseState;T=0,z=O=b=null,w=y;do{var P=w.lane&-536870913,B=P!==w.lane;if(B?(ve&P)===P:(u&P)===P){P!==0&&P===ao&&(uu=!0),z!==null&&(z=z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Z=i,re=w;P=o;var Pe=a;switch(re.tag){case 1:if(Z=re.payload,typeof Z=="function"){$=Z.call(Pe,$,P);break e}$=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=re.payload,P=typeof Z=="function"?Z.call(Pe,$,P):Z,P==null)break e;$=_({},$,P);break e;case 2:Fn=!0}}P=w.callback,P!==null&&(i.flags|=64,B&&(i.flags|=8192),B=m.callbacks,B===null?m.callbacks=[P]:B.push(P))}else B={lane:P,tag:w.tag,payload:w.payload,callback:w.callback,next:null},z===null?(O=z=B,b=$):z=z.next=B,T|=P;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;B=w,w=B.next,B.next=null,m.lastBaseUpdate=B,m.shared.pending=null}}while(!0);z===null&&(b=$),m.baseState=b,m.firstBaseUpdate=O,m.lastBaseUpdate=z,y===null&&(m.shared.lanes=0),Qn|=T,i.lanes=T,i.memoizedState=$}}function jf(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function eh(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)jf(a[i],o)}var fo=M(null),Br=M(0);function th(i,o){i=Mn,Q(Br,i),Q(fo,o),Mn=i|o.baseLanes}function cu(){Q(Br,Mn),Q(fo,fo.current)}function du(){Mn=Br.current,J(fo),J(Br)}var kt=M(null),Kt=null;function Yn(i){var o=i.alternate;Q(Je,Je.current&1),Q(kt,i),Kt===null&&(o===null||fo.current!==null||o.memoizedState!==null)&&(Kt=i)}function fu(i){Q(Je,Je.current),Q(kt,i),Kt===null&&(Kt=i)}function nh(i){i.tag===22?(Q(Je,Je.current),Q(kt,i),Kt===null&&(Kt=i)):Kn()}function Kn(){Q(Je,Je.current),Q(kt,kt.current)}function Ot(i){J(kt),Kt===i&&(Kt=null),J(Je)}var Je=M(0);function Gr(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vc(a)||_c(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tn=0,fe=null,ke=null,Qe=null,Hr=!1,ho=!1,Mi=!1,Vr=0,Ss=0,po=null,q_=0;function Ve(){throw Error(s(321))}function hu(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Dt(i[a],o[a]))return!1;return!0}function pu(i,o,a,u,m,y){return Tn=y,fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=i===null||i.memoizedState===null?Bh:Mu,Mi=!1,y=a(u,m),Mi=!1,ho&&(y=oh(o,a,u,m)),ih(i),y}function ih(i){V.H=ws;var o=ke!==null&&ke.next!==null;if(Tn=0,Qe=ke=fe=null,Hr=!1,Ss=0,po=null,o)throw Error(s(300));i===null||Ze||(i=i.dependencies,i!==null&&Dr(i)&&(Ze=!0))}function oh(i,o,a,u){fe=i;var m=0;do{if(ho&&(po=null),Ss=0,ho=!1,25<=m)throw Error(s(301));if(m+=1,Qe=ke=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=Gh,y=o(a,u)}while(ho);return y}function B_(){var i=V.H,o=i.useState()[0];return o=typeof o.then=="function"?Ts(o):o,i=i.useState()[0],(ke!==null?ke.memoizedState:null)!==i&&(fe.flags|=1024),o}function mu(){var i=Vr!==0;return Vr=0,i}function gu(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function yu(i){if(Hr){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Hr=!1}Tn=0,Qe=ke=fe=null,ho=!1,Ss=Vr=0,po=null}function vt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?fe.memoizedState=Qe=i:Qe=Qe.next=i,Qe}function Ye(){if(ke===null){var i=fe.alternate;i=i!==null?i.memoizedState:null}else i=ke.next;var o=Qe===null?fe.memoizedState:Qe.next;if(o!==null)Qe=o,ke=i;else{if(i===null)throw fe.alternate===null?Error(s(467)):Error(s(310));ke=i,i={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Qe===null?fe.memoizedState=Qe=i:Qe=Qe.next=i}return Qe}function zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ts(i){var o=Ss;return Ss+=1,po===null&&(po=[]),i=Kf(po,i,o),o=fe,(Qe===null?o.memoizedState:Qe.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?Bh:Mu),i}function Fr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ts(i);if(i.$$typeof===I)return lt(i)}throw Error(s(438,String(i)))}function vu(i){var o=null,a=fe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=zr(),fe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=te;return o.index++,a}function En(i,o){return typeof o=="function"?o(i):o}function $r(i){var o=Ye();return _u(o,ke,i)}function _u(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var m=i.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}o.baseQueue=m=y,u.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{o=m.next;var w=T=null,b=null,O=o,z=!1;do{var $=O.lane&-536870913;if($!==O.lane?(ve&$)===$:(Tn&$)===$){var P=O.revertLane;if(P===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===ao&&(z=!0);else if((Tn&P)===P){O=O.next,P===ao&&(z=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},b===null?(w=b=$,T=y):b=b.next=$,fe.lanes|=P,Qn|=P;$=O.action,Mi&&a(y,$),y=O.hasEagerState?O.eagerState:a(y,$)}else P={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},b===null?(w=b=P,T=y):b=b.next=P,fe.lanes|=$,Qn|=$;O=O.next}while(O!==null&&O!==o);if(b===null?T=y:b.next=w,!Dt(y,i.memoizedState)&&(Ze=!0,z&&(a=lo,a!==null)))throw a;i.memoizedState=y,i.baseState=T,i.baseQueue=b,u.lastRenderedState=y}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Su(i){var o=Ye(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,m=a.pending,y=o.memoizedState;if(m!==null){a.pending=null;var T=m=m.next;do y=i(y,T.action),T=T.next;while(T!==m);Dt(y,o.memoizedState)||(Ze=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),a.lastRenderedState=y}return[y,u]}function sh(i,o,a){var u=fe,m=Ye(),y=Te;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=o();var T=!Dt((ke||m).memoizedState,a);if(T&&(m.memoizedState=a,Ze=!0),m=m.queue,wu(lh.bind(null,u,m,i),[i]),m.getSnapshot!==o||T||Qe!==null&&Qe.memoizedState.tag&1){if(u.flags|=2048,mo(9,{destroy:void 0},ah.bind(null,u,m,a,o),null),Le===null)throw Error(s(349));y||(Tn&127)!==0||rh(u,o,a)}return a}function rh(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=fe.updateQueue,o===null?(o=zr(),fe.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function ah(i,o,a,u){o.value=a,o.getSnapshot=u,uh(o)&&ch(i)}function lh(i,o,a){return a(function(){uh(o)&&ch(i)})}function uh(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Dt(i,a)}catch{return!0}}function ch(i){var o=Si(i,2);o!==null&&Rt(o,i,2)}function Tu(i){var o=vt();if(typeof i=="function"){var a=i;if(i=a(),Mi){Ln(!0);try{a()}finally{Ln(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:i},o}function dh(i,o,a,u){return i.baseState=a,_u(i,ke,typeof u=="function"?u:En)}function G_(i,o,a,u,m){if(Kr(i))throw Error(s(485));if(i=o.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};V.T!==null?a(!0):y.isTransition=!1,u(y),a=o.pending,a===null?(y.next=o.pending=y,fh(o,y)):(y.next=a.next,o.pending=a.next=y)}}function fh(i,o){var a=o.action,u=o.payload,m=i.state;if(o.isTransition){var y=V.T,T={};V.T=T;try{var w=a(m,u),b=V.S;b!==null&&b(T,w),hh(i,o,w)}catch(O){Eu(i,o,O)}finally{y!==null&&T.types!==null&&(y.types=T.types),V.T=y}}else try{y=a(m,u),hh(i,o,y)}catch(O){Eu(i,o,O)}}function hh(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ph(i,o,u)},function(u){return Eu(i,o,u)}):ph(i,o,a)}function ph(i,o,a){o.status="fulfilled",o.value=a,mh(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,fh(i,a)))}function Eu(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,mh(o),o=o.next;while(o!==u)}i.action=null}function mh(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function gh(i,o){return o}function yh(i,o){if(Te){var a=Le.formState;if(a!==null){e:{var u=fe;if(Te){if(Be){t:{for(var m=Be,y=Yt;m.nodeType!==8;){if(!y){m=null;break t}if(m=Xt(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Be=Xt(m.nextSibling),u=m.data==="F!";break e}}Vn(u)}u=!1}u&&(o=a[0])}}return a=vt(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:o},a.queue=u,a=Ph.bind(null,fe,u),u.dispatch=a,u=Tu(!1),y=Nu.bind(null,fe,!1,u.queue),u=vt(),m={state:o,dispatch:null,action:i,pending:null},u.queue=m,a=G_.bind(null,fe,m,y,a),m.dispatch=a,u.memoizedState=i,[o,a,!1]}function vh(i){var o=Ye();return _h(o,ke,i)}function _h(i,o,a){if(o=_u(i,o,gh)[0],i=$r(En)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Ts(o)}catch(T){throw T===uo?Or:T}else u=o;o=Ye();var m=o.queue,y=m.dispatch;return a!==o.memoizedState&&(fe.flags|=2048,mo(9,{destroy:void 0},H_.bind(null,m,a),null)),[u,y,i]}function H_(i,o){i.action=o}function Sh(i){var o=Ye(),a=ke;if(a!==null)return _h(o,a,i);Ye(),o=o.memoizedState,a=Ye();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function mo(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=fe.updateQueue,o===null&&(o=zr(),fe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function Th(){return Ye().memoizedState}function Jr(i,o,a,u){var m=vt();fe.flags|=i,m.memoizedState=mo(1|o,{destroy:void 0},a,u===void 0?null:u)}function Yr(i,o,a,u){var m=Ye();u=u===void 0?null:u;var y=m.memoizedState.inst;ke!==null&&u!==null&&hu(u,ke.memoizedState.deps)?m.memoizedState=mo(o,y,a,u):(fe.flags|=i,m.memoizedState=mo(1|o,y,a,u))}function Eh(i,o){Jr(8390656,8,i,o)}function wu(i,o){Yr(2048,8,i,o)}function V_(i){fe.flags|=4;var o=fe.updateQueue;if(o===null)o=zr(),fe.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function wh(i){var o=Ye().memoizedState;return V_({ref:o,nextImpl:i}),function(){if((be&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Ah(i,o){return Yr(4,2,i,o)}function Ch(i,o){return Yr(4,4,i,o)}function bh(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Rh(i,o,a){a=a!=null?a.concat([i]):null,Yr(4,4,bh.bind(null,o,i),a)}function Au(){}function Nh(i,o){var a=Ye();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&hu(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function Mh(i,o){var a=Ye();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&hu(o,u[1]))return u[0];if(u=i(),Mi){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[u,o],u}function Cu(i,o,a){return a===void 0||(Tn&1073741824)!==0&&(ve&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=Ip(),fe.lanes|=i,Qn|=i,a)}function Ih(i,o,a,u){return Dt(a,o)?a:fo.current!==null?(i=Cu(i,a,u),Dt(i,o)||(Ze=!0),i):(Tn&42)===0||(Tn&1073741824)!==0&&(ve&261930)===0?(Ze=!0,i.memoizedState=a):(i=Ip(),fe.lanes|=i,Qn|=i,o)}function xh(i,o,a,u,m){var y=X.p;X.p=y!==0&&8>y?y:8;var T=V.T,w={};V.T=w,Nu(i,!1,o,a);try{var b=m(),O=V.S;if(O!==null&&O(w,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var z=L_(b,u);Es(i,o,z,qt(i))}else Es(i,o,u,qt(i))}catch($){Es(i,o,{then:function(){},status:"rejected",reason:$},qt())}finally{X.p=y,T!==null&&w.types!==null&&(T.types=w.types),V.T=T}}function z_(){}function bu(i,o,a,u){if(i.tag!==5)throw Error(s(476));var m=Dh(i).queue;xh(i,m,o,j,a===null?z_:function(){return Uh(i),a(u)})}function Dh(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:j},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Uh(i){var o=Dh(i);o.next===null&&(o=i.alternate.memoizedState),Es(i,o.next.queue,{},qt())}function Ru(){return lt(Bs)}function kh(){return Ye().memoizedState}function Oh(){return Ye().memoizedState}function F_(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=qt();i=$n(a);var u=Jn(o,i,a);u!==null&&(Rt(u,o,a),ys(u,o,a)),o={cache:nu()},i.payload=o;return}o=o.return}}function $_(i,o,a){var u=qt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Kr(i)?Lh(o,a):(a=$l(i,o,a,u),a!==null&&(Rt(a,i,u),qh(a,o,u)))}function Ph(i,o,a){var u=qt();Es(i,o,a,u)}function Es(i,o,a,u){var m={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kr(i))Lh(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,w=y(T,a);if(m.hasEagerState=!0,m.eagerState=w,Dt(w,T))return Nr(i,o,m,0),Le===null&&Rr(),!1}catch{}finally{}if(a=$l(i,o,m,u),a!==null)return Rt(a,i,u),qh(a,o,u),!0}return!1}function Nu(i,o,a,u){if(u={lane:2,revertLane:rc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Kr(i)){if(o)throw Error(s(479))}else o=$l(i,a,u,2),o!==null&&Rt(o,i,2)}function Kr(i){var o=i.alternate;return i===fe||o!==null&&o===fe}function Lh(i,o){ho=Hr=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function qh(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,Vd(i,a)}}var ws={readContext:lt,use:Fr,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve,useHostTransitionStatus:Ve,useFormState:Ve,useActionState:Ve,useOptimistic:Ve,useMemoCache:Ve,useCacheRefresh:Ve};ws.useEffectEvent=Ve;var Bh={readContext:lt,use:Fr,useCallback:function(i,o){return vt().memoizedState=[i,o===void 0?null:o],i},useContext:lt,useEffect:Eh,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Jr(4194308,4,bh.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Jr(4194308,4,i,o)},useInsertionEffect:function(i,o){Jr(4,2,i,o)},useMemo:function(i,o){var a=vt();o=o===void 0?null:o;var u=i();if(Mi){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=vt();if(a!==void 0){var m=a(o);if(Mi){Ln(!0);try{a(o)}finally{Ln(!1)}}}else m=o;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=$_.bind(null,fe,i),[u.memoizedState,i]},useRef:function(i){var o=vt();return i={current:i},o.memoizedState=i},useState:function(i){i=Tu(i);var o=i.queue,a=Ph.bind(null,fe,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:Au,useDeferredValue:function(i,o){var a=vt();return Cu(a,i,o)},useTransition:function(){var i=Tu(!1);return i=xh.bind(null,fe,i.queue,!0,!1),vt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=fe,m=vt();if(Te){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),Le===null)throw Error(s(349));(ve&127)!==0||rh(u,o,a)}m.memoizedState=a;var y={value:a,getSnapshot:o};return m.queue=y,Eh(lh.bind(null,u,y,i),[i]),u.flags|=2048,mo(9,{destroy:void 0},ah.bind(null,u,y,a,o),null),a},useId:function(){var i=vt(),o=Le.identifierPrefix;if(Te){var a=cn,u=un;a=(u&~(1<<32-xt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Vr++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=q_++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Ru,useFormState:yh,useActionState:yh,useOptimistic:function(i){var o=vt();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Nu.bind(null,fe,!0,a),a.dispatch=o,[i,o]},useMemoCache:vu,useCacheRefresh:function(){return vt().memoizedState=F_.bind(null,fe)},useEffectEvent:function(i){var o=vt(),a={impl:i};return o.memoizedState=a,function(){if((be&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Mu={readContext:lt,use:Fr,useCallback:Nh,useContext:lt,useEffect:wu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Ch,useMemo:Mh,useReducer:$r,useRef:Th,useState:function(){return $r(En)},useDebugValue:Au,useDeferredValue:function(i,o){var a=Ye();return Ih(a,ke.memoizedState,i,o)},useTransition:function(){var i=$r(En)[0],o=Ye().memoizedState;return[typeof i=="boolean"?i:Ts(i),o]},useSyncExternalStore:sh,useId:kh,useHostTransitionStatus:Ru,useFormState:vh,useActionState:vh,useOptimistic:function(i,o){var a=Ye();return dh(a,ke,i,o)},useMemoCache:vu,useCacheRefresh:Oh};Mu.useEffectEvent=wh;var Gh={readContext:lt,use:Fr,useCallback:Nh,useContext:lt,useEffect:wu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Ch,useMemo:Mh,useReducer:Su,useRef:Th,useState:function(){return Su(En)},useDebugValue:Au,useDeferredValue:function(i,o){var a=Ye();return ke===null?Cu(a,i,o):Ih(a,ke.memoizedState,i,o)},useTransition:function(){var i=Su(En)[0],o=Ye().memoizedState;return[typeof i=="boolean"?i:Ts(i),o]},useSyncExternalStore:sh,useId:kh,useHostTransitionStatus:Ru,useFormState:Sh,useActionState:Sh,useOptimistic:function(i,o){var a=Ye();return ke!==null?dh(a,ke,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:vu,useCacheRefresh:Oh};Gh.useEffectEvent=wh;function Iu(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:_({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var xu={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=qt(),m=$n(u);m.payload=o,a!=null&&(m.callback=a),o=Jn(i,m,u),o!==null&&(Rt(o,i,u),ys(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=qt(),m=$n(u);m.tag=1,m.payload=o,a!=null&&(m.callback=a),o=Jn(i,m,u),o!==null&&(Rt(o,i,u),ys(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=qt(),u=$n(a);u.tag=2,o!=null&&(u.callback=o),o=Jn(i,u,a),o!==null&&(Rt(o,i,a),ys(o,i,a))}};function Hh(i,o,a,u,m,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,T):o.prototype&&o.prototype.isPureReactComponent?!us(a,u)||!us(m,y):!0}function Vh(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&xu.enqueueReplaceState(o,o.state,null)}function Ii(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=_({},a));for(var m in i)a[m]===void 0&&(a[m]=i[m])}return a}function zh(i){br(i)}function Fh(i){console.error(i)}function $h(i){br(i)}function Xr(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Jh(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Du(i,o,a){return a=$n(a),a.tag=3,a.payload={element:null},a.callback=function(){Xr(i,o)},a}function Yh(i){return i=$n(i),i.tag=3,i}function Kh(i,o,a,u){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;i.payload=function(){return m(y)},i.callback=function(){Jh(o,a,u)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Jh(o,a,u),typeof m!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function J_(i,o,a,u,m){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&ro(o,a,m,!0),a=kt.current,a!==null){switch(a.tag){case 31:case 13:return Kt===null?aa():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=m,u===Pr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),ic(i,u,m)),!1;case 22:return a.flags|=65536,u===Pr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),ic(i,u,m)),!1}throw Error(s(435,a.tag))}return ic(i,u,m),aa(),!1}if(Te)return o=kt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==Ql&&(i=Error(s(422),{cause:u}),fs(Ft(i,a)))):(u!==Ql&&(o=Error(s(423),{cause:u}),fs(Ft(o,a))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Ft(u,a),m=Du(i.stateNode,u,m),lu(i,m),ze!==4&&(ze=2)),!1;var y=Error(s(520),{cause:u});if(y=Ft(y,a),xs===null?xs=[y]:xs.push(y),ze!==4&&(ze=2),o===null)return!0;u=Ft(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=m&-m,a.lanes|=i,i=Du(a.stateNode,u,i),lu(a,i),!1;case 1:if(o=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Zn===null||!Zn.has(y))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Yh(m),Kh(m,i,a,u),lu(a,m),!1}a=a.return}while(a!==null);return!1}var Uu=Error(s(461)),Ze=!1;function ut(i,o,a,u){o.child=i===null?Zf(o,null,a,u):Ni(o,i.child,a,u)}function Xh(i,o,a,u,m){a=a.render;var y=o.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return Ai(o),u=pu(i,o,a,T,y,m),w=mu(),i!==null&&!Ze?(gu(i,o,m),wn(i,o,m)):(Te&&w&&Xl(o),o.flags|=1,ut(i,o,u,m),o.child)}function Wh(i,o,a,u,m){if(i===null){var y=a.type;return typeof y=="function"&&!Jl(y)&&y.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=y,Qh(i,o,y,u,m)):(i=Ir(a.type,null,u,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Hu(i,m)){var T=y.memoizedProps;if(a=a.compare,a=a!==null?a:us,a(T,u)&&i.ref===o.ref)return wn(i,o,m)}return o.flags|=1,i=yn(y,u),i.ref=o.ref,i.return=o,o.child=i}function Qh(i,o,a,u,m){if(i!==null){var y=i.memoizedProps;if(us(y,u)&&i.ref===o.ref)if(Ze=!1,o.pendingProps=u=y,Hu(i,m))(i.flags&131072)!==0&&(Ze=!0);else return o.lanes=i.lanes,wn(i,o,m)}return ku(i,o,a,u,m)}function Zh(i,o,a,u){var m=u.children,y=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,i!==null){for(u=o.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,o.child=null;return jh(i,o,y,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&kr(o,y!==null?y.cachePool:null),y!==null?th(o,y):cu(),nh(o);else return u=o.lanes=536870912,jh(i,o,y!==null?y.baseLanes|a:a,a,u)}else y!==null?(kr(o,y.cachePool),th(o,y),Kn(),o.memoizedState=null):(i!==null&&kr(o,null),cu(),Kn());return ut(i,o,m,a),o.child}function As(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function jh(i,o,a,u,m){var y=ou();return y=y===null?null:{parent:We._currentValue,pool:y},o.memoizedState={baseLanes:a,cachePool:y},i!==null&&kr(o,null),cu(),nh(o),i!==null&&ro(i,o,u,!0),o.childLanes=m,null}function Wr(i,o){return o=Zr({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function ep(i,o,a){return Ni(o,i.child,null,a),i=Wr(o,o.pendingProps),i.flags|=2,Ot(o),o.memoizedState=null,i}function Y_(i,o,a){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Te){if(u.mode==="hidden")return i=Wr(o,u),o.lanes=536870912,As(null,i);if(fu(o),(i=Be)?(i=fm(i,Yt),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Gn!==null?{id:un,overflow:cn}:null,retryLane:536870912,hydrationErrors:null},a=Lf(i),a.return=o,o.child=a,at=o,Be=null)):i=null,i===null)throw Vn(o);return o.lanes=536870912,null}return Wr(o,u)}var y=i.memoizedState;if(y!==null){var T=y.dehydrated;if(fu(o),m)if(o.flags&256)o.flags&=-257,o=ep(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Ze||ro(i,o,a,!1),m=(a&i.childLanes)!==0,Ze||m){if(u=Le,u!==null&&(T=zd(u,a),T!==0&&T!==y.retryLane))throw y.retryLane=T,Si(i,T),Rt(u,i,T),Uu;aa(),o=ep(i,o,a)}else i=y.treeContext,Be=Xt(T.nextSibling),at=o,Te=!0,Hn=null,Yt=!1,i!==null&&Gf(o,i),o=Wr(o,u),o.flags|=4096;return o}return i=yn(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Qr(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function ku(i,o,a,u,m){return Ai(o),a=pu(i,o,a,u,void 0,m),u=mu(),i!==null&&!Ze?(gu(i,o,m),wn(i,o,m)):(Te&&u&&Xl(o),o.flags|=1,ut(i,o,a,m),o.child)}function tp(i,o,a,u,m,y){return Ai(o),o.updateQueue=null,a=oh(o,u,a,m),ih(i),u=mu(),i!==null&&!Ze?(gu(i,o,y),wn(i,o,y)):(Te&&u&&Xl(o),o.flags|=1,ut(i,o,a,y),o.child)}function np(i,o,a,u,m){if(Ai(o),o.stateNode===null){var y=no,T=a.contextType;typeof T=="object"&&T!==null&&(y=lt(T)),y=new a(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=xu,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},ru(o),T=a.contextType,y.context=typeof T=="object"&&T!==null?lt(T):no,y.state=o.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Iu(o,a,T,u),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&xu.enqueueReplaceState(y,y.state,null),_s(o,u,y,m),vs(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){y=o.stateNode;var w=o.memoizedProps,b=Ii(a,w);y.props=b;var O=y.context,z=a.contextType;T=no,typeof z=="object"&&z!==null&&(T=lt(z));var $=a.getDerivedStateFromProps;z=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||O!==T)&&Vh(o,y,u,T),Fn=!1;var P=o.memoizedState;y.state=P,_s(o,u,y,m),vs(),O=o.memoizedState,w||P!==O||Fn?(typeof $=="function"&&(Iu(o,a,$,u),O=o.memoizedState),(b=Fn||Hh(o,a,b,u,P,O,T))?(z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=O),y.props=u,y.state=O,y.context=T,u=b):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,au(i,o),T=o.memoizedProps,z=Ii(a,T),y.props=z,$=o.pendingProps,P=y.context,O=a.contextType,b=no,typeof O=="object"&&O!==null&&(b=lt(O)),w=a.getDerivedStateFromProps,(O=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==$||P!==b)&&Vh(o,y,u,b),Fn=!1,P=o.memoizedState,y.state=P,_s(o,u,y,m),vs();var B=o.memoizedState;T!==$||P!==B||Fn||i!==null&&i.dependencies!==null&&Dr(i.dependencies)?(typeof w=="function"&&(Iu(o,a,w,u),B=o.memoizedState),(z=Fn||Hh(o,a,z,u,P,B,b)||i!==null&&i.dependencies!==null&&Dr(i.dependencies))?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,B,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,B,b)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=B),y.props=u,y.state=B,y.context=b,u=z):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),u=!1)}return y=u,Qr(i,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&u?(o.child=Ni(o,i.child,null,m),o.child=Ni(o,null,a,m)):ut(i,o,a,m),o.memoizedState=y.state,i=o.child):i=wn(i,o,m),i}function ip(i,o,a,u){return Ei(),o.flags|=256,ut(i,o,a,u),o.child}var Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pu(i){return{baseLanes:i,cachePool:Jf()}}function Lu(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Lt),i}function op(i,o,a){var u=o.pendingProps,m=!1,y=(o.flags&128)!==0,T;if((T=y)||(T=i!==null&&i.memoizedState===null?!1:(Je.current&2)!==0),T&&(m=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,i===null){if(Te){if(m?Yn(o):Kn(),(i=Be)?(i=fm(i,Yt),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Gn!==null?{id:un,overflow:cn}:null,retryLane:536870912,hydrationErrors:null},a=Lf(i),a.return=o,o.child=a,at=o,Be=null)):i=null,i===null)throw Vn(o);return _c(i)?o.lanes=32:o.lanes=536870912,null}var w=u.children;return u=u.fallback,m?(Kn(),m=o.mode,w=Zr({mode:"hidden",children:w},m),u=Ti(u,m,a,null),w.return=o,u.return=o,w.sibling=u,o.child=w,u=o.child,u.memoizedState=Pu(a),u.childLanes=Lu(i,T,a),o.memoizedState=Ou,As(null,u)):(Yn(o),qu(o,w))}var b=i.memoizedState;if(b!==null&&(w=b.dehydrated,w!==null)){if(y)o.flags&256?(Yn(o),o.flags&=-257,o=Bu(i,o,a)):o.memoizedState!==null?(Kn(),o.child=i.child,o.flags|=128,o=null):(Kn(),w=u.fallback,m=o.mode,u=Zr({mode:"visible",children:u.children},m),w=Ti(w,m,a,null),w.flags|=2,u.return=o,w.return=o,u.sibling=w,o.child=u,Ni(o,i.child,null,a),u=o.child,u.memoizedState=Pu(a),u.childLanes=Lu(i,T,a),o.memoizedState=Ou,o=As(null,u));else if(Yn(o),_c(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var O=T.dgst;T=O,u=Error(s(419)),u.stack="",u.digest=T,fs({value:u,source:null,stack:null}),o=Bu(i,o,a)}else if(Ze||ro(i,o,a,!1),T=(a&i.childLanes)!==0,Ze||T){if(T=Le,T!==null&&(u=zd(T,a),u!==0&&u!==b.retryLane))throw b.retryLane=u,Si(i,u),Rt(T,i,u),Uu;vc(w)||aa(),o=Bu(i,o,a)}else vc(w)?(o.flags|=192,o.child=i.child,o=null):(i=b.treeContext,Be=Xt(w.nextSibling),at=o,Te=!0,Hn=null,Yt=!1,i!==null&&Gf(o,i),o=qu(o,u.children),o.flags|=4096);return o}return m?(Kn(),w=u.fallback,m=o.mode,b=i.child,O=b.sibling,u=yn(b,{mode:"hidden",children:u.children}),u.subtreeFlags=b.subtreeFlags&65011712,O!==null?w=yn(O,w):(w=Ti(w,m,a,null),w.flags|=2),w.return=o,u.return=o,u.sibling=w,o.child=u,As(null,u),u=o.child,w=i.child.memoizedState,w===null?w=Pu(a):(m=w.cachePool,m!==null?(b=We._currentValue,m=m.parent!==b?{parent:b,pool:b}:m):m=Jf(),w={baseLanes:w.baseLanes|a,cachePool:m}),u.memoizedState=w,u.childLanes=Lu(i,T,a),o.memoizedState=Ou,As(i.child,u)):(Yn(o),a=i.child,i=a.sibling,a=yn(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(T=o.deletions,T===null?(o.deletions=[i],o.flags|=16):T.push(i)),o.child=a,o.memoizedState=null,a)}function qu(i,o){return o=Zr({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Zr(i,o){return i=Ut(22,i,null,o),i.lanes=0,i}function Bu(i,o,a){return Ni(o,i.child,null,a),i=qu(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sp(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),eu(i.return,o,a)}function Gu(i,o,a,u,m,y){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:m,treeForkCount:y}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=a,T.tailMode=m,T.treeForkCount=y)}function rp(i,o,a){var u=o.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=Je.current,w=(T&2)!==0;if(w?(T=T&1|2,o.flags|=128):T&=1,Q(Je,T),ut(i,o,u,a),u=Te?ds:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sp(i,a,o);else if(i.tag===19)sp(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(a=o.child,m=null;a!==null;)i=a.alternate,i!==null&&Gr(i)===null&&(m=a),a=a.sibling;a=m,a===null?(m=o.child,o.child=null):(m=a.sibling,a.sibling=null),Gu(o,!1,m,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Gr(i)===null){o.child=m;break}i=m.sibling,m.sibling=a,a=m,m=i}Gu(o,!0,a,null,y,u);break;case"together":Gu(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function wn(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Qn|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(ro(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=yn(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=yn(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Hu(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Dr(i)))}function K_(i,o,a){switch(o.tag){case 3:yt(o,o.stateNode.containerInfo),zn(o,We,i.memoizedState.cache),Ei();break;case 27:case 5:Wo(o);break;case 4:yt(o,o.stateNode.containerInfo);break;case 10:zn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,fu(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Yn(o),o.flags|=128,null):(a&o.child.childLanes)!==0?op(i,o,a):(Yn(o),i=wn(i,o,a),i!==null?i.sibling:null);Yn(o);break;case 19:var m=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(ro(i,o,a,!1),u=(a&o.childLanes)!==0),m){if(u)return rp(i,o,a);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Q(Je,Je.current),u)break;return null;case 22:return o.lanes=0,Zh(i,o,a,o.pendingProps);case 24:zn(o,We,i.memoizedState.cache)}return wn(i,o,a)}function ap(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Ze=!0;else{if(!Hu(i,a)&&(o.flags&128)===0)return Ze=!1,K_(i,o,a);Ze=(i.flags&131072)!==0}else Ze=!1,Te&&(o.flags&1048576)!==0&&Bf(o,ds,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=bi(o.elementType),o.type=i,typeof i=="function")Jl(i)?(u=Ii(i,u),o.tag=1,o=np(null,o,i,u,a)):(o.tag=0,o=ku(null,o,i,u,a));else{if(i!=null){var m=i.$$typeof;if(m===L){o.tag=11,o=Xh(null,o,i,u,a);break e}else if(m===H){o.tag=14,o=Wh(null,o,i,u,a);break e}}throw o=Re(i)||i,Error(s(306,o,""))}}return o;case 0:return ku(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,m=Ii(u,o.pendingProps),np(i,o,u,m,a);case 3:e:{if(yt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;m=y.element,au(i,o),_s(o,u,null,a);var T=o.memoizedState;if(u=T.cache,zn(o,We,u),u!==y.cache&&tu(o,[We],a,!0),vs(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=ip(i,o,u,a);break e}else if(u!==m){m=Ft(Error(s(424)),o),fs(m),o=ip(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Be=Xt(i.firstChild),at=o,Te=!0,Hn=null,Yt=!0,a=Zf(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ei(),u===m){o=wn(i,o,a);break e}ut(i,o,u,a)}o=o.child}return o;case 26:return Qr(i,o),i===null?(a=vm(o.type,null,o.pendingProps,null))?o.memoizedState=a:Te||(a=o.type,i=o.pendingProps,u=pa(me.current).createElement(a),u[rt]=o,u[Tt]=i,ct(u,a,i),it(u),o.stateNode=u):o.memoizedState=vm(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Wo(o),i===null&&Te&&(u=o.stateNode=mm(o.type,o.pendingProps,me.current),at=o,Yt=!0,m=Be,ni(o.type)?(Sc=m,Be=Xt(u.firstChild)):Be=m),ut(i,o,o.pendingProps.children,a),Qr(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Te&&((m=u=Be)&&(u=AS(u,o.type,o.pendingProps,Yt),u!==null?(o.stateNode=u,at=o,Be=Xt(u.firstChild),Yt=!1,m=!0):m=!1),m||Vn(o)),Wo(o),m=o.type,y=o.pendingProps,T=i!==null?i.memoizedProps:null,u=y.children,mc(m,y)?u=null:T!==null&&mc(m,T)&&(o.flags|=32),o.memoizedState!==null&&(m=pu(i,o,B_,null,null,a),Bs._currentValue=m),Qr(i,o),ut(i,o,u,a),o.child;case 6:return i===null&&Te&&((i=a=Be)&&(a=CS(a,o.pendingProps,Yt),a!==null?(o.stateNode=a,at=o,Be=null,i=!0):i=!1),i||Vn(o)),null;case 13:return op(i,o,a);case 4:return yt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Ni(o,null,u,a):ut(i,o,u,a),o.child;case 11:return Xh(i,o,o.type,o.pendingProps,a);case 7:return ut(i,o,o.pendingProps,a),o.child;case 8:return ut(i,o,o.pendingProps.children,a),o.child;case 12:return ut(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,zn(o,o.type,u.value),ut(i,o,u.children,a),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,Ai(o),m=lt(m),u=u(m),o.flags|=1,ut(i,o,u,a),o.child;case 14:return Wh(i,o,o.type,o.pendingProps,a);case 15:return Qh(i,o,o.type,o.pendingProps,a);case 19:return rp(i,o,a);case 31:return Y_(i,o,a);case 22:return Zh(i,o,a,o.pendingProps);case 24:return Ai(o),u=lt(We),i===null?(m=ou(),m===null&&(m=Le,y=nu(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=a),m=y),o.memoizedState={parent:u,cache:m},ru(o),zn(o,We,m)):((i.lanes&a)!==0&&(au(i,o),_s(o,null,null,a),vs()),m=i.memoizedState,y=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),zn(o,We,u)):(u=y.cache,zn(o,We,u),u!==m.cache&&tu(o,[We],a,!0))),ut(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function An(i){i.flags|=4}function Vu(i,o,a,u,m){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(kp())i.flags|=8192;else throw Ri=Pr,su}else i.flags&=-16777217}function lp(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wm(o))if(kp())i.flags|=8192;else throw Ri=Pr,su}function jr(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Gd():536870912,i.lanes|=o,_o|=o)}function Cs(i,o){if(!Te)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ge(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var m=i.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function X_(i,o,a){var u=o.pendingProps;switch(Wl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(o),null;case 1:return Ge(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Sn(We),$e(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(so(o)?An(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Zl())),Ge(o),null;case 26:var m=o.type,y=o.memoizedState;return i===null?(An(o),y!==null?(Ge(o),lp(o,y)):(Ge(o),Vu(o,m,null,u,a))):y?y!==i.memoizedState?(An(o),Ge(o),lp(o,y)):(Ge(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&An(o),Ge(o),Vu(o,m,i,u,a)),null;case 27:if(cr(o),a=me.current,m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&An(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Ge(o),null}i=ee.current,so(o)?Hf(o):(i=mm(m,u,a),o.stateNode=i,An(o))}return Ge(o),null;case 5:if(cr(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&An(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Ge(o),null}if(y=ee.current,so(o))Hf(o);else{var T=pa(me.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[rt]=o,y[Tt]=u;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=y;e:switch(ct(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&An(o)}}return Ge(o),Vu(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&An(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=me.current,so(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,m=at,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[rt]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||om(i.nodeValue,a)),i||Vn(o,!0)}else i=pa(i).createTextNode(u),i[rt]=o,o.stateNode=i}return Ge(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=so(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[rt]=o}else Ei(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ge(o),i=!1}else a=Zl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(Ot(o),o):(Ot(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Ge(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=so(o),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[rt]=o}else Ei(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ge(o),m=!1}else m=Zl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Ot(o),o):(Ot(o),null)}return Ot(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),jr(o,o.updateQueue),Ge(o),null);case 4:return $e(),i===null&&cc(o.stateNode.containerInfo),Ge(o),null;case 10:return Sn(o.type),Ge(o),null;case 19:if(J(Je),u=o.memoizedState,u===null)return Ge(o),null;if(m=(o.flags&128)!==0,y=u.rendering,y===null)if(m)Cs(u,!1);else{if(ze!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=Gr(i),y!==null){for(o.flags|=128,Cs(u,!1),i=y.updateQueue,o.updateQueue=i,jr(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)Pf(a,i),a=a.sibling;return Q(Je,Je.current&1|2),Te&&vn(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&Mt()>oa&&(o.flags|=128,m=!0,Cs(u,!1),o.lanes=4194304)}else{if(!m)if(i=Gr(y),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,jr(o,i),Cs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Te)return Ge(o),null}else 2*Mt()-u.renderingStartTime>oa&&a!==536870912&&(o.flags|=128,m=!0,Cs(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(i=u.last,i!==null?i.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Mt(),i.sibling=null,a=Je.current,Q(Je,m?a&1|2:a&1),Te&&vn(o,u.treeForkCount),i):(Ge(o),null);case 22:case 23:return Ot(o),du(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(Ge(o),o.subtreeFlags&6&&(o.flags|=8192)):Ge(o),a=o.updateQueue,a!==null&&jr(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&J(Ci),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Sn(We),Ge(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function W_(i,o){switch(Wl(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Sn(We),$e(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return cr(o),null;case 31:if(o.memoizedState!==null){if(Ot(o),o.alternate===null)throw Error(s(340));Ei()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Ot(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ei()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return J(Je),null;case 4:return $e(),null;case 10:return Sn(o.type),null;case 22:case 23:return Ot(o),du(),i!==null&&J(Ci),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Sn(We),null;case 25:return null;default:return null}}function up(i,o){switch(Wl(o),o.tag){case 3:Sn(We),$e();break;case 26:case 27:case 5:cr(o);break;case 4:$e();break;case 31:o.memoizedState!==null&&Ot(o);break;case 13:Ot(o);break;case 19:J(Je);break;case 10:Sn(o.type);break;case 22:case 23:Ot(o),du(),i!==null&&J(Ci);break;case 24:Sn(We)}}function bs(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var m=u.next;a=m;do{if((a.tag&i)===i){u=void 0;var y=a.create,T=a.inst;u=y(),T.destroy=u}a=a.next}while(a!==m)}}catch(w){De(o,o.return,w)}}function Xn(i,o,a){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&i)===i){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=o;var b=a,O=w;try{O()}catch(z){De(m,b,z)}}}u=u.next}while(u!==y)}}catch(z){De(o,o.return,z)}}function cp(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{eh(o,a)}catch(u){De(i,i.return,u)}}}function dp(i,o,a){a.props=Ii(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){De(i,o,u)}}function Rs(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(m){De(i,o,m)}}function dn(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(m){De(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){De(i,o,m)}else a.current=null}function fp(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(m){De(i,i.return,m)}}function zu(i,o,a){try{var u=i.stateNode;vS(u,i.type,a,o),u[Tt]=o}catch(m){De(i,i.return,m)}}function hp(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ni(i.type)||i.tag===4}function Fu(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||hp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ni(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $u(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=mn));else if(u!==4&&(u===27&&ni(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for($u(i,o,a),i=i.sibling;i!==null;)$u(i,o,a),i=i.sibling}function ea(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&ni(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ea(i,o,a),i=i.sibling;i!==null;)ea(i,o,a),i=i.sibling}function pp(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);ct(o,u,a),o[rt]=i,o[Tt]=a}catch(y){De(i,i.return,y)}}var Cn=!1,je=!1,Ju=!1,mp=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Q_(i,o){if(i=i.containerInfo,hc=Ta,i=Rf(i),Bl(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var T=0,w=-1,b=-1,O=0,z=0,$=i,P=null;t:for(;;){for(var B;$!==a||m!==0&&$.nodeType!==3||(w=T+m),$!==y||u!==0&&$.nodeType!==3||(b=T+u),$.nodeType===3&&(T+=$.nodeValue.length),(B=$.firstChild)!==null;)P=$,$=B;for(;;){if($===i)break t;if(P===a&&++O===m&&(w=T),P===y&&++z===u&&(b=T),(B=$.nextSibling)!==null)break;$=P,P=$.parentNode}$=B}a=w===-1||b===-1?null:{start:w,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(pc={focusedElem:i,selectionRange:a},Ta=!1,ot=o;ot!==null;)if(o=ot,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ot=i;else for(;ot!==null;){switch(o=ot,y=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)m=i[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=o,m=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var Z=Ii(a.type,m);i=u.getSnapshotBeforeUpdate(Z,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(re){De(a,a.return,re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)yc(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yc(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,ot=i;break}ot=o.return}}function gp(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Rn(i,a),u&4&&bs(5,a);break;case 1:if(Rn(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(T){De(a,a.return,T)}else{var m=Ii(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(T){De(a,a.return,T)}}u&64&&cp(a),u&512&&Rs(a,a.return);break;case 3:if(Rn(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{eh(i,o)}catch(T){De(a,a.return,T)}}break;case 27:o===null&&u&4&&pp(a);case 26:case 5:Rn(i,a),o===null&&u&4&&fp(a),u&512&&Rs(a,a.return);break;case 12:Rn(i,a);break;case 31:Rn(i,a),u&4&&_p(i,a);break;case 13:Rn(i,a),u&4&&Sp(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=rS.bind(null,a),bS(i,a))));break;case 22:if(u=a.memoizedState!==null||Cn,!u){o=o!==null&&o.memoizedState!==null||je,m=Cn;var y=je;Cn=u,(je=o)&&!y?Nn(i,a,(a.subtreeFlags&8772)!==0):Rn(i,a),Cn=m,je=y}break;case 30:break;default:Rn(i,a)}}function yp(i){var o=i.alternate;o!==null&&(i.alternate=null,yp(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&El(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var He=null,wt=!1;function bn(i,o,a){for(a=a.child;a!==null;)vp(i,o,a),a=a.sibling}function vp(i,o,a){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Qo,a)}catch{}switch(a.tag){case 26:je||dn(a,o),bn(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:je||dn(a,o);var u=He,m=wt;ni(a.type)&&(He=a.stateNode,wt=!1),bn(i,o,a),Ps(a.stateNode),He=u,wt=m;break;case 5:je||dn(a,o);case 6:if(u=He,m=wt,He=null,bn(i,o,a),He=u,wt=m,He!==null)if(wt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(y){De(a,o,y)}else try{He.removeChild(a.stateNode)}catch(y){De(a,o,y)}break;case 18:He!==null&&(wt?(i=He,cm(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Ro(i)):cm(He,a.stateNode));break;case 4:u=He,m=wt,He=a.stateNode.containerInfo,wt=!0,bn(i,o,a),He=u,wt=m;break;case 0:case 11:case 14:case 15:Xn(2,a,o),je||Xn(4,a,o),bn(i,o,a);break;case 1:je||(dn(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&dp(a,o,u)),bn(i,o,a);break;case 21:bn(i,o,a);break;case 22:je=(u=je)||a.memoizedState!==null,bn(i,o,a),je=u;break;default:bn(i,o,a)}}function _p(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ro(i)}catch(a){De(o,o.return,a)}}}function Sp(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ro(i)}catch(a){De(o,o.return,a)}}function Z_(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new mp),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new mp),o;default:throw Error(s(435,i.tag))}}function ta(i,o){var a=Z_(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var m=aS.bind(null,i,u);u.then(m,m)}})}function At(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var m=a[u],y=i,T=o,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(ni(w.type)){He=w.stateNode,wt=!1;break e}break;case 5:He=w.stateNode,wt=!1;break e;case 3:case 4:He=w.stateNode.containerInfo,wt=!0;break e}w=w.return}if(He===null)throw Error(s(160));vp(y,T,m),He=null,wt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Tp(o,i),o=o.sibling}var en=null;function Tp(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:At(o,i),Ct(i),u&4&&(Xn(3,i,i.return),bs(3,i),Xn(5,i,i.return));break;case 1:At(o,i),Ct(i),u&512&&(je||a===null||dn(a,a.return)),u&64&&Cn&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var m=en;if(At(o,i),Ct(i),u&512&&(je||a===null||dn(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[es]||y[rt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),ct(y,u,a),y[rt]=i,it(y),u=y;break e;case"link":var T=Tm("link","href",m).get(u+(a.href||""));if(T){for(var w=0;w<T.length;w++)if(y=T[w],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(w,1);break t}}y=m.createElement(u),ct(y,u,a),m.head.appendChild(y);break;case"meta":if(T=Tm("meta","content",m).get(u+(a.content||""))){for(w=0;w<T.length;w++)if(y=T[w],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(w,1);break t}}y=m.createElement(u),ct(y,u,a),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[rt]=i,it(y),u=y}i.stateNode=u}else Em(m,i.type,i.stateNode);else i.stateNode=Sm(m,u,i.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?Em(m,i.type,i.stateNode):Sm(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&zu(i,i.memoizedProps,a.memoizedProps)}break;case 27:At(o,i),Ct(i),u&512&&(je||a===null||dn(a,a.return)),a!==null&&u&4&&zu(i,i.memoizedProps,a.memoizedProps);break;case 5:if(At(o,i),Ct(i),u&512&&(je||a===null||dn(a,a.return)),i.flags&32){m=i.stateNode;try{Xi(m,"")}catch(Z){De(i,i.return,Z)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,zu(i,m,a!==null?a.memoizedProps:m)),u&1024&&(Ju=!0);break;case 6:if(At(o,i),Ct(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Z){De(i,i.return,Z)}}break;case 3:if(ya=null,m=en,en=ma(o.containerInfo),At(o,i),en=m,Ct(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ro(o.containerInfo)}catch(Z){De(i,i.return,Z)}Ju&&(Ju=!1,Ep(i));break;case 4:u=en,en=ma(i.stateNode.containerInfo),At(o,i),Ct(i),en=u;break;case 12:At(o,i),Ct(i);break;case 31:At(o,i),Ct(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 13:At(o,i),Ct(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ia=Mt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 22:m=i.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,O=Cn,z=je;if(Cn=O||m,je=z||b,At(o,i),je=z,Cn=O,Ct(i),u&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(a===null||b||Cn||je||xi(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){b=a=o;try{if(y=b.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=b.stateNode;var $=b.memoizedProps.style,P=$!=null&&$.hasOwnProperty("display")?$.display:null;w.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(Z){De(b,b.return,Z)}}}else if(o.tag===6){if(a===null){b=o;try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(Z){De(b,b.return,Z)}}}else if(o.tag===18){if(a===null){b=o;try{var B=b.stateNode;m?dm(B,!0):dm(b.stateNode,!1)}catch(Z){De(b,b.return,Z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,ta(i,a))));break;case 19:At(o,i),Ct(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 30:break;case 21:break;default:At(o,i),Ct(i)}}function Ct(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(hp(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var m=a.stateNode,y=Fu(i);ea(i,y,m);break;case 5:var T=a.stateNode;a.flags&32&&(Xi(T,""),a.flags&=-33);var w=Fu(i);ea(i,w,T);break;case 3:case 4:var b=a.stateNode.containerInfo,O=Fu(i);$u(i,O,b);break;default:throw Error(s(161))}}catch(z){De(i,i.return,z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Ep(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Ep(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Rn(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)gp(i,o.alternate,o),o=o.sibling}function xi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Xn(4,o,o.return),xi(o);break;case 1:dn(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&dp(o,o.return,a),xi(o);break;case 27:Ps(o.stateNode);case 26:case 5:dn(o,o.return),xi(o);break;case 22:o.memoizedState===null&&xi(o);break;case 30:xi(o);break;default:xi(o)}i=i.sibling}}function Nn(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=i,y=o,T=y.flags;switch(y.tag){case 0:case 11:case 15:Nn(m,y,a),bs(4,y);break;case 1:if(Nn(m,y,a),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(O){De(u,u.return,O)}if(u=y,m=u.updateQueue,m!==null){var w=u.stateNode;try{var b=m.shared.hiddenCallbacks;if(b!==null)for(m.shared.hiddenCallbacks=null,m=0;m<b.length;m++)jf(b[m],w)}catch(O){De(u,u.return,O)}}a&&T&64&&cp(y),Rs(y,y.return);break;case 27:pp(y);case 26:case 5:Nn(m,y,a),a&&u===null&&T&4&&fp(y),Rs(y,y.return);break;case 12:Nn(m,y,a);break;case 31:Nn(m,y,a),a&&T&4&&_p(m,y);break;case 13:Nn(m,y,a),a&&T&4&&Sp(m,y);break;case 22:y.memoizedState===null&&Nn(m,y,a),Rs(y,y.return);break;case 30:break;default:Nn(m,y,a)}o=o.sibling}}function Yu(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&hs(a))}function Ku(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&hs(i))}function tn(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wp(i,o,a,u),o=o.sibling}function wp(i,o,a,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:tn(i,o,a,u),m&2048&&bs(9,o);break;case 1:tn(i,o,a,u);break;case 3:tn(i,o,a,u),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&hs(i)));break;case 12:if(m&2048){tn(i,o,a,u),i=o.stateNode;try{var y=o.memoizedProps,T=y.id,w=y.onPostCommit;typeof w=="function"&&w(T,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(b){De(o,o.return,b)}}else tn(i,o,a,u);break;case 31:tn(i,o,a,u);break;case 13:tn(i,o,a,u);break;case 23:break;case 22:y=o.stateNode,T=o.alternate,o.memoizedState!==null?y._visibility&2?tn(i,o,a,u):Ns(i,o):y._visibility&2?tn(i,o,a,u):(y._visibility|=2,go(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Yu(T,o);break;case 24:tn(i,o,a,u),m&2048&&Ku(o.alternate,o);break;default:tn(i,o,a,u)}}function go(i,o,a,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=i,T=o,w=a,b=u,O=T.flags;switch(T.tag){case 0:case 11:case 15:go(y,T,w,b,m),bs(8,T);break;case 23:break;case 22:var z=T.stateNode;T.memoizedState!==null?z._visibility&2?go(y,T,w,b,m):Ns(y,T):(z._visibility|=2,go(y,T,w,b,m)),m&&O&2048&&Yu(T.alternate,T);break;case 24:go(y,T,w,b,m),m&&O&2048&&Ku(T.alternate,T);break;default:go(y,T,w,b,m)}o=o.sibling}}function Ns(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,m=u.flags;switch(u.tag){case 22:Ns(a,u),m&2048&&Yu(u.alternate,u);break;case 24:Ns(a,u),m&2048&&Ku(u.alternate,u);break;default:Ns(a,u)}o=o.sibling}}var Ms=8192;function yo(i,o,a){if(i.subtreeFlags&Ms)for(i=i.child;i!==null;)Ap(i,o,a),i=i.sibling}function Ap(i,o,a){switch(i.tag){case 26:yo(i,o,a),i.flags&Ms&&i.memoizedState!==null&&qS(a,en,i.memoizedState,i.memoizedProps);break;case 5:yo(i,o,a);break;case 3:case 4:var u=en;en=ma(i.stateNode.containerInfo),yo(i,o,a),en=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ms,Ms=16777216,yo(i,o,a),Ms=u):yo(i,o,a));break;default:yo(i,o,a)}}function Cp(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Is(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];ot=u,Rp(u,i)}Cp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bp(i),i=i.sibling}function bp(i){switch(i.tag){case 0:case 11:case 15:Is(i),i.flags&2048&&Xn(9,i,i.return);break;case 3:Is(i);break;case 12:Is(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,na(i)):Is(i);break;default:Is(i)}}function na(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];ot=u,Rp(u,i)}Cp(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Xn(8,o,o.return),na(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,na(o));break;default:na(o)}i=i.sibling}}function Rp(i,o){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:Xn(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ot=u;else e:for(a=i;ot!==null;){u=ot;var m=u.sibling,y=u.return;if(yp(u),u===a){ot=null;break e}if(m!==null){m.return=y,ot=m;break e}ot=y}}}var j_={getCacheForType:function(i){var o=lt(We),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return lt(We).controller.signal}},eS=typeof WeakMap=="function"?WeakMap:Map,be=0,Le=null,ge=null,ve=0,xe=0,Pt=null,Wn=!1,vo=!1,Xu=!1,Mn=0,ze=0,Qn=0,Di=0,Wu=0,Lt=0,_o=0,xs=null,bt=null,Qu=!1,ia=0,Np=0,oa=1/0,sa=null,Zn=null,tt=0,jn=null,So=null,In=0,Zu=0,ju=null,Mp=null,Ds=0,ec=null;function qt(){return(be&2)!==0&&ve!==0?ve&-ve:V.T!==null?rc():Fd()}function Ip(){if(Lt===0)if((ve&536870912)===0||Te){var i=hr;hr<<=1,(hr&3932160)===0&&(hr=262144),Lt=i}else Lt=536870912;return i=kt.current,i!==null&&(i.flags|=32),Lt}function Rt(i,o,a){(i===Le&&(xe===2||xe===9)||i.cancelPendingCommit!==null)&&(To(i,0),ei(i,ve,Lt,!1)),jo(i,a),((be&2)===0||i!==Le)&&(i===Le&&((be&2)===0&&(Di|=a),ze===4&&ei(i,ve,Lt,!1)),fn(i))}function xp(i,o,a){if((be&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Zo(i,o),m=u?iS(i,o):nc(i,o,!0),y=u;do{if(m===0){vo&&!u&&ei(i,o,0,!1);break}else{if(a=i.current.alternate,y&&!tS(a)){m=nc(i,o,!1),y=!1;continue}if(m===2){if(y=o,i.errorRecoveryDisabledLanes&y)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var w=i;m=xs;var b=w.current.memoizedState.isDehydrated;if(b&&(To(w,T).flags|=256),T=nc(w,T,!1),T!==2){if(Xu&&!b){w.errorRecoveryDisabledLanes|=y,Di|=y,m=4;break e}y=bt,bt=m,y!==null&&(bt===null?bt=y:bt.push.apply(bt,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){To(i,0),ei(i,o,0,!0);break}e:{switch(u=i,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ei(u,o,Lt,!Wn);break e;case 2:bt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=ia+300-Mt(),10<m)){if(ei(u,o,Lt,!Wn),mr(u,0,!0)!==0)break e;In=o,u.timeoutHandle=lm(Dp.bind(null,u,a,bt,sa,Qu,o,Lt,Di,_o,Wn,y,"Throttled",-0,0),m);break e}Dp(u,a,bt,sa,Qu,o,Lt,Di,_o,Wn,y,null,-0,0)}}break}while(!0);fn(i)}function Dp(i,o,a,u,m,y,T,w,b,O,z,$,P,B){if(i.timeoutHandle=-1,$=o.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},Ap(o,y,$);var Z=(y&62914560)===y?ia-Mt():(y&4194048)===y?Np-Mt():0;if(Z=BS($,Z),Z!==null){In=y,i.cancelPendingCommit=Z(Gp.bind(null,i,o,y,a,u,m,T,w,b,z,$,null,P,B)),ei(i,y,T,!O);return}}Gp(i,o,y,a,u,m,T,w,b)}function tS(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var m=a[u],y=m.getSnapshot;m=m.value;try{if(!Dt(y(),m))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ei(i,o,a,u){o&=~Wu,o&=~Di,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var m=o;0<m;){var y=31-xt(m),T=1<<y;u[y]=-1,m&=~T}a!==0&&Hd(i,a,o)}function ra(){return(be&6)===0?(Us(0),!1):!0}function tc(){if(ge!==null){if(xe===0)var i=ge.return;else i=ge,_n=wi=null,yu(i),co=null,ms=0,i=ge;for(;i!==null;)up(i.alternate,i),i=i.return;ge=null}}function To(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,TS(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),In=0,tc(),Le=i,ge=a=yn(i.current,null),ve=o,xe=0,Pt=null,Wn=!1,vo=Zo(i,o),Xu=!1,_o=Lt=Wu=Di=Qn=ze=0,bt=xs=null,Qu=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var m=31-xt(u),y=1<<m;o|=i[m],u&=~y}return Mn=o,Rr(),a}function Up(i,o){fe=null,V.H=ws,o===uo||o===Or?(o=Xf(),xe=3):o===su?(o=Xf(),xe=4):xe=o===Uu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Pt=o,ge===null&&(ze=1,Xr(i,Ft(o,i.current)))}function kp(){var i=kt.current;return i===null?!0:(ve&4194048)===ve?Kt===null:(ve&62914560)===ve||(ve&536870912)!==0?i===Kt:!1}function Op(){var i=V.H;return V.H=ws,i===null?ws:i}function Pp(){var i=V.A;return V.A=j_,i}function aa(){ze=4,Wn||(ve&4194048)!==ve&&kt.current!==null||(vo=!0),(Qn&134217727)===0&&(Di&134217727)===0||Le===null||ei(Le,ve,Lt,!1)}function nc(i,o,a){var u=be;be|=2;var m=Op(),y=Pp();(Le!==i||ve!==o)&&(sa=null,To(i,o)),o=!1;var T=ze;e:do try{if(xe!==0&&ge!==null){var w=ge,b=Pt;switch(xe){case 8:tc(),T=6;break e;case 3:case 2:case 9:case 6:kt.current===null&&(o=!0);var O=xe;if(xe=0,Pt=null,Eo(i,w,b,O),a&&vo){T=0;break e}break;default:O=xe,xe=0,Pt=null,Eo(i,w,b,O)}}nS(),T=ze;break}catch(z){Up(i,z)}while(!0);return o&&i.shellSuspendCounter++,_n=wi=null,be=u,V.H=m,V.A=y,ge===null&&(Le=null,ve=0,Rr()),T}function nS(){for(;ge!==null;)Lp(ge)}function iS(i,o){var a=be;be|=2;var u=Op(),m=Pp();Le!==i||ve!==o?(sa=null,oa=Mt()+500,To(i,o)):vo=Zo(i,o);e:do try{if(xe!==0&&ge!==null){o=ge;var y=Pt;t:switch(xe){case 1:xe=0,Pt=null,Eo(i,o,y,1);break;case 2:case 9:if(Yf(y)){xe=0,Pt=null,qp(o);break}o=function(){xe!==2&&xe!==9||Le!==i||(xe=7),fn(i)},y.then(o,o);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:Yf(y)?(xe=0,Pt=null,qp(o)):(xe=0,Pt=null,Eo(i,o,y,7));break;case 5:var T=null;switch(ge.tag){case 26:T=ge.memoizedState;case 5:case 27:var w=ge;if(T?wm(T):w.stateNode.complete){xe=0,Pt=null;var b=w.sibling;if(b!==null)ge=b;else{var O=w.return;O!==null?(ge=O,la(O)):ge=null}break t}}xe=0,Pt=null,Eo(i,o,y,5);break;case 6:xe=0,Pt=null,Eo(i,o,y,6);break;case 8:tc(),ze=6;break e;default:throw Error(s(462))}}oS();break}catch(z){Up(i,z)}while(!0);return _n=wi=null,V.H=u,V.A=m,be=a,ge!==null?0:(Le=null,ve=0,Rr(),ze)}function oS(){for(;ge!==null&&!R0();)Lp(ge)}function Lp(i){var o=ap(i.alternate,i,Mn);i.memoizedProps=i.pendingProps,o===null?la(i):ge=o}function qp(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=tp(a,o,o.pendingProps,o.type,void 0,ve);break;case 11:o=tp(a,o,o.pendingProps,o.type.render,o.ref,ve);break;case 5:yu(o);default:up(a,o),o=ge=Pf(o,Mn),o=ap(a,o,Mn)}i.memoizedProps=i.pendingProps,o===null?la(i):ge=o}function Eo(i,o,a,u){_n=wi=null,yu(o),co=null,ms=0;var m=o.return;try{if(J_(i,m,o,a,ve)){ze=1,Xr(i,Ft(a,i.current)),ge=null;return}}catch(y){if(m!==null)throw ge=m,y;ze=1,Xr(i,Ft(a,i.current)),ge=null;return}o.flags&32768?(Te||u===1?i=!0:vo||(ve&536870912)!==0?i=!1:(Wn=i=!0,(u===2||u===9||u===3||u===6)&&(u=kt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bp(o,i)):la(o)}function la(i){var o=i;do{if((o.flags&32768)!==0){Bp(o,Wn);return}i=o.return;var a=X_(o.alternate,o,Mn);if(a!==null){ge=a;return}if(o=o.sibling,o!==null){ge=o;return}ge=o=i}while(o!==null);ze===0&&(ze=5)}function Bp(i,o){do{var a=W_(i.alternate,i);if(a!==null){a.flags&=32767,ge=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){ge=i;return}ge=i=a}while(i!==null);ze=6,ge=null}function Gp(i,o,a,u,m,y,T,w,b){i.cancelPendingCommit=null;do ua();while(tt!==0);if((be&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Fl,L0(i,a,y,T,w,b),i===Le&&(ge=Le=null,ve=0),So=o,jn=i,In=a,Zu=y,ju=m,Mp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lS(dr,function(){return $p(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,m=X.p,X.p=2,T=be,be|=4;try{Q_(i,o,a)}finally{be=T,X.p=m,V.T=u}}tt=1,Hp(),Vp(),zp()}}function Hp(){if(tt===1){tt=0;var i=jn,o=So,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var u=X.p;X.p=2;var m=be;be|=4;try{Tp(o,i);var y=pc,T=Rf(i.containerInfo),w=y.focusedElem,b=y.selectionRange;if(T!==w&&w&&w.ownerDocument&&bf(w.ownerDocument.documentElement,w)){if(b!==null&&Bl(w)){var O=b.start,z=b.end;if(z===void 0&&(z=O),"selectionStart"in w)w.selectionStart=O,w.selectionEnd=Math.min(z,w.value.length);else{var $=w.ownerDocument||document,P=$&&$.defaultView||window;if(P.getSelection){var B=P.getSelection(),Z=w.textContent.length,re=Math.min(b.start,Z),Pe=b.end===void 0?re:Math.min(b.end,Z);!B.extend&&re>Pe&&(T=Pe,Pe=re,re=T);var x=Cf(w,re),N=Cf(w,Pe);if(x&&N&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var k=$.createRange();k.setStart(x.node,x.offset),B.removeAllRanges(),re>Pe?(B.addRange(k),B.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),B.addRange(k))}}}}for($=[],B=w;B=B.parentNode;)B.nodeType===1&&$.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<$.length;w++){var F=$[w];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Ta=!!hc,pc=hc=null}finally{be=m,X.p=u,V.T=a}}i.current=o,tt=2}}function Vp(){if(tt===2){tt=0;var i=jn,o=So,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var u=X.p;X.p=2;var m=be;be|=4;try{gp(i,o.alternate,o)}finally{be=m,X.p=u,V.T=a}}tt=3}}function zp(){if(tt===4||tt===3){tt=0,N0();var i=jn,o=So,a=In,u=Mp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?tt=5:(tt=0,So=jn=null,Fp(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Zn=null),Sl(a),o=o.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Qo,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=V.T,m=X.p,X.p=2,V.T=null;try{for(var y=i.onRecoverableError,T=0;T<u.length;T++){var w=u[T];y(w.value,{componentStack:w.stack})}}finally{V.T=o,X.p=m}}(In&3)!==0&&ua(),fn(i),m=i.pendingLanes,(a&261930)!==0&&(m&42)!==0?i===ec?Ds++:(Ds=0,ec=i):Ds=0,Us(0)}}function Fp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,hs(o)))}function ua(){return Hp(),Vp(),zp(),$p()}function $p(){if(tt!==5)return!1;var i=jn,o=Zu;Zu=0;var a=Sl(In),u=V.T,m=X.p;try{X.p=32>a?32:a,V.T=null,a=ju,ju=null;var y=jn,T=In;if(tt=0,So=jn=null,In=0,(be&6)!==0)throw Error(s(331));var w=be;if(be|=4,bp(y.current),wp(y,y.current,T,a),be=w,Us(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Qo,y)}catch{}return!0}finally{X.p=m,V.T=u,Fp(i,o)}}function Jp(i,o,a){o=Ft(a,o),o=Du(i.stateNode,o,2),i=Jn(i,o,2),i!==null&&(jo(i,2),fn(i))}function De(i,o,a){if(i.tag===3)Jp(i,i,a);else for(;o!==null;){if(o.tag===3){Jp(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zn===null||!Zn.has(u))){i=Ft(a,i),a=Yh(2),u=Jn(o,a,2),u!==null&&(Kh(a,u,o,i),jo(u,2),fn(u));break}}o=o.return}}function ic(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new eS;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(a)||(Xu=!0,m.add(a),i=sS.bind(null,i,o,a),o.then(i,i))}function sS(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,Le===i&&(ve&a)===a&&(ze===4||ze===3&&(ve&62914560)===ve&&300>Mt()-ia?(be&2)===0&&To(i,0):Wu|=a,_o===ve&&(_o=0)),fn(i)}function Yp(i,o){o===0&&(o=Gd()),i=Si(i,o),i!==null&&(jo(i,o),fn(i))}function rS(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Yp(i,a)}function aS(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(a=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Yp(i,a)}function lS(i,o){return gl(i,o)}var ca=null,wo=null,oc=!1,da=!1,sc=!1,ti=0;function fn(i){i!==wo&&i.next===null&&(wo===null?ca=wo=i:wo=wo.next=i),da=!0,oc||(oc=!0,cS())}function Us(i,o){if(!sc&&da){sc=!0;do for(var a=!1,u=ca;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,w=u.pingedLanes;y=(1<<31-xt(42|i)+1)-1,y&=m&~(T&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Qp(u,y))}else y=ve,y=mr(u,u===Le?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Zo(u,y)||(a=!0,Qp(u,y));u=u.next}while(a);sc=!1}}function uS(){Kp()}function Kp(){da=oc=!1;var i=0;ti!==0&&SS()&&(i=ti);for(var o=Mt(),a=null,u=ca;u!==null;){var m=u.next,y=Xp(u,o);y===0?(u.next=null,a===null?ca=m:a.next=m,m===null&&(wo=a)):(a=u,(i!==0||(y&3)!==0)&&(da=!0)),u=m}tt!==0&&tt!==5||Us(i),ti!==0&&(ti=0)}function Xp(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var T=31-xt(y),w=1<<T,b=m[T];b===-1?((w&a)===0||(w&u)!==0)&&(m[T]=P0(w,o)):b<=o&&(i.expiredLanes|=w),y&=~w}if(o=Le,a=ve,a=mr(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(xe===2||xe===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&yl(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Zo(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&yl(u),Sl(a)){case 2:case 8:a=qd;break;case 32:a=dr;break;case 268435456:a=Bd;break;default:a=dr}return u=Wp.bind(null,i),a=gl(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&yl(u),i.callbackPriority=2,i.callbackNode=null,2}function Wp(i,o){if(tt!==0&&tt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ua()&&i.callbackNode!==a)return null;var u=ve;return u=mr(i,i===Le?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(xp(i,u,o),Xp(i,Mt()),i.callbackNode!=null&&i.callbackNode===a?Wp.bind(null,i):null)}function Qp(i,o){if(ua())return null;xp(i,o,!0)}function cS(){ES(function(){(be&6)!==0?gl(Ld,uS):Kp()})}function rc(){if(ti===0){var i=ao;i===0&&(i=fr,fr<<=1,(fr&261888)===0&&(fr=256)),ti=i}return ti}function Zp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_r(""+i)}function jp(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function dS(i,o,a,u,m){if(o==="submit"&&a&&a.stateNode===m){var y=Zp((m[Tt]||null).action),T=u.submitter;T&&(o=(o=T[Tt]||null)?Zp(o.formAction):T.getAttribute("formAction"),o!==null&&(y=o,T=null));var w=new wr("action","action",null,u,m);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ti!==0){var b=T?jp(m,T):new FormData(m);bu(a,{pending:!0,data:b,method:m.method,action:y},null,b)}}else typeof y=="function"&&(w.preventDefault(),b=T?jp(m,T):new FormData(m),bu(a,{pending:!0,data:b,method:m.method,action:y},y,b))},currentTarget:m}]})}}for(var ac=0;ac<zl.length;ac++){var lc=zl[ac],fS=lc.toLowerCase(),hS=lc[0].toUpperCase()+lc.slice(1);jt(fS,"on"+hS)}jt(If,"onAnimationEnd"),jt(xf,"onAnimationIteration"),jt(Df,"onAnimationStart"),jt("dblclick","onDoubleClick"),jt("focusin","onFocus"),jt("focusout","onBlur"),jt(M_,"onTransitionRun"),jt(I_,"onTransitionStart"),jt(x_,"onTransitionCancel"),jt(Uf,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ks));function em(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],m=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var T=u.length-1;0<=T;T--){var w=u[T],b=w.instance,O=w.currentTarget;if(w=w.listener,b!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=O;try{y(m)}catch(z){br(z)}m.currentTarget=null,y=b}else for(T=0;T<u.length;T++){if(w=u[T],b=w.instance,O=w.currentTarget,w=w.listener,b!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=O;try{y(m)}catch(z){br(z)}m.currentTarget=null,y=b}}}}function ye(i,o){var a=o[Tl];a===void 0&&(a=o[Tl]=new Set);var u=i+"__bubble";a.has(u)||(tm(o,i,2,!1),a.add(u))}function uc(i,o,a){var u=0;o&&(u|=4),tm(a,i,u,o)}var fa="_reactListening"+Math.random().toString(36).slice(2);function cc(i){if(!i[fa]){i[fa]=!0,Yd.forEach(function(a){a!=="selectionchange"&&(pS.has(a)||uc(a,!1,i),uc(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[fa]||(o[fa]=!0,uc("selectionchange",!1,o))}}function tm(i,o,a,u){switch(Im(o)){case 2:var m=VS;break;case 8:m=zS;break;default:m=Cc}a=m.bind(null,o,a,i),m=void 0,!Il||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(o,a,{capture:!0,passive:m}):i.addEventListener(o,a,!0):m!==void 0?i.addEventListener(o,a,{passive:m}):i.addEventListener(o,a,!1)}function dc(i,o,a,u,m){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=u.return;T!==null;){var b=T.tag;if((b===3||b===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=Fi(w),T===null)return;if(b=T.tag,b===5||b===6||b===26||b===27){u=y=T;continue e}w=w.parentNode}}u=u.return}rf(function(){var O=y,z=Nl(a),$=[];e:{var P=kf.get(i);if(P!==void 0){var B=wr,Z=i;switch(i){case"keypress":if(Tr(a)===0)break e;case"keydown":case"keyup":B=a_;break;case"focusin":Z="focus",B=kl;break;case"focusout":Z="blur",B=kl;break;case"beforeblur":case"afterblur":B=kl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=X0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=c_;break;case If:case xf:case Df:B=Z0;break;case Uf:B=f_;break;case"scroll":case"scrollend":B=Y0;break;case"wheel":B=p_;break;case"copy":case"cut":case"paste":B=e_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=df;break;case"toggle":case"beforetoggle":B=g_}var re=(o&4)!==0,Pe=!re&&(i==="scroll"||i==="scrollend"),x=re?P!==null?P+"Capture":null:P;re=[];for(var N=O,k;N!==null;){var F=N;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||x===null||(F=ns(N,x),F!=null&&re.push(Os(N,F,k))),Pe)break;N=N.return}0<re.length&&(P=new B(P,Z,null,a,z),$.push({event:P,listeners:re}))}}if((o&7)===0){e:{if(P=i==="mouseover"||i==="pointerover",B=i==="mouseout"||i==="pointerout",P&&a!==Rl&&(Z=a.relatedTarget||a.fromElement)&&(Fi(Z)||Z[zi]))break e;if((B||P)&&(P=z.window===z?z:(P=z.ownerDocument)?P.defaultView||P.parentWindow:window,B?(Z=a.relatedTarget||a.toElement,B=O,Z=Z?Fi(Z):null,Z!==null&&(Pe=l(Z),re=Z.tag,Z!==Pe||re!==5&&re!==27&&re!==6)&&(Z=null)):(B=null,Z=O),B!==Z)){if(re=uf,F="onMouseLeave",x="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(re=df,F="onPointerLeave",x="onPointerEnter",N="pointer"),Pe=B==null?P:ts(B),k=Z==null?P:ts(Z),P=new re(F,N+"leave",B,a,z),P.target=Pe,P.relatedTarget=k,F=null,Fi(z)===O&&(re=new re(x,N+"enter",Z,a,z),re.target=k,re.relatedTarget=Pe,F=re),Pe=F,B&&Z)t:{for(re=mS,x=B,N=Z,k=0,F=x;F;F=re(F))k++;F=0;for(var se=N;se;se=re(se))F++;for(;0<k-F;)x=re(x),k--;for(;0<F-k;)N=re(N),F--;for(;k--;){if(x===N||N!==null&&x===N.alternate){re=x;break t}x=re(x),N=re(N)}re=null}else re=null;B!==null&&nm($,P,B,re,!1),Z!==null&&Pe!==null&&nm($,Pe,Z,re,!0)}}e:{if(P=O?ts(O):window,B=P.nodeName&&P.nodeName.toLowerCase(),B==="select"||B==="input"&&P.type==="file")var we=_f;else if(yf(P))if(Sf)we=b_;else{we=A_;var ne=w_}else B=P.nodeName,!B||B.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?O&&bl(O.elementType)&&(we=_f):we=C_;if(we&&(we=we(i,O))){vf($,we,a,z);break e}ne&&ne(i,P,O),i==="focusout"&&O&&P.type==="number"&&O.memoizedProps.value!=null&&Cl(P,"number",P.value)}switch(ne=O?ts(O):window,i){case"focusin":(yf(ne)||ne.contentEditable==="true")&&(ji=ne,Gl=O,cs=null);break;case"focusout":cs=Gl=ji=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,Nf($,a,z);break;case"selectionchange":if(N_)break;case"keydown":case"keyup":Nf($,a,z)}var he;if(Pl)e:{switch(i){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Zi?mf(i,a)&&(_e="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(ff&&a.locale!=="ko"&&(Zi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Zi&&(he=af()):(Bn=z,xl="value"in Bn?Bn.value:Bn.textContent,Zi=!0)),ne=ha(O,_e),0<ne.length&&(_e=new cf(_e,i,null,a,z),$.push({event:_e,listeners:ne}),he?_e.data=he:(he=gf(a),he!==null&&(_e.data=he)))),(he=v_?__(i,a):S_(i,a))&&(_e=ha(O,"onBeforeInput"),0<_e.length&&(ne=new cf("onBeforeInput","beforeinput",null,a,z),$.push({event:ne,listeners:_e}),ne.data=he)),dS($,i,O,a,z)}em($,o)})}function Os(i,o,a){return{instance:i,listener:o,currentTarget:a}}function ha(i,o){for(var a=o+"Capture",u=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=ns(i,a),m!=null&&u.unshift(Os(i,m,y)),m=ns(i,o),m!=null&&u.push(Os(i,m,y))),i.tag===3)return u;i=i.return}return[]}function mS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nm(i,o,a,u,m){for(var y=o._reactName,T=[];a!==null&&a!==u;){var w=a,b=w.alternate,O=w.stateNode;if(w=w.tag,b!==null&&b===u)break;w!==5&&w!==26&&w!==27||O===null||(b=O,m?(O=ns(a,y),O!=null&&T.unshift(Os(a,O,b))):m||(O=ns(a,y),O!=null&&T.push(Os(a,O,b)))),a=a.return}T.length!==0&&i.push({event:o,listeners:T})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function im(i){return(typeof i=="string"?i:""+i).replace(gS,`
`).replace(yS,"")}function om(i,o){return o=im(o),im(i)===o}function Oe(i,o,a,u,m,y){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Xi(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Xi(i,""+u);break;case"className":yr(i,"class",u);break;case"tabIndex":yr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(i,a,u);break;case"style":of(i,u,y);break;case"data":if(o!=="object"){yr(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_r(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(o!=="input"&&Oe(i,o,"name",m.name,m,null),Oe(i,o,"formEncType",m.formEncType,m,null),Oe(i,o,"formMethod",m.formMethod,m,null),Oe(i,o,"formTarget",m.formTarget,m,null)):(Oe(i,o,"encType",m.encType,m,null),Oe(i,o,"method",m.method,m,null),Oe(i,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_r(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=mn);break;case"onScroll":u!=null&&ye("scroll",i);break;case"onScrollEnd":u!=null&&ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=_r(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":ye("beforetoggle",i),ye("toggle",i),gr(i,"popover",u);break;case"xlinkActuate":pn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":pn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":pn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":pn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":pn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":pn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":pn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":pn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":pn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":gr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$0.get(a)||a,gr(i,a,u))}}function fc(i,o,a,u,m,y){switch(a){case"style":of(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Xi(i,u):(typeof u=="number"||typeof u=="bigint")&&Xi(i,""+u);break;case"onScroll":u!=null&&ye("scroll",i);break;case"onScrollEnd":u!=null&&ye("scrollend",i);break;case"onClick":u!=null&&(i.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),o=a.slice(2,m?a.length-7:void 0),y=i[Tt]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(o,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,m);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):gr(i,a,u)}}}function ct(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",i),ye("load",i);var u=!1,m=!1,y;for(y in a)if(a.hasOwnProperty(y)){var T=a[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Oe(i,o,y,T,a,null)}}m&&Oe(i,o,"srcSet",a.srcSet,a,null),u&&Oe(i,o,"src",a.src,a,null);return;case"input":ye("invalid",i);var w=y=T=m=null,b=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":m=z;break;case"type":T=z;break;case"checked":b=z;break;case"defaultChecked":O=z;break;case"value":y=z;break;case"defaultValue":w=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,o));break;default:Oe(i,o,u,z,a,null)}}jd(i,y,w,b,O,T,m,!1);return;case"select":ye("invalid",i),u=T=y=null;for(m in a)if(a.hasOwnProperty(m)&&(w=a[m],w!=null))switch(m){case"value":y=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:Oe(i,o,m,w,a,null)}o=y,a=T,i.multiple=!!u,o!=null?Ki(i,!!u,o,!1):a!=null&&Ki(i,!!u,a,!0);return;case"textarea":ye("invalid",i),y=m=u=null;for(T in a)if(a.hasOwnProperty(T)&&(w=a[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":m=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Oe(i,o,T,w,a,null)}tf(i,u,m,y);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(u=a[b],u!=null))switch(b){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Oe(i,o,b,u,a,null)}return;case"dialog":ye("beforetoggle",i),ye("toggle",i),ye("cancel",i),ye("close",i);break;case"iframe":case"object":ye("load",i);break;case"video":case"audio":for(u=0;u<ks.length;u++)ye(ks[u],i);break;case"image":ye("error",i),ye("load",i);break;case"details":ye("toggle",i);break;case"embed":case"source":case"link":ye("error",i),ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Oe(i,o,O,u,a,null)}return;default:if(bl(o)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&fc(i,o,z,u,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(u=a[w],u!=null&&Oe(i,o,w,u,a,null))}function vS(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,w=null,b=null,O=null,z=null;for(B in a){var $=a[B];if(a.hasOwnProperty(B)&&$!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=$;default:u.hasOwnProperty(B)||Oe(i,o,B,null,u,$)}}for(var P in u){var B=u[P];if($=a[P],u.hasOwnProperty(P)&&(B!=null||$!=null))switch(P){case"type":y=B;break;case"name":m=B;break;case"checked":O=B;break;case"defaultChecked":z=B;break;case"value":T=B;break;case"defaultValue":w=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,o));break;default:B!==$&&Oe(i,o,P,B,u,$)}}Al(i,T,w,b,O,z,y,m);return;case"select":B=T=w=P=null;for(y in a)if(b=a[y],a.hasOwnProperty(y)&&b!=null)switch(y){case"value":break;case"multiple":B=b;default:u.hasOwnProperty(y)||Oe(i,o,y,null,u,b)}for(m in u)if(y=u[m],b=a[m],u.hasOwnProperty(m)&&(y!=null||b!=null))switch(m){case"value":P=y;break;case"defaultValue":w=y;break;case"multiple":T=y;default:y!==b&&Oe(i,o,m,y,u,b)}o=w,a=T,u=B,P!=null?Ki(i,!!a,P,!1):!!u!=!!a&&(o!=null?Ki(i,!!a,o,!0):Ki(i,!!a,a?[]:"",!1));return;case"textarea":B=P=null;for(w in a)if(m=a[w],a.hasOwnProperty(w)&&m!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Oe(i,o,w,null,u,m)}for(T in u)if(m=u[T],y=a[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":P=m;break;case"defaultValue":B=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&Oe(i,o,T,m,u,y)}ef(i,P,B);return;case"option":for(var Z in a)if(P=a[Z],a.hasOwnProperty(Z)&&P!=null&&!u.hasOwnProperty(Z))switch(Z){case"selected":i.selected=!1;break;default:Oe(i,o,Z,null,u,P)}for(b in u)if(P=u[b],B=a[b],u.hasOwnProperty(b)&&P!==B&&(P!=null||B!=null))switch(b){case"selected":i.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Oe(i,o,b,P,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in a)P=a[re],a.hasOwnProperty(re)&&P!=null&&!u.hasOwnProperty(re)&&Oe(i,o,re,null,u,P);for(O in u)if(P=u[O],B=a[O],u.hasOwnProperty(O)&&P!==B&&(P!=null||B!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,o));break;default:Oe(i,o,O,P,u,B)}return;default:if(bl(o)){for(var Pe in a)P=a[Pe],a.hasOwnProperty(Pe)&&P!==void 0&&!u.hasOwnProperty(Pe)&&fc(i,o,Pe,void 0,u,P);for(z in u)P=u[z],B=a[z],!u.hasOwnProperty(z)||P===B||P===void 0&&B===void 0||fc(i,o,z,P,u,B);return}}for(var x in a)P=a[x],a.hasOwnProperty(x)&&P!=null&&!u.hasOwnProperty(x)&&Oe(i,o,x,null,u,P);for($ in u)P=u[$],B=a[$],!u.hasOwnProperty($)||P===B||P==null&&B==null||Oe(i,o,$,P,u,B)}function sm(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _S(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var m=a[u],y=m.transferSize,T=m.initiatorType,w=m.duration;if(y&&w&&sm(T)){for(T=0,w=m.responseEnd,u+=1;u<a.length;u++){var b=a[u],O=b.startTime;if(O>w)break;var z=b.transferSize,$=b.initiatorType;z&&sm($)&&(b=b.responseEnd,T+=z*(b<w?1:(w-O)/(b-O)))}if(--u,o+=8*(y+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hc=null,pc=null;function pa(i){return i.nodeType===9?i:i.ownerDocument}function rm(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function am(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function mc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gc=null;function SS(){var i=window.event;return i&&i.type==="popstate"?i===gc?!1:(gc=i,!0):(gc=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(i){return um.resolve(null).then(i).catch(wS)}:lm;function wS(i){setTimeout(function(){throw i})}function ni(i){return i==="head"}function cm(i,o){var a=o,u=0;do{var m=a.nextSibling;if(i.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(m),Ro(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Ps(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Ps(a);for(var y=a.firstChild;y;){var T=y.nextSibling,w=y.nodeName;y[es]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=T}}else a==="body"&&Ps(i.ownerDocument.body);a=m}while(a);Ro(o)}function dm(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function yc(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yc(a),El(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function AS(i,o,a,u){for(;i.nodeType===1;){var m=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[es])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Xt(i.nextSibling),i===null)break}return null}function CS(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Xt(i.nextSibling),i===null))return null;return i}function fm(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Xt(i.nextSibling),i===null))return null;return i}function vc(i){return i.data==="$?"||i.data==="$~"}function _c(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function bS(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Xt(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Sc=null;function hm(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Xt(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function pm(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function mm(i,o,a){switch(o=pa(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ps(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);El(i)}var Wt=new Map,gm=new Set;function ma(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xn=X.d;X.d={f:RS,r:NS,D:MS,C:IS,L:xS,m:DS,X:kS,S:US,M:OS};function RS(){var i=xn.f(),o=ra();return i||o}function NS(i){var o=$i(i);o!==null&&o.tag===5&&o.type==="form"?Uh(o):xn.r(i)}var Ao=typeof document>"u"?null:document;function ym(i,o,a){var u=Ao;if(u&&typeof o=="string"&&o){var m=Vt(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),gm.has(m)||(gm.add(m),i={rel:i,crossOrigin:a,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),ct(o,"link",i),it(o),u.head.appendChild(o)))}}function MS(i){xn.D(i),ym("dns-prefetch",i,null)}function IS(i,o){xn.C(i,o),ym("preconnect",i,o)}function xS(i,o,a){xn.L(i,o,a);var u=Ao;if(u&&i&&o){var m='link[rel="preload"][as="'+Vt(o)+'"]';o==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+Vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+Vt(a.imageSizes)+'"]')):m+='[href="'+Vt(i)+'"]';var y=m;switch(o){case"style":y=Co(i);break;case"script":y=bo(i)}Wt.has(y)||(i=_({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Wt.set(y,i),u.querySelector(m)!==null||o==="style"&&u.querySelector(Ls(y))||o==="script"&&u.querySelector(qs(y))||(o=u.createElement("link"),ct(o,"link",i),it(o),u.head.appendChild(o)))}}function DS(i,o){xn.m(i,o);var a=Ao;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Vt(u)+'"][href="'+Vt(i)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=bo(i)}if(!Wt.has(y)&&(i=_({rel:"modulepreload",href:i},o),Wt.set(y,i),a.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(qs(y)))return}u=a.createElement("link"),ct(u,"link",i),it(u),a.head.appendChild(u)}}}function US(i,o,a){xn.S(i,o,a);var u=Ao;if(u&&i){var m=Ji(u).hoistableStyles,y=Co(i);o=o||"default";var T=m.get(y);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(Ls(y)))w.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Wt.get(y))&&Tc(i,a);var b=T=u.createElement("link");it(b),ct(b,"link",i),b._p=new Promise(function(O,z){b.onload=O,b.onerror=z}),b.addEventListener("load",function(){w.loading|=1}),b.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ga(T,o,u)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(y,T)}}}function kS(i,o){xn.X(i,o);var a=Ao;if(a&&i){var u=Ji(a).hoistableScripts,m=bo(i),y=u.get(m);y||(y=a.querySelector(qs(m)),y||(i=_({src:i,async:!0},o),(o=Wt.get(m))&&Ec(i,o),y=a.createElement("script"),it(y),ct(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function OS(i,o){xn.M(i,o);var a=Ao;if(a&&i){var u=Ji(a).hoistableScripts,m=bo(i),y=u.get(m);y||(y=a.querySelector(qs(m)),y||(i=_({src:i,async:!0,type:"module"},o),(o=Wt.get(m))&&Ec(i,o),y=a.createElement("script"),it(y),ct(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function vm(i,o,a,u){var m=(m=me.current)?ma(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Co(a.href),a=Ji(m).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Co(a.href);var y=Ji(m).hoistableStyles,T=y.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,T),(y=m.querySelector(Ls(i)))&&!y._p&&(T.instance=y,T.state.loading=5),Wt.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wt.set(i,a),y||PS(m,i,a,T.state))),o&&u===null)throw Error(s(528,""));return T}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=bo(a),a=Ji(m).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Co(i){return'href="'+Vt(i)+'"'}function Ls(i){return'link[rel="stylesheet"]['+i+"]"}function _m(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function PS(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ct(o,"link",a),it(o),i.head.appendChild(o))}function bo(i){return'[src="'+Vt(i)+'"]'}function qs(i){return"script[async]"+i}function Sm(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+Vt(a.href)+'"]');if(u)return o.instance=u,it(u),u;var m=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),it(u),ct(u,"style",m),ga(u,a.precedence,i),o.instance=u;case"stylesheet":m=Co(a.href);var y=i.querySelector(Ls(m));if(y)return o.state.loading|=4,o.instance=y,it(y),y;u=_m(a),(m=Wt.get(m))&&Tc(u,m),y=(i.ownerDocument||i).createElement("link"),it(y);var T=y;return T._p=new Promise(function(w,b){T.onload=w,T.onerror=b}),ct(y,"link",u),o.state.loading|=4,ga(y,a.precedence,i),o.instance=y;case"script":return y=bo(a.src),(m=i.querySelector(qs(y)))?(o.instance=m,it(m),m):(u=a,(m=Wt.get(y))&&(u=_({},a),Ec(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),it(m),ct(m,"link",u),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,ga(u,a.precedence,i));return o.instance}function ga(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===o)y=w;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Tc(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Ec(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ya=null;function Tm(i,o,a){if(ya===null){var u=new Map,m=ya=new Map;m.set(a,u)}else m=ya,u=m.get(a),u||(u=new Map,m.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),m=0;m<a.length;m++){var y=a[m];if(!(y[es]||y[rt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(o)||"";T=i+T;var w=u.get(T);w?w.push(y):u.set(T,[y])}}return u}function Em(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function LS(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function wm(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function qS(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Co(u.href),y=o.querySelector(Ls(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=va.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=y,it(y);return}y=o.ownerDocument||o,u=_m(u),(m=Wt.get(m))&&Tc(u,m),y=y.createElement("link"),it(y);var T=y;T._p=new Promise(function(w,b){T.onload=w,T.onerror=b}),ct(y,"link",u),a.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=va.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var wc=0;function BS(i,o){return i.stylesheets&&i.count===0&&Sa(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Sa(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+o);0<i.imgBytes&&wc===0&&(wc=62500*_S());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Sa(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>wc?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function va(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sa(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var _a=null;function Sa(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,_a=new Map,o.forEach(GS,i),_a=null,va.call(i))}function GS(i,o){if(!(o.state.loading&4)){var a=_a.get(i);if(a)var u=a.get(null);else{a=new Map,_a.set(i,a);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),u=T)}u&&a.set(null,u)}m=o.instance,T=m.getAttribute("data-precedence"),y=a.get(T)||u,y===u&&a.set(null,m),a.set(T,m),this.count++,u=va.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var Bs={$$typeof:I,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function HS(i,o,a,u,m,y,T,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.hiddenUpdates=vl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Am(i,o,a,u,m,y,T,w,b,O,z,$){return i=new HS(i,o,a,T,b,O,z,$,w),o=1,y===!0&&(o|=24),y=Ut(3,null,null,o),i.current=y,y.stateNode=i,o=nu(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:o},ru(y),i}function Cm(i){return i?(i=no,i):no}function bm(i,o,a,u,m,y){m=Cm(m),u.context===null?u.context=m:u.pendingContext=m,u=$n(o),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=Jn(i,u,o),a!==null&&(Rt(a,i,o),ys(a,i,o))}function Rm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function Ac(i,o){Rm(i,o),(i=i.alternate)&&Rm(i,o)}function Nm(i){if(i.tag===13||i.tag===31){var o=Si(i,67108864);o!==null&&Rt(o,i,67108864),Ac(i,67108864)}}function Mm(i){if(i.tag===13||i.tag===31){var o=qt();o=_l(o);var a=Si(i,o);a!==null&&Rt(a,i,o),Ac(i,o)}}var Ta=!0;function VS(i,o,a,u){var m=V.T;V.T=null;var y=X.p;try{X.p=2,Cc(i,o,a,u)}finally{X.p=y,V.T=m}}function zS(i,o,a,u){var m=V.T;V.T=null;var y=X.p;try{X.p=8,Cc(i,o,a,u)}finally{X.p=y,V.T=m}}function Cc(i,o,a,u){if(Ta){var m=bc(u);if(m===null)dc(i,o,u,Ea,a),xm(i,u);else if($S(m,i,o,a,u))u.stopPropagation();else if(xm(i,u),o&4&&-1<FS.indexOf(i)){for(;m!==null;){var y=$i(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=mi(y.pendingLanes);if(T!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var b=1<<31-xt(T);w.entanglements[1]|=b,T&=~b}fn(y),(be&6)===0&&(oa=Mt()+500,Us(0))}}break;case 31:case 13:w=Si(y,2),w!==null&&Rt(w,y,2),ra(),Ac(y,2)}if(y=bc(u),y===null&&dc(i,o,u,Ea,a),y===m)break;m=y}m!==null&&u.stopPropagation()}else dc(i,o,u,null,a)}}function bc(i){return i=Nl(i),Rc(i)}var Ea=null;function Rc(i){if(Ea=null,i=Fi(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=h(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ea=i,null}function Im(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(M0()){case Ld:return 2;case qd:return 8;case dr:case I0:return 32;case Bd:return 268435456;default:return 32}default:return 32}}var Nc=!1,ii=null,oi=null,si=null,Gs=new Map,Hs=new Map,ri=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xm(i,o){switch(i){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Gs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(o.pointerId)}}function Vs(i,o,a,u,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},o!==null&&(o=$i(o),o!==null&&Nm(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function $S(i,o,a,u,m){switch(o){case"focusin":return ii=Vs(ii,i,o,a,u,m),!0;case"dragenter":return oi=Vs(oi,i,o,a,u,m),!0;case"mouseover":return si=Vs(si,i,o,a,u,m),!0;case"pointerover":var y=m.pointerId;return Gs.set(y,Vs(Gs.get(y)||null,i,o,a,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Hs.set(y,Vs(Hs.get(y)||null,i,o,a,u,m)),!0}return!1}function Dm(i){var o=Fi(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,$d(i.priority,function(){Mm(a)});return}}else if(o===31){if(o=h(a),o!==null){i.blockedOn=o,$d(i.priority,function(){Mm(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wa(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=bc(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Rl=u,a.target.dispatchEvent(u),Rl=null}else return o=$i(a),o!==null&&Nm(o),i.blockedOn=a,!1;o.shift()}return!0}function Um(i,o,a){wa(i)&&a.delete(o)}function JS(){Nc=!1,ii!==null&&wa(ii)&&(ii=null),oi!==null&&wa(oi)&&(oi=null),si!==null&&wa(si)&&(si=null),Gs.forEach(Um),Hs.forEach(Um)}function Aa(i,o){i.blockedOn===o&&(i.blockedOn=null,Nc||(Nc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JS)))}var Ca=null;function km(i){Ca!==i&&(Ca=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ca===i&&(Ca=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],m=i[o+2];if(typeof u!="function"){if(Rc(u||a)===null)continue;break}var y=$i(a);y!==null&&(i.splice(o,3),o-=3,bu(y,{pending:!0,data:m,method:a.method,action:u},u,m))}}))}function Ro(i){function o(b){return Aa(b,i)}ii!==null&&Aa(ii,i),oi!==null&&Aa(oi,i),si!==null&&Aa(si,i),Gs.forEach(o),Hs.forEach(o);for(var a=0;a<ri.length;a++){var u=ri[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ri.length&&(a=ri[0],a.blockedOn===null);)Dm(a),a.blockedOn===null&&ri.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var m=a[u],y=a[u+1],T=m[Tt]||null;if(typeof y=="function")T||km(a);else if(T){var w=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Tt]||null)w=T.formAction;else if(Rc(m)!==null)continue}else w=T.action;typeof w=="function"?a[u+1]=w:(a.splice(u,3),u-=3),km(a)}}}function Om(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function Mc(i){this._internalRoot=i}ba.prototype.render=Mc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=qt();bm(a,u,i,o,null,null)},ba.prototype.unmount=Mc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;bm(i.current,2,null,i,null,null),ra(),o[zi]=null}};function ba(i){this._internalRoot=i}ba.prototype.unstable_scheduleHydration=function(i){if(i){var o=Fd();i={blockedOn:null,target:i,priority:o};for(var a=0;a<ri.length&&o!==0&&o<ri[a].priority;a++);ri.splice(a,0,i),a===0&&Dm(i)}};var Pm=e.version;if(Pm!=="19.2.4")throw Error(s(527,Pm,"19.2.4"));X.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var YS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ra.isDisabled&&Ra.supportsFiber)try{Qo=Ra.inject(YS),It=Ra}catch{}}return Fs.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",m=zh,y=Fh,T=$h;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=Am(i,1,!1,null,null,a,u,null,m,y,T,Om),i[zi]=o.current,cc(i),new Mc(o)},Fs.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,m="",y=zh,T=Fh,w=$h,b=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(b=a.formState)),o=Am(i,1,!0,o,a??null,u,m,b,y,T,w,Om),o.context=Cm(null),a=o.current,u=qt(),u=_l(u),m=$n(u),m.callback=null,Jn(a,m,u),a=u,o.current.lanes=a,jo(o,a),fn(o),i[zi]=o.current,cc(i),new ba(o)},Fs.version="19.2.4",Fs}var Jm;function oT(){if(Jm)return Dc.exports;Jm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dc.exports=iT(),Dc.exports}var sT=oT();const rT=iv(sT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=t=>{const e=lT(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Ke.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...h},g)=>Ke.createElement("svg",{ref:g,...uT,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:ov("lucide",r),...!l&&!cT(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>Ke.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,e)=>{const n=Ke.forwardRef(({className:s,...r},l)=>Ke.createElement(dT,{ref:l,iconNode:e,className:ov(`lucide-${aT(Ym(t))}`,`lucide-${t}`,s),...r}));return n.displayName=Ym(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Wc=gt("calendar",fT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pT=gt("chevron-left",hT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gT=gt("chevron-right",mT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sv=gt("clock",yT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M10.94 5.274A7 7 0 0 1 15.71 10h1.79a4.5 4.5 0 0 1 4.222 6.057",key:"1uxyv8"}],["path",{d:"M18.796 18.81A4.5 4.5 0 0 1 17.5 19H9A7 7 0 0 1 5.79 5.78",key:"99tcn7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_T=gt("cloud-off",vT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],TT=gt("cloud",ST);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],wT=gt("flower",ET);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],CT=gt("loader-circle",AT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],RT=gt("move-right",bT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],MT=gt("refresh-cw",NT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xT=gt("save",IT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Km=gt("sparkles",DT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]],kT=gt("sparkle",UT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Ha=gt("sticky-note",OT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rv=gt("trash-2",PT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qT=gt("x",LT),BT=({className:t})=>G.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[G.jsx("path",{d:"M12 7v10"}),G.jsx("circle",{cx:"12",cy:"6",r:"1",fill:"currentColor"}),G.jsx("path",{d:"M12 12c-1.5-3-5-4-7-2s-2 5 1 6c2 1 5 0 6-4z"}),G.jsx("path",{d:"M12 15c-1 1-3 2-4 1s-1-3 1-4c1-1 3 0 3 3z"}),G.jsx("path",{d:"M12 12c1.5-3 5-4 7-2s2 5-1 6c-2 1-5 0-6-4z"}),G.jsx("path",{d:"M12 15c1 1 3 2 4 1s1-3-1-4c-1-1-3 0-3 3z"})]}),GT=({currentTime:t,isSyncing:e,isCloud:n})=>{const s=t.toLocaleTimeString("en-US",{timeZone:"America/Chicago",hour:"2-digit",minute:"2-digit",hour12:!0}),r=t.toLocaleDateString("en-US",{timeZone:"America/Chicago",weekday:"long",month:"long",day:"numeric"});return G.jsxs("header",{className:"px-10 py-8 flex items-center justify-between z-10",children:[G.jsxs("div",{className:"flex items-center gap-6",children:[G.jsx("div",{className:"bg-[#E8DCC4] p-4 rounded-[2rem] shadow-inner transition-transform hover:scale-110 duration-500",children:G.jsx(BT,{className:"w-6 h-6 text-[#7D6B5D]"})}),G.jsxs("div",{children:[G.jsxs("div",{className:"flex items-center gap-4",children:[G.jsx("h1",{className:"text-3xl font-bold tracking-tight text-[#5D4E40] font-heading leading-tight",children:"The Ritual"}),n?G.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-[#3A8A48] bg-[#D7F4DC] px-3 py-1.5 rounded-full uppercase tracking-widest border border-[#98E5A7]",children:[G.jsx(TT,{className:"w-3.5 h-3.5"}),"Synced"]}):G.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-[#5D4E40] bg-[#E8DCC4] px-3 py-1.5 rounded-full uppercase tracking-widest",children:[G.jsx(_T,{className:"w-3.5 h-3.5"}),"Personal"]})]}),G.jsxs("div",{className:"text-[11px] text-[#7D6B5D] font-bold uppercase tracking-[0.2em] mt-1.5 flex items-center gap-2",children:["Harmonizing your day",e&&G.jsx(MT,{className:"w-3.5 h-3.5 animate-spin text-[#7D6B5D]/50"})]})]})]}),G.jsxs("div",{className:"flex flex-col items-end",children:[G.jsx("div",{className:"text-5xl font-black text-[#5D4E40] tabular-nums tracking-tighter leading-none font-heading",children:s}),G.jsxs("div",{className:"text-[12px] font-bold text-[#7D6B5D] uppercase tracking-[0.2em] mt-3 flex items-center gap-3",children:[r,G.jsx("span",{className:"bg-[#E8DCC4] px-2 py-1 rounded-lg text-[10px] text-[#5D4E40] font-black",children:"CDT"})]})]})]})},HT=({onAddMemo:t,isLoading:e})=>{const[n,s]=Ke.useState(""),r=l=>{l.preventDefault(),n.trim()&&!e&&(t(n),s(""))};return G.jsxs("form",{onSubmit:r,className:"relative group",children:[G.jsx("textarea",{value:n,onChange:l=>s(l.target.value),disabled:e,placeholder:"A flower to water? A friend to call? Tell me your plans...",className:"w-full h-40 px-6 py-6 bg-white/50 border-2 border-[#E8DCC4] rounded-[2.5rem] focus:bg-white focus:ring-8 focus:ring-[#E8DCC4]/20 focus:border-[#7D6B5D] transition-all outline-none resize-none placeholder:text-[#7D6B5D]/60 text-base font-bold text-[#5D4E40] shadow-inner"}),G.jsx("button",{type:"submit",disabled:e||!n.trim(),className:`absolute bottom-6 right-6 p-4 rounded-[1.5rem] transition-all flex items-center gap-3 ${n.trim()&&!e?"bg-[#5D4E40] text-white hover:bg-[#7D6B5D] shadow-lg":"bg-[#FDF9F3] text-[#7D6B5D] cursor-not-allowed border border-[#E8DCC4]"}`,children:e?G.jsx(CT,{className:"w-6 h-6 animate-spin"}):G.jsxs(G.Fragment,{children:[G.jsx(kT,{className:"w-6 h-6"}),G.jsx("span",{className:"text-sm font-black uppercase tracking-widest hidden sm:inline",children:"Manifest"})]})}),G.jsxs("div",{className:"mt-4 px-2 text-[10px] font-black uppercase tracking-[0.25em] text-[#5D4E40] flex justify-between italic",children:[G.jsx("span",{children:"Speak to the universe"}),G.jsxs("span",{children:[n.length," characters"]})]})]})},av=6048e5,VT=864e5,lv=6e4,uv=36e5,Xm=Symbol.for("constructDateFrom");function hn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Xm in t?t[Xm](e):t instanceof Date?new t.constructor(e):new Date(e)}function Nt(t,e){return hn(e||t,t)}function cv(t,e,n){const s=Nt(t,n==null?void 0:n.in);return isNaN(e)?hn(t,NaN):(e&&s.setDate(s.getDate()+e),s)}let zT={};function tl(){return zT}function $o(t,e){var h,g,p,v;const n=tl(),s=(e==null?void 0:e.weekStartsOn)??((g=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,r=Nt(t,e==null?void 0:e.in),l=r.getDay(),c=(l<s?7:0)+l-s;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function Fa(t,e){return $o(t,{...e,weekStartsOn:1})}function dv(t,e){const n=Nt(t,e==null?void 0:e.in),s=n.getFullYear(),r=hn(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const l=Fa(r),c=hn(n,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const h=Fa(c);return n.getTime()>=l.getTime()?s+1:n.getTime()>=h.getTime()?s:s-1}function Wm(t){const e=Nt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function FT(t,...e){const n=hn.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function Qm(t,e){const n=Nt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function $T(t,e,n){const[s,r]=FT(n==null?void 0:n.in,t,e),l=Qm(s),c=Qm(r),h=+l-Wm(l),g=+c-Wm(c);return Math.round((h-g)/VT)}function JT(t,e){const n=dv(t,e),s=hn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Fa(s)}function YT(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function KT(t){return!(!YT(t)&&typeof t!="number"||isNaN(+Nt(t)))}function XT(t,e){const n=Nt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const WT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QT=(t,e,n)=>{let s;const r=WT[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Pc(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ZT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tE={date:Pc({formats:ZT,defaultWidth:"full"}),time:Pc({formats:jT,defaultWidth:"full"}),dateTime:Pc({formats:eE,defaultWidth:"full"})},nE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iE=(t,e,n,s)=>nE[t];function $s(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,h=n!=null&&n.width?String(n.width):c;r=t.formattingValues[h]||t.formattingValues[c]}else{const c=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[h]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(e):e;return r[l]}}const oE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cE=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dE={ordinalNumber:cE,era:$s({values:oE,defaultWidth:"wide"}),quarter:$s({values:sE,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$s({values:rE,defaultWidth:"wide"}),day:$s({values:aE,defaultWidth:"wide"}),dayPeriod:$s({values:lE,defaultWidth:"wide",formattingValues:uE,defaultFormattingWidth:"wide"})};function Js(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=e.match(r);if(!l)return null;const c=l[0],h=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(h)?hE(h,_=>_.test(c)):fE(h,_=>_.test(c));let p;p=t.valueCallback?t.valueCallback(g):g,p=n.valueCallback?n.valueCallback(p):p;const v=e.slice(c.length);return{value:p,rest:v}}}function fE(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function hE(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function pE(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],l=e.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(r.length);return{value:c,rest:h}}}const mE=/^(\d+)(th|st|nd|rd)?/i,gE=/\d+/i,yE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vE={any:[/^b/i,/^(a|c)/i]},_E={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SE={any:[/1/i,/2/i,/3/i,/4/i]},TE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},EE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RE={ordinalNumber:pE({matchPattern:mE,parsePattern:gE,valueCallback:t=>parseInt(t,10)}),era:Js({matchPatterns:yE,defaultMatchWidth:"wide",parsePatterns:vE,defaultParseWidth:"any"}),quarter:Js({matchPatterns:_E,defaultMatchWidth:"wide",parsePatterns:SE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Js({matchPatterns:TE,defaultMatchWidth:"wide",parsePatterns:EE,defaultParseWidth:"any"}),day:Js({matchPatterns:wE,defaultMatchWidth:"wide",parsePatterns:AE,defaultParseWidth:"any"}),dayPeriod:Js({matchPatterns:CE,defaultMatchWidth:"any",parsePatterns:bE,defaultParseWidth:"any"})},NE={code:"en-US",formatDistance:QT,formatLong:tE,formatRelative:iE,localize:dE,match:RE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ME(t,e){const n=Nt(t,e==null?void 0:e.in);return $T(n,XT(n))+1}function IE(t,e){const n=Nt(t,e==null?void 0:e.in),s=+Fa(n)-+JT(n);return Math.round(s/av)+1}function fv(t,e){var v,_,S,E;const n=Nt(t,e==null?void 0:e.in),s=n.getFullYear(),r=tl(),l=(e==null?void 0:e.firstWeekContainsDate)??((_=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(S=r.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??1,c=hn((e==null?void 0:e.in)||t,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const h=$o(c,e),g=hn((e==null?void 0:e.in)||t,0);g.setFullYear(s,0,l),g.setHours(0,0,0,0);const p=$o(g,e);return+n>=+h?s+1:+n>=+p?s:s-1}function xE(t,e){var h,g,p,v;const n=tl(),s=(e==null?void 0:e.firstWeekContainsDate)??((g=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,r=fv(t,e),l=hn((e==null?void 0:e.in)||t,0);return l.setFullYear(r,0,s),l.setHours(0,0,0,0),$o(l,e)}function DE(t,e){const n=Nt(t,e==null?void 0:e.in),s=+$o(n,e)-+xE(n,e);return Math.round(s/av)+1}function Ue(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const li={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return Ue(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ue(n+1,2)},d(t,e){return Ue(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ue(t.getHours()%12||12,e.length)},H(t,e){return Ue(t.getHours(),e.length)},m(t,e){return Ue(t.getMinutes(),e.length)},s(t,e){return Ue(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return Ue(r,e.length)}},No={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zm={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return li.y(t,e)},Y:function(t,e,n,s){const r=fv(t,s),l=r>0?r:1-r;if(e==="YY"){const c=l%100;return Ue(c,2)}return e==="Yo"?n.ordinalNumber(l,{unit:"year"}):Ue(l,e.length)},R:function(t,e){const n=dv(t);return Ue(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ue(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Ue(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Ue(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return li.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Ue(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=DE(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Ue(r,e.length)},I:function(t,e,n){const s=IE(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):Ue(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):li.d(t,e)},D:function(t,e,n){const s=ME(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Ue(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return Ue(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return Ue(l,e.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Ue(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=No.noon:s===0?r=No.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=No.evening:s>=12?r=No.afternoon:s>=4?r=No.morning:r=No.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return li.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):li.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Ue(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):Ue(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):li.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):li.s(t,e)},S:function(t,e){return li.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return eg(s);case"XXXX":case"XX":return Oi(s);case"XXXXX":case"XXX":default:return Oi(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return eg(s);case"xxxx":case"xx":return Oi(s);case"xxxxx":case"xxx":default:return Oi(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jm(s,":");case"OOOO":default:return"GMT"+Oi(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jm(s,":");case"zzzz":default:return"GMT"+Oi(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return Ue(s,e.length)},T:function(t,e,n){return Ue(+t,e.length)}};function jm(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),l=s%60;return l===0?n+String(r):n+String(r)+e+Ue(l,2)}function eg(t,e){return t%60===0?(t>0?"-":"+")+Ue(Math.abs(t)/60,2):Oi(t,e)}function Oi(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Ue(Math.trunc(s/60),2),l=Ue(s%60,2);return n+r+e+l}const tg=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},hv=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},UE=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return tg(t,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",tg(s,e)).replace("{{time}}",hv(r,e))},kE={p:hv,P:UE},OE=/^D+$/,PE=/^Y+$/,LE=["D","DD","YY","YYYY"];function qE(t){return OE.test(t)}function BE(t){return PE.test(t)}function GE(t,e,n){const s=HE(t,e,n);if(console.warn(s),LE.includes(t))throw new RangeError(s)}function HE(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FE=/^'([^]*?)'?$/,$E=/''/g,JE=/[a-zA-Z]/;function Pi(t,e,n){var v,_,S,E;const s=tl(),r=s.locale??NE,l=s.firstWeekContainsDate??((_=(v=s.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,c=s.weekStartsOn??((E=(S=s.locale)==null?void 0:S.options)==null?void 0:E.weekStartsOn)??0,h=Nt(t,n==null?void 0:n.in);if(!KT(h))throw new RangeError("Invalid time value");let g=e.match(zE).map(A=>{const C=A[0];if(C==="p"||C==="P"){const R=kE[C];return R(A,r.formatLong)}return A}).join("").match(VE).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const C=A[0];if(C==="'")return{isToken:!1,value:YE(A)};if(Zm[C])return{isToken:!0,value:A};if(C.match(JE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:A}});r.localize.preprocessor&&(g=r.localize.preprocessor(h,g));const p={firstWeekContainsDate:l,weekStartsOn:c,locale:r};return g.map(A=>{if(!A.isToken)return A.value;const C=A.value;(BE(C)||qE(C))&&GE(C,e,String(t));const R=Zm[C[0]];return R(h,C,r.localize,p)}).join("")}function YE(t){const e=t.match(FE);return e?e[1].replace($E,"'"):t}function $a(t,e){const n=()=>hn(e==null?void 0:e.in,NaN),r=QE(t);let l;if(r.date){const p=ZE(r.date,2);l=jE(p.restDateString,p.year)}if(!l||isNaN(+l))return n();const c=+l;let h=0,g;if(r.time&&(h=ew(r.time),isNaN(h)))return n();if(r.timezone){if(g=tw(r.timezone),isNaN(g))return n()}else{const p=new Date(c+h),v=Nt(0,e==null?void 0:e.in);return v.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),v.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),v}return Nt(c+h+g,e==null?void 0:e.in)}const Na={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},KE=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,XE=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,WE=/^([+-])(\d{2})(?::?(\d{2}))?$/;function QE(t){const e={},n=t.split(Na.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Na.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Na.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=Na.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function ZE(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,l=s[2]?parseInt(s[2]):null;return{year:l===null?r:l*100,restDateString:t.slice((s[1]||s[2]).length)}}function jE(t,e){if(e===null)return new Date(NaN);const n=t.match(KE);if(!n)return new Date(NaN);const s=!!n[4],r=Ys(n[1]),l=Ys(n[2])-1,c=Ys(n[3]),h=Ys(n[4]),g=Ys(n[5])-1;if(s)return rw(e,h,g)?nw(e,h,g):new Date(NaN);{const p=new Date(0);return!ow(e,l,c)||!sw(e,r)?new Date(NaN):(p.setUTCFullYear(e,l,Math.max(r,c)),p)}}function Ys(t){return t?parseInt(t):1}function ew(t){const e=t.match(XE);if(!e)return NaN;const n=Lc(e[1]),s=Lc(e[2]),r=Lc(e[3]);return aw(n,s,r)?n*uv+s*lv+r*1e3:NaN}function Lc(t){return t&&parseFloat(t.replace(",","."))||0}function tw(t){if(t==="Z")return 0;const e=t.match(WE);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return lw(s,r)?n*(s*uv+r*lv):NaN}function nw(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,l=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+l),s}const iw=[31,null,31,30,31,30,31,31,30,31,30,31];function pv(t){return t%400===0||t%4===0&&t%100!==0}function ow(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(iw[e]||(pv(t)?29:28))}function sw(t,e){return e>=1&&e<=(pv(t)?366:365)}function rw(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function aw(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function lw(t,e){return e>=0&&e<=59}const qc={red:{bg:"bg-[#F4D7D7]",border:"border-[#E59898]",text:"text-[#8A3A3A]",subText:"text-[#A64B4B]",dot:"bg-[#E59898]",hoverBg:"hover:bg-[#EFCECE]"},blue:{bg:"bg-[#D7E4F4]",border:"border-[#98B6E5]",text:"text-[#3A568A]",subText:"text-[#4B70A6]",dot:"bg-[#98B6E5]",hoverBg:"hover:bg-[#C9DCF1]"},green:{bg:"bg-[#D7F4DC]",border:"border-[#98E5A7]",text:"text-[#3A8A48]",subText:"text-[#4BA65E]",dot:"bg-[#98E5A7]",hoverBg:"hover:bg-[#C9EFCF]"},purple:{bg:"bg-[#EBD7F4]",border:"border-[#CB98E5]",text:"text-[#6A3A8A]",subText:"text-[#874BA6]",dot:"bg-[#CB98E5]",hoverBg:"hover:bg-[#E2C9F1]"}},uw=["12 AM","1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"],cw=({events:t,viewDate:e,chicagoHour:n,chicagoMinute:s,chicagoDateStr:r,onNavigate:l,onUpdateEvent:c,onDeleteEvent:h})=>{var Y;const g=Ke.useRef(null),[p,v]=Ke.useState(null),[_,S]=Ke.useState(""),E=Array.from({length:24},(H,oe)=>oe),A=80,C=Ke.useMemo(()=>{const H=$o(e,{weekStartsOn:1});return Array.from({length:7},(oe,K)=>{const te=cv(H,K),pe=Pi(te,"yyyy-MM-dd");return{date:te,dateStr:pe,dayName:Pi(te,"EEE"),dayNum:Pi(te,"d"),isToday:pe===r}})},[e,r]);Ke.useEffect(()=>{if(g.current){const H=Math.max(0,(n-2)*A);g.current.scrollTop=H}},[]);const R=Ke.useMemo(()=>Pi(C[0].date,"MMMM yyyy"),[C]),U=(H,oe)=>t.filter(K=>{const te=parseInt(K.startTime.split(":")[0]);return Pi($a(K.date),"yyyy-MM-dd")===H&&te===oe}),D=H=>{v(H),S(H.notes||"")},I=H=>{H.preventDefault(),H.stopPropagation(),p&&(c(p.id,{notes:_}),v(null))},L=H=>{H.preventDefault(),H.stopPropagation(),p&&(h(p.id),v(null))},q=H=>{H.stopPropagation(),v(null)};return G.jsxs("div",{className:"flex flex-col h-full relative",children:[p&&G.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center p-8 bg-[#5D4E40]/20 backdrop-blur-sm animate-in fade-in duration-300",onClick:q,children:G.jsxs("div",{className:"boho-card w-full max-w-md p-8 rounded-[3rem] shadow-2xl animate-in zoom-in-95 duration-300",onClick:H=>H.stopPropagation(),children:[G.jsxs("div",{className:"flex items-center justify-between mb-6",children:[G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("div",{className:`w-3 h-3 rounded-full ${((Y=qc[p.color])==null?void 0:Y.dot)||"bg-blue-400"}`}),G.jsx("h3",{className:"text-xl font-black text-[#5D4E40] font-heading",children:p.title})]}),G.jsx("button",{type:"button",onClick:q,className:"p-2 hover:bg-[#E8DCC4]/50 rounded-full transition-colors text-[#7D6B5D]",children:G.jsx(qT,{className:"w-5 h-5"})})]}),G.jsxs("div",{className:"space-y-4 mb-8",children:[G.jsxs("div",{className:"flex items-center gap-6 text-sm font-bold text-[#7D6B5D]",children:[G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx(Wc,{className:"w-4 h-4"}),Pi($a(p.date),"MMMM d, yyyy")]}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx(sv,{className:"w-4 h-4"}),p.startTime]})]}),G.jsxs("div",{className:"relative",children:[G.jsx("div",{className:"absolute top-4 left-4 text-[#7D6B5D]",children:G.jsx(Ha,{className:"w-5 h-5"})}),G.jsx("textarea",{value:_,onChange:H=>S(H.target.value),placeholder:"Add a ritual note or secret detail...",className:"w-full h-40 pl-12 pr-6 py-4 bg-[#FDF9F3] border-2 border-[#E8DCC4] rounded-[2rem] focus:bg-white focus:border-[#7D6B5D] outline-none transition-all resize-none text-[#5D4E40] font-medium"})]})]}),G.jsxs("div",{className:"flex gap-4",children:[G.jsx("button",{type:"button",onClick:L,className:"p-4 bg-white border-2 border-[#F4D7D7] text-[#A64B4B] rounded-[1.5rem] hover:bg-[#F4D7D7] transition-all active:scale-95 flex items-center justify-center group",title:"Remove Ritual",children:G.jsx(rv,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),G.jsxs("button",{type:"button",onClick:I,className:"flex-1 py-4 bg-[#5D4E40] text-white rounded-[1.5rem] font-black uppercase tracking-widest flex items-center justify-center gap-3 hover:bg-[#7D6B5D] transition-all shadow-lg active:scale-95",children:[G.jsx(xT,{className:"w-5 h-5"}),"Preserve Note"]})]})]})}),G.jsx("div",{className:"flex items-center justify-between px-10 py-6 border-b border-[#E8DCC4]/30",children:G.jsxs("div",{className:"flex items-center gap-8",children:[G.jsx("h3",{className:"text-2xl font-black text-[#5D4E40] font-heading",children:R}),G.jsxs("div",{className:"flex items-center bg-[#FDF9F3] p-1.5 rounded-[1.5rem] border border-[#E8DCC4]/50 shadow-inner",children:[G.jsx("button",{onClick:()=>l("prev"),className:"p-2 hover:bg-white rounded-xl transition-all text-[#7D6B5D] hover:text-[#5D4E40]",children:G.jsx(pT,{className:"w-5 h-5"})}),G.jsx("button",{onClick:()=>l("today"),className:"px-5 py-2 text-[11px] font-black hover:bg-white rounded-xl transition-all text-[#5D4E40] uppercase tracking-widest",children:"Today"}),G.jsx("button",{onClick:()=>l("next"),className:"p-2 hover:bg-white rounded-xl transition-all text-[#7D6B5D] hover:text-[#5D4E40]",children:G.jsx(gT,{className:"w-5 h-5"})})]})]})}),G.jsxs("div",{className:"grid grid-cols-8 border-b border-[#E8DCC4]/20 bg-white/30",children:[G.jsx("div",{className:"p-4 flex items-center justify-center",children:G.jsx(wT,{className:"w-5 h-5 text-[#E8DCC4]"})}),C.map(H=>G.jsxs("div",{className:`p-4 text-center ${H.isToday?"bg-[#E8DCC4]/10":""}`,children:[G.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[#7D6B5D]",children:H.dayName}),G.jsx("div",{className:"mt-2 text-xl font-black text-[#5D4E40]",children:G.jsx("span",{className:H.isToday?"bg-[#5D4E40] text-white w-10 h-10 inline-flex items-center justify-center rounded-[1rem] shadow-sm":"",children:H.dayNum})})]},H.dateStr))]}),G.jsx("div",{ref:g,className:"flex-1 overflow-y-auto custom-scroll bg-white/10",children:G.jsxs("div",{className:"grid grid-cols-8 relative min-h-full",children:[G.jsx("div",{className:"flex flex-col border-r border-[#E8DCC4]/10 bg-[#FDF9F3]/40",children:E.map(H=>G.jsx("div",{className:"h-20 border-b border-[#E8DCC4]/5 p-4 text-[10px] font-black text-[#7D6B5D] text-right flex items-start justify-end tabular-nums tracking-widest",children:uw[H]},H))}),C.map(H=>G.jsx("div",{className:`relative border-r border-[#E8DCC4]/10 last:border-r-0 ${H.isToday?"bg-[#E8DCC4]/5":""}`,children:E.map(oe=>{const K=U(H.dateStr,oe);return G.jsx("div",{className:"h-20 border-b border-[#E8DCC4]/5 group relative",children:K.map((te,pe)=>{const Ee=te.startTime.split(":"),Me=parseInt(Ee[1]||"0"),Re=parseInt(Ee[0]),Xe=parseInt(te.endTime.split(":")[0]),V=parseInt(te.endTime.split(":")[1]||"0"),X=Xe-Re+(V-Me)/60,j=qc[te.color]||qc.blue,Se=100/K.length,Ie=Se*pe;return G.jsxs("div",{onClick:()=>D(te),className:`absolute z-10 ${j.bg} ${j.hoverBg} border-l-[4px] ${j.border} p-2 rounded-[1rem] shadow-sm overflow-visible transition-all cursor-pointer group/event`,style:{top:`${Me/60*A}px`,height:`${Math.max(X*A,28)}px`,left:`${Ie}%`,width:`${Se-1}%`},children:[te.notes&&G.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-3 bg-[#5D4E40] text-white text-[11px] font-medium rounded-2xl shadow-2xl opacity-0 invisible group-hover/event:opacity-100 group-hover/event:visible transition-all z-[100] pointer-events-none translate-y-2 group-hover/event:translate-y-0",children:[G.jsxs("div",{className:"flex items-center gap-2 mb-1.5 opacity-70",children:[G.jsx(Ha,{className:"w-3 h-3"}),G.jsx("span",{className:"uppercase tracking-widest text-[9px] font-black",children:"Ritual Note"})]}),G.jsx("div",{className:"line-clamp-4 leading-relaxed",children:te.notes}),G.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-[#5D4E40]"})]}),G.jsxs("div",{className:`text-[11px] font-black ${j.text} truncate leading-tight`,children:[te.title,te.notes&&G.jsx("span",{className:"ml-1 inline-block",children:G.jsx(Ha,{className:"w-2.5 h-2.5 opacity-50"})})]}),X>.6&&G.jsx("div",{className:`text-[9px] ${j.subText} font-black opacity-60 truncate mt-0.5`,children:te.startTime})]},te.id)})},oe)})},H.dateStr))]})})]})};var dw={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fw,hw;function pw(){return{geminiUrl:fw,vertexUrl:hw}}function mw(t,e,n,s){var r,l;if(!(t!=null&&t.baseUrl)){const c=pw();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kn{}function W(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(l+1),n[p])}else for(const p of g)f(p,e.slice(l+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(l+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(s+1),n)):n}else return n}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function gw(t,e){for(const[n,s]of Object.entries(e)){const r=n.split("."),l=s.split("."),c=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Qc(t,r,l,0,c)}}function Qc(t,e,n,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Qc(g,e,n,s+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const _=[];for(const S of n.slice(s))S==="*"?_.push(p):_.push(S);f(c,_,v)}for(const p of h)delete c[p]}}else{const c=t;l in c&&Qc(c[l],e,n,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yw(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function vw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Sw(c)),e}function _w(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],Tw(c)),e}function Sw(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Ew(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Tw(t){const e={},n=d(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>ww(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Ew(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],Mw(n)),e}function ww(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],Iw(n)),e}function Aw(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function Cw(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function bw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],Rw(c)),e}function Rw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function mv(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],Nw(c)),e}function Nw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function Mw(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],wd(s));const r=d(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Iw(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],wd(s));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ng;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ng||(ng={}));var ig;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ig||(ig={}));var og;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(og||(og={}));var pt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pt||(pt={}));var sg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sg||(sg={}));var rg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rg||(rg={}));var ag;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ag||(ag={}));var lg;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lg||(lg={}));var ug;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ug||(ug={}));var cg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cg||(cg={}));var dg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dg||(dg={}));var fg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(fg||(fg={}));var hg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hg||(hg={}));var pg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(pg||(pg={}));var mg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(mg||(mg={}));var gg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(gg||(gg={}));var yg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(yg||(yg={}));var vg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vg||(vg={}));var _g;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_g||(_g={}));var Sg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Sg||(Sg={}));var Tg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tg||(Tg={}));var Ja;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ja||(Ja={}));var Eg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Eg||(Eg={}));var wg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wg||(wg={}));var Ag;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ag||(Ag={}));var Zc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zc||(Zc={}));var Cg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Cg||(Cg={}));var bg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bg||(bg={}));var jc;(function(t){t.COLLECTION="COLLECTION"})(jc||(jc={}));var Rg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Rg||(Rg={}));var Ng;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ng||(Ng={}));var Mg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Mg||(Mg={}));var Ig;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ig||(Ig={}));var xg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(xg||(xg={}));var Dg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dg||(Dg={}));var Ug;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ug||(Ug={}));var kg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kg||(kg={}));var Og;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Og||(Og={}));var Pg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Pg||(Pg={}));var Lg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Lg||(Lg={}));var qg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(qg||(qg={}));var Bg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Bg||(Bg={}));var Gg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Gg||(Gg={}));var Hg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Hg||(Hg={}));var Vg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Vg||(Vg={}));var zg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(zg||(zg={}));var Fg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Fg||(Fg={}));var $g;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($g||($g={}));var Jg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Jg||(Jg={}));var Yg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Yg||(Yg={}));var Kg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Kg||(Kg={}));var Xg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Xg||(Xg={}));var Wg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Wg||(Wg={}));var Qg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qg||(Qg={}));var Zg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zg||(Zg={}));var jg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(jg||(jg={}));var Bo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bo||(Bo={}));class ed{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ks{get text(){var e,n,s,r,l,c,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,A]of Object.entries(S))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(A!==null||A!==void 0)&&_.push(E);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,s,r,l,c,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,E]of Object.entries(_))S!=="inlineData"&&(E!==null||E!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,r,l,c,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,r,l,c,h,g,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,r,l,c,h,g,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class ey{}class ty{}class xw{}class Dw{}class Uw{}class kw{}class ny{}class iy{}class oy{}class Ow{}class Ya{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ya;let r;const l=e;return n?r=_w(l):r=vw(l),Object.assign(s,r),s}}class sy{}class ry{}class ay{}class ly{}class Pw{}class Lw{}class qw{}class Ad{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ad,l=bw(e);return Object.assign(s,l),s}}class Bw{}class Gw{}class Hw{}class Vw{}class uy{}class zw{get text(){var e,n,s;let r="",l=!1;const c=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const c of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Fw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Cd,l=mv(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ce(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gv(t,e){const n=Ce(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function yv(t){return Array.isArray(t)?t.map(e=>Ka(e)):[Ka(t)]}function Ka(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vv(t){const e=Ka(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _v(t){const e=Ka(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Sv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>cy(e)):[cy(t)]}function td(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function dy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function mt(t){if(t==null)throw new Error("ContentUnion is required");return td(t)?t:{role:"user",parts:Sv(t)}}function bd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=mt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=mt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>mt(n)):[mt(e)]}function Qt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(dy(t)||fy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mt(t)]}const e=[],n=[],s=td(t[0]);for(const r of t){const l=td(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(dy(r)||fy(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:Sv(n)}),e}function $w(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(pt).includes(n[0].toUpperCase())?n[0].toUpperCase():pt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(pt).includes(s.toUpperCase())?s.toUpperCase():pt.TYPE_UNSPECIFIED})}}function Vo(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&$w(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(pt).includes(h.toUpperCase())?h.toUpperCase():pt.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Vo(h);else if(s.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(Vo(p))}e[c]=g}else if(r.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=Vo(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Rd(t){return Vo(t)}function Nd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Md(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Jo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vo(e.response));return t}function Yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Jw(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function On(t,e){if(typeof e!="string")throw new Error("name must be a string");return Jw(t,e,"cachedContents")}function Tv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function hi(t){return wd(t)}function Yw(t){return t!=null&&typeof t=="object"&&"name"in t}function Kw(t){return t!=null&&typeof t=="object"&&"video"in t}function Xw(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ev(t){var e;let n;if(Yw(t)&&(n=t.name),!(Xw(t)&&(n=t.uri,n===void 0))&&!(Kw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function wv(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Av(t){for(const e of["models","tunedModels","publisherModels"])if(Ww(t,e))return t[e];return[]}function Ww(t,e){return t!==null&&typeof t=="object"&&e in t}function Qw(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Zw(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=Qw(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Cv(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bv(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ko(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Rv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kA(c))),f(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function tA(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function nA(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Va(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const r=d(t,["metadata","state"]);r!=null&&f(e,["state"],Rv(r));const l=d(t,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],eA(bv(p))),e}function nd(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const r=d(t,["state"]);r!=null&&f(e,["state"],Rv(r));const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],iA(_));const S=d(t,["outputConfig"]);S!=null&&f(e,["dest"],tA(bv(S)));const E=d(t,["completionStats"]);return E!=null&&f(e,["completionStats"],E),e}function iA(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function oA(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(n,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>UA(t,c))),f(n,["requests","requests"],l)}return n}function sA(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function aA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function lA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function uA(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],cA(s));const r=d(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>E)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function cA(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["citations"],s)}return e}function Nv(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>HA(l))),f(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function dA(t,e){const n={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fA(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],nA(jw(r))),n}function hy(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Ce(t,s));const r=d(e,["src"]);r!=null&&f(n,["batch","inputConfig"],oA(t,Cv(t,r)));const l=d(e,["config"]);return l!=null&&dA(l,n),n}function hA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],Ce(t,s));const r=d(e,["src"]);r!=null&&f(n,["inputConfig"],sA(Cv(t,r)));const l=d(e,["config"]);return l!=null&&fA(l,n),n}function pA(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),n}function mA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Ce(t,s));const r=d(e,["src"]);r!=null&&f(n,["batch","inputConfig"],EA(t,r));const l=d(e,["config"]);return l!=null&&pA(l,n),n}function gA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function yA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function vA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function _A(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function SA(t,e){const n={},s=d(e,["contents"]);if(s!=null){let l=bd(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(n,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(f(n,["_self"],TA(r,n)),gw(n,{"requests[].*":"requests[].request.*"})),n}function TA(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function EA(t,e){const n={},s=d(e,["fileName"]);s!=null&&f(n,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&f(n,["requests"],SA(t,r)),n}function wA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function AA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CA(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bA(t,e,n){const s={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Nv(mt(r)));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const E=d(e,["presencePenalty"]);E!=null&&f(s,["presencePenalty"],E);const A=d(e,["frequencyPenalty"]);A!=null&&f(s,["frequencyPenalty"],A);const C=d(e,["seed"]);C!=null&&f(s,["seed"],C);const R=d(e,["responseMimeType"]);R!=null&&f(s,["responseMimeType"],R);const U=d(e,["responseSchema"]);U!=null&&f(s,["responseSchema"],Rd(U));const D=d(e,["responseJsonSchema"]);if(D!=null&&f(s,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(n!==void 0&&I!=null){let Me=I;Array.isArray(Me)&&(Me=Me.map(Re=>VA(Re))),f(n,["safetySettings"],Me)}const L=d(e,["tools"]);if(n!==void 0&&L!=null){let Me=Yo(L);Array.isArray(Me)&&(Me=Me.map(Re=>FA(Jo(Re)))),f(n,["tools"],Me)}const q=d(e,["toolConfig"]);if(n!==void 0&&q!=null&&f(n,["toolConfig"],zA(q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);n!==void 0&&Y!=null&&f(n,["cachedContent"],On(t,Y));const H=d(e,["responseModalities"]);H!=null&&f(s,["responseModalities"],H);const oe=d(e,["mediaResolution"]);oe!=null&&f(s,["mediaResolution"],oe);const K=d(e,["speechConfig"]);if(K!=null&&f(s,["speechConfig"],Nd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=d(e,["thinkingConfig"]);te!=null&&f(s,["thinkingConfig"],te);const pe=d(e,["imageConfig"]);pe!=null&&f(s,["imageConfig"],DA(pe));const Ee=d(e,["enableEnhancedCivicAnswers"]);if(Ee!=null&&f(s,["enableEnhancedCivicAnswers"],Ee),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function RA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>uA(p))),f(e,["candidates"],g)}const r=d(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function NA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function MA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ko(t,s)),n}function IA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function xA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function DA(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function UA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["request","model"],Ce(t,s));const r=d(e,["contents"]);if(r!=null){let h=Qt(r);Array.isArray(h)&&(h=h.map(g=>Nv(g))),f(n,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(n,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(n,["request","generationConfig"],bA(t,c,d(n,["request"],{}))),n}function kA(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],RA(n));const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["error"]);return r!=null&&f(e,["error"],r),e}function OA(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function PA(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),n}function LA(t){const e={},n=d(t,["config"]);return n!=null&&OA(n,e),e}function qA(t){const e={},n=d(t,["config"]);return n!=null&&PA(n,e),e}function BA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Va(c))),f(e,["batchJobs"],l)}return e}function GA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>nd(c))),f(e,["batchJobs"],l)}return e}function HA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],wA(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],AA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],rA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function VA(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function zA(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],CA(s)),e}function FA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],IA(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],xA(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Un;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Un||(Un={}));class Vi{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $A extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vi(Un.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=hy(this.apiClient,e),s=n._url,r=W("{model}:batchGenerateContent",s),h=n.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=S,_.request=E}p.push(_)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=hA(this.apiClient,e);return h=W("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>nd(v))}else{const p=hy(this.apiClient,e);return h=W("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Va(v))}}async createEmbeddingsInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mA(this.apiClient,e);return l=W("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Va(g))}}async get(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=MA(this.apiClient,e);return h=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>nd(v))}else{const p=NA(this.apiClient,e);return h=W("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Va(v))}}async cancel(e){var n,s,r,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=lA(this.apiClient,e);c=W("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=aA(this.apiClient,e);c=W("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qA(e);return h=W("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=GA(v),S=new uy;return Object.assign(S,_),S})}else{const p=LA(e);return h=W("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=BA(v),S=new uy;return Object.assign(S,_),S})}}async delete(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=yA(this.apiClient,e);return h=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>_A(v))}else{const p=gA(this.apiClient,e);return h=W("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>vA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function py(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>mC(l))),f(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function YA(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=Qt(c);Array.isArray(v)&&(v=v.map(_=>py(_))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],py(mt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>yC(_))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],gC(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function KA(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=Qt(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],mt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>vC(S))),f(e,["tools"],_)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function XA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],gv(t,s));const r=d(e,["config"]);return r!=null&&YA(r,n),n}function WA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],gv(t,s));const r=d(e,["config"]);return r!=null&&KA(r,n),n}function QA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],On(t,s)),n}function ZA(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],On(t,s)),n}function jA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function eC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function tC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nC(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iC(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oC(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const r=d(t,["parameters"]);r!=null&&f(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function sC(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],On(t,s)),n}function rC(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],On(t,s)),n}function aC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function lC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function uC(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function cC(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function dC(t){const e={},n=d(t,["config"]);return n!=null&&uC(n,e),e}function fC(t){const e={},n=d(t,["config"]);return n!=null&&cC(n,e),e}function hC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function pC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function mC(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],tC(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],nC(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],JA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function gC(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],iC(s)),e}function yC(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],aC(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],lC(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function vC(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>oC(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function _C(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function SC(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function TC(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],On(t,s));const r=d(e,["config"]);return r!=null&&_C(r,n),n}function EC(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],On(t,s));const r=d(e,["config"]);return r!=null&&SC(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wC extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vi(Un.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=WA(this.apiClient,e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=XA(this.apiClient,e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=rC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=sC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ZA(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=eC(v),S=new ay;return Object.assign(S,_),S})}else{const p=QA(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jA(v),S=new ay;return Object.assign(S,_),S})}}async update(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=TC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=fC(e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=pC(v),S=new ly;return Object.assign(S,_),S})}else{const p=dC(e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=hC(v),S=new ly;return Object.assign(S,_),S})}}}function Xa(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function my(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t){return this instanceof ue?(this.v=t,this):new ue(t)}function rn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(E){return function(A){return Promise.resolve(A).then(E,_)}}function h(E,A){s[E]&&(r[E]=function(C){return new Promise(function(R,U){l.push([E,C,R,U])>1||g(E,C)})},A&&(r[E]=A(r[E])))}function g(E,A){try{p(s[E](A))}catch(C){S(l[0][3],C)}}function p(E){E.value instanceof ue?Promise.resolve(E.value.v).then(v,_):S(l[0][2],E)}function v(E){g("next",E)}function _(E){g("throw",E)}function S(E,A){E(A),l.shift(),l.length&&g(l[0][0],l[0][1])}}function an(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof my=="function"?my(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),r(h,g,c.done,c.value)})}}function r(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Mv(n)}function Mv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function CC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!Mv(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class bC{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new RC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class RC{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),CC(l)}async sendMessage(e){var n;await this.sendPromise;const s=mt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await r,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const E=p?[p]:[];this.recordHistory(s,E,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=mt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?gy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return rn(this,arguments,function*(){var r,l,c,h,g,p;const v=[];try{for(var _=!0,S=an(e),E;E=yield ue(S.next()),r=E.done,!r;_=!0){h=E.value,_=!1;const A=h;if(AC(A)){const C=(p=(g=A.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;C!==void 0&&v.push(C)}yield yield ue(A)}}catch(A){l={error:A}}finally{try{!_&&!r&&(c=S.return)&&(yield ue(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(n,v)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...gy(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NC(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function MC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function IC(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],Ev(n)),e}function xC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function DC(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],Ev(n)),e}function UC(t){const e={},n=d(t,["uris"]);return n!=null&&f(e,["uris"],n),e}function kC(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function OC(t){const e={},n=d(t,["config"]);return n!=null&&kC(n,e),e}function PC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}function LC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),f(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vi(Un.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OC(e);return l=W("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=PC(g),v=new Bw;return Object.assign(v,p),v})}}async createInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NC(e);return l=W("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=MC(g),v=new Gw;return Object.assign(v,p),v})}}async get(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DC(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IC(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=xC(g),v=new Hw;return Object.assign(v,p),v})}}async registerFilesInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=UC(e);return l=W("files:register",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=LC(g),v=new Vw;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function za(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function BC(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>tb(l))),f(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function GC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function HC(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VC(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const r=d(t,["parameters"]);r!=null&&f(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function zC(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const r=d(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const E=d(t,["responseMimeType"]);E!=null&&f(e,["responseMimeType"],E);const A=d(t,["responseModalities"]);A!=null&&f(e,["responseModalities"],A);const C=d(t,["responseSchema"]);C!=null&&f(e,["responseSchema"],C);const R=d(t,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);const U=d(t,["seed"]);U!=null&&f(e,["seed"],U);const D=d(t,["speechConfig"]);D!=null&&f(e,["speechConfig"],D);const I=d(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const L=d(t,["temperature"]);L!=null&&f(e,["temperature"],L);const q=d(t,["thinkingConfig"]);q!=null&&f(e,["thinkingConfig"],q);const Y=d(t,["topK"]);Y!=null&&f(e,["topK"],Y);const H=d(t,["topP"]);if(H!=null&&f(e,["topP"],H),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function FC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function $C(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function JC(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Md(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],BC(mt(A)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let Y=Yo(C);Array.isArray(Y)&&(Y=Y.map(H=>ib(Jo(H)))),f(e,["setup","tools"],Y)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],nb(R));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&f(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function YC(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],zC(s));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Md(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],mt(A));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let H=Yo(C);Array.isArray(H)&&(H=H.map(oe=>ob(Jo(oe)))),f(e,["setup","tools"],H)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],R);const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const q=d(t,["proactivity"]);e!==void 0&&q!=null&&f(e,["setup","proactivity"],q);const Y=d(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&f(e,["setup","explicitVadSignal"],Y),n}function KC(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Ce(t,s));const r=d(e,["config"]);return r!=null&&f(n,["config"],JC(r,n)),n}function XC(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Ce(t,s));const r=d(e,["config"]);return r!=null&&f(n,["config"],YC(r,n)),n}function WC(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function QC(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["weightedPrompts"],s)}return e}function ZC(t){const e={},n=d(t,["media"]);if(n!=null){let p=yv(n);Array.isArray(p)&&(p=p.map(v=>za(v))),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],za(_v(s)));const r=d(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&f(e,["video"],za(vv(l)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function jC(t){const e={},n=d(t,["media"]);if(n!=null){let p=yv(n);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],_v(s));const r=d(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&f(e,["video"],vv(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function eb(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const r=d(t,["toolCall"]);r!=null&&f(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],sb(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],rb(v)),e}function tb(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],GC(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],HC(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],za(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function nb(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ib(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],FC(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],$C(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function ob(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>VC(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function sb(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const r=d(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["promptTokensDetails"],E)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["cacheTokensDetails"],E)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["responseTokensDetails"],E)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["toolUsePromptTokensDetails"],E)}const S=d(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function rb(t){const e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ab(t,e){const n={},s=d(t,["data"]);if(s!=null&&f(n,["data"],s),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&f(n,["mimeType"],r),n}function lb(t,e){const n={},s=d(t,["content"]);s!=null&&f(n,["content"],s);const r=d(t,["citationMetadata"]);r!=null&&f(n,["citationMetadata"],ub(r));const l=d(t,["tokenCount"]);l!=null&&f(n,["tokenCount"],l);const c=d(t,["finishReason"]);c!=null&&f(n,["finishReason"],c);const h=d(t,["avgLogprobs"]);h!=null&&f(n,["avgLogprobs"],h);const g=d(t,["groundingMetadata"]);g!=null&&f(n,["groundingMetadata"],g);const p=d(t,["index"]);p!=null&&f(n,["index"],p);const v=d(t,["logprobsResult"]);v!=null&&f(n,["logprobsResult"],v);const _=d(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),f(n,["safetyRatings"],E)}const S=d(t,["urlContextMetadata"]);return S!=null&&f(n,["urlContextMetadata"],S),n}function ub(t,e){const n={},s=d(t,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),f(n,["citations"],r)}return n}function cb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let c=Qt(l);Array.isArray(c)&&(c=c.map(h=>h)),f(s,["contents"],c)}return s}function db(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(n,["tokensInfo"],l)}return n}function fb(t,e){const n={},s=d(t,["values"]);s!=null&&f(n,["values"],s);const r=d(t,["statistics"]);return r!=null&&f(n,["statistics"],hb(r)),n}function hb(t,e){const n={},s=d(t,["truncated"]);s!=null&&f(n,["truncated"],s);const r=d(t,["token_count"]);return r!=null&&f(n,["tokenCount"],r),n}function nl(t,e){const n={},s=d(t,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ER(c))),f(n,["parts"],l)}const r=d(t,["role"]);return r!=null&&f(n,["role"],r),n}function pb(t,e){const n={},s=d(t,["controlType"]);s!=null&&f(n,["controlType"],s);const r=d(t,["enableControlImageComputation"]);return r!=null&&f(n,["computeControl"],r),n}function mb(t,e){const n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function gb(t,e,n){const s={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],mt(r));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>Uv(g))),f(e,["tools"],h)}const c=d(t,["generationConfig"]);return e!==void 0&&c!=null&&f(e,["generationConfig"],aR(c)),s}function yb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let h=Qt(l);Array.isArray(h)&&(h=h.map(g=>nl(g))),f(s,["contents"],h)}const c=d(e,["config"]);return c!=null&&mb(c),s}function vb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let h=Qt(l);Array.isArray(h)&&(h=h.map(g=>g)),f(s,["contents"],h)}const c=d(e,["config"]);return c!=null&&gb(c,s),s}function _b(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);r!=null&&f(n,["totalTokens"],r);const l=d(t,["cachedContentTokenCount"]);return l!=null&&f(n,["cachedContentTokenCount"],l),n}function Sb(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);return r!=null&&f(n,["totalTokens"],r),n}function Tb(t,e,n){const s={},r=d(e,["model"]);return r!=null&&f(s,["_url","name"],Ce(t,r)),s}function Eb(t,e,n){const s={},r=d(e,["model"]);return r!=null&&f(s,["_url","name"],Ce(t,r)),s}function wb(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function Ab(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function Cb(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=d(t,["numberOfImages"]);e!==void 0&&c!=null&&f(e,["parameters","sampleCount"],c);const h=d(t,["aspectRatio"]);e!==void 0&&h!=null&&f(e,["parameters","aspectRatio"],h);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&f(e,["parameters","guidanceScale"],g);const p=d(t,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const v=d(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const S=d(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const U=d(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const I=d(t,["editMode"]);e!==void 0&&I!=null&&f(e,["parameters","editMode"],I);const L=d(t,["baseSteps"]);return e!==void 0&&L!=null&&f(e,["parameters","editConfig","baseSteps"],L),s}function bb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["prompt"]);l!=null&&f(s,["instances[0]","prompt"],l);const c=d(e,["referenceImages"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(p=>NR(p))),f(s,["instances[0]","referenceImages"],g)}const h=d(e,["config"]);return h!=null&&Cb(h,s),s}function Rb(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>il(c))),f(n,["generatedImages"],l)}return n}function Nb(t,e,n){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const c=d(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&f(e,["requests[]","outputDimensionality"],c),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function Mb(t,e,n){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const c=d(t,["outputDimensionality"]);e!==void 0&&c!=null&&f(e,["parameters","outputDimensionality"],c);const h=d(t,["mimeType"]);e!==void 0&&h!=null&&f(e,["instances[]","mimeType"],h);const g=d(t,["autoTruncate"]);return e!==void 0&&g!=null&&f(e,["parameters","autoTruncate"],g),s}function Ib(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let g=bd(t,l);Array.isArray(g)&&(g=g.map(p=>p)),f(s,["requests[]","content"],g)}const c=d(e,["config"]);c!=null&&Nb(c,s);const h=d(e,["model"]);return h!==void 0&&f(s,["requests[]","model"],Ce(t,h)),s}function xb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let h=bd(t,l);Array.isArray(h)&&(h=h.map(g=>g)),f(s,["instances[]","content"],h)}const c=d(e,["config"]);return c!=null&&Mb(c,s),s}function Db(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),f(n,["embeddings"],c)}const l=d(t,["metadata"]);return l!=null&&f(n,["metadata"],l),n}function Ub(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>fb(h))),f(n,["embeddings"],c)}const l=d(t,["metadata"]);return l!=null&&f(n,["metadata"],l),n}function kb(t,e){const n={},s=d(t,["endpoint"]);s!=null&&f(n,["name"],s);const r=d(t,["deployedModelId"]);return r!=null&&f(n,["deployedModelId"],r),n}function Ob(t,e){const n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["fileUri"]);s!=null&&f(n,["fileUri"],s);const r=d(t,["mimeType"]);return r!=null&&f(n,["mimeType"],r),n}function Pb(t,e){const n={},s=d(t,["id"]);s!=null&&f(n,["id"],s);const r=d(t,["args"]);r!=null&&f(n,["args"],r);const l=d(t,["name"]);if(l!=null&&f(n,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function Lb(t,e){const n={},s=d(t,["allowedFunctionNames"]);s!=null&&f(n,["allowedFunctionNames"],s);const r=d(t,["mode"]);if(r!=null&&f(n,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function qb(t,e){const n={},s=d(t,["description"]);s!=null&&f(n,["description"],s);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const l=d(t,["parameters"]);l!=null&&f(n,["parameters"],l);const c=d(t,["parametersJsonSchema"]);c!=null&&f(n,["parametersJsonSchema"],c);const h=d(t,["response"]);h!=null&&f(n,["response"],h);const g=d(t,["responseJsonSchema"]);if(g!=null&&f(n,["responseJsonSchema"],g),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Bb(t,e,n,s){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],nl(mt(l)));const c=d(e,["temperature"]);c!=null&&f(r,["temperature"],c);const h=d(e,["topP"]);h!=null&&f(r,["topP"],h);const g=d(e,["topK"]);g!=null&&f(r,["topK"],g);const p=d(e,["candidateCount"]);p!=null&&f(r,["candidateCount"],p);const v=d(e,["maxOutputTokens"]);v!=null&&f(r,["maxOutputTokens"],v);const _=d(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const S=d(e,["responseLogprobs"]);S!=null&&f(r,["responseLogprobs"],S);const E=d(e,["logprobs"]);E!=null&&f(r,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&f(r,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&f(r,["frequencyPenalty"],C);const R=d(e,["seed"]);R!=null&&f(r,["seed"],R);const U=d(e,["responseMimeType"]);U!=null&&f(r,["responseMimeType"],U);const D=d(e,["responseSchema"]);D!=null&&f(r,["responseSchema"],Rd(D));const I=d(e,["responseJsonSchema"]);if(I!=null&&f(r,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(n!==void 0&&L!=null){let Re=L;Array.isArray(Re)&&(Re=Re.map(Xe=>MR(Xe))),f(n,["safetySettings"],Re)}const q=d(e,["tools"]);if(n!==void 0&&q!=null){let Re=Yo(q);Array.isArray(Re)&&(Re=Re.map(Xe=>PR(Jo(Xe)))),f(n,["tools"],Re)}const Y=d(e,["toolConfig"]);if(n!==void 0&&Y!=null&&f(n,["toolConfig"],OR(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=d(e,["cachedContent"]);n!==void 0&&H!=null&&f(n,["cachedContent"],On(t,H));const oe=d(e,["responseModalities"]);oe!=null&&f(r,["responseModalities"],oe);const K=d(e,["mediaResolution"]);K!=null&&f(r,["mediaResolution"],K);const te=d(e,["speechConfig"]);if(te!=null&&f(r,["speechConfig"],Nd(te)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=d(e,["thinkingConfig"]);pe!=null&&f(r,["thinkingConfig"],pe);const Ee=d(e,["imageConfig"]);Ee!=null&&f(r,["imageConfig"],fR(Ee));const Me=d(e,["enableEnhancedCivicAnswers"]);if(Me!=null&&f(r,["enableEnhancedCivicAnswers"],Me),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Gb(t,e,n,s){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],mt(l));const c=d(e,["temperature"]);c!=null&&f(r,["temperature"],c);const h=d(e,["topP"]);h!=null&&f(r,["topP"],h);const g=d(e,["topK"]);g!=null&&f(r,["topK"],g);const p=d(e,["candidateCount"]);p!=null&&f(r,["candidateCount"],p);const v=d(e,["maxOutputTokens"]);v!=null&&f(r,["maxOutputTokens"],v);const _=d(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const S=d(e,["responseLogprobs"]);S!=null&&f(r,["responseLogprobs"],S);const E=d(e,["logprobs"]);E!=null&&f(r,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&f(r,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&f(r,["frequencyPenalty"],C);const R=d(e,["seed"]);R!=null&&f(r,["seed"],R);const U=d(e,["responseMimeType"]);U!=null&&f(r,["responseMimeType"],U);const D=d(e,["responseSchema"]);D!=null&&f(r,["responseSchema"],Rd(D));const I=d(e,["responseJsonSchema"]);I!=null&&f(r,["responseJsonSchema"],I);const L=d(e,["routingConfig"]);L!=null&&f(r,["routingConfig"],L);const q=d(e,["modelSelectionConfig"]);q!=null&&f(r,["modelConfig"],q);const Y=d(e,["safetySettings"]);if(n!==void 0&&Y!=null){let j=Y;Array.isArray(j)&&(j=j.map(Se=>Se)),f(n,["safetySettings"],j)}const H=d(e,["tools"]);if(n!==void 0&&H!=null){let j=Yo(H);Array.isArray(j)&&(j=j.map(Se=>Uv(Jo(Se)))),f(n,["tools"],j)}const oe=d(e,["toolConfig"]);n!==void 0&&oe!=null&&f(n,["toolConfig"],oe);const K=d(e,["labels"]);n!==void 0&&K!=null&&f(n,["labels"],K);const te=d(e,["cachedContent"]);n!==void 0&&te!=null&&f(n,["cachedContent"],On(t,te));const pe=d(e,["responseModalities"]);pe!=null&&f(r,["responseModalities"],pe);const Ee=d(e,["mediaResolution"]);Ee!=null&&f(r,["mediaResolution"],Ee);const Me=d(e,["speechConfig"]);Me!=null&&f(r,["speechConfig"],Nd(Me));const Re=d(e,["audioTimestamp"]);Re!=null&&f(r,["audioTimestamp"],Re);const Xe=d(e,["thinkingConfig"]);Xe!=null&&f(r,["thinkingConfig"],Xe);const V=d(e,["imageConfig"]);if(V!=null&&f(r,["imageConfig"],hR(V)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const X=d(e,["modelArmorConfig"]);return n!==void 0&&X!=null&&f(n,["modelArmorConfig"],X),r}function yy(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let h=Qt(l);Array.isArray(h)&&(h=h.map(g=>nl(g))),f(s,["contents"],h)}const c=d(e,["config"]);return c!=null&&f(s,["generationConfig"],Bb(t,c,s)),s}function vy(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["contents"]);if(l!=null){let h=Qt(l);Array.isArray(h)&&(h=h.map(g=>g)),f(s,["contents"],h)}const c=d(e,["config"]);return c!=null&&f(s,["generationConfig"],Gb(t,c,s)),s}function _y(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>lb(v))),f(n,["candidates"],p)}const l=d(t,["modelVersion"]);l!=null&&f(n,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&f(n,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(n,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(n,["usageMetadata"],g),n}function Sy(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(n,["candidates"],v)}const l=d(t,["createTime"]);l!=null&&f(n,["createTime"],l);const c=d(t,["modelVersion"]);c!=null&&f(n,["modelVersion"],c);const h=d(t,["promptFeedback"]);h!=null&&f(n,["promptFeedback"],h);const g=d(t,["responseId"]);g!=null&&f(n,["responseId"],g);const p=d(t,["usageMetadata"]);return p!=null&&f(n,["usageMetadata"],p),n}function Hb(t,e,n){const s={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["guidanceScale"]);if(e!==void 0&&c!=null&&f(e,["parameters","guidanceScale"],c),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const v=d(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const _=d(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const S=d(t,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=d(t,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function Vb(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=d(t,["numberOfImages"]);e!==void 0&&c!=null&&f(e,["parameters","sampleCount"],c);const h=d(t,["aspectRatio"]);e!==void 0&&h!=null&&f(e,["parameters","aspectRatio"],h);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&f(e,["parameters","guidanceScale"],g);const p=d(t,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const v=d(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const S=d(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const U=d(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const I=d(t,["imageSize"]);e!==void 0&&I!=null&&f(e,["parameters","sampleImageSize"],I);const L=d(t,["enhancePrompt"]);return e!==void 0&&L!=null&&f(e,["parameters","enhancePrompt"],L),s}function zb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["prompt"]);l!=null&&f(s,["instances[0]","prompt"],l);const c=d(e,["config"]);return c!=null&&Hb(c,s),s}function Fb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["prompt"]);l!=null&&f(s,["instances[0]","prompt"],l);const c=d(e,["config"]);return c!=null&&Vb(c,s),s}function $b(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>iR(h))),f(n,["generatedImages"],c)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(n,["positivePromptSafetyAttributes"],xv(l)),n}function Jb(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>il(h))),f(n,["generatedImages"],c)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(n,["positivePromptSafetyAttributes"],Dv(l)),n}function Yb(t,e,n){const s={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["resolution"]);e!==void 0&&h!=null&&f(e,["parameters","resolution"],h);const g=d(t,["personGeneration"]);if(e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","negativePrompt"],p);const v=d(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(t,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],ol(_));const S=d(t,["referenceImages"]);if(e!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(A=>XR(A))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function Kb(t,e,n){const s={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(t,["fps"]);e!==void 0&&c!=null&&f(e,["parameters","fps"],c);const h=d(t,["durationSeconds"]);e!==void 0&&h!=null&&f(e,["parameters","durationSeconds"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const v=d(t,["resolution"]);e!==void 0&&v!=null&&f(e,["parameters","resolution"],v);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const S=d(t,["pubsubTopic"]);e!==void 0&&S!=null&&f(e,["parameters","pubsubTopic"],S);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const A=d(t,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const C=d(t,["generateAudio"]);e!==void 0&&C!=null&&f(e,["parameters","generateAudio"],C);const R=d(t,["lastFrame"]);e!==void 0&&R!=null&&f(e,["instances[0]","lastFrame"],ln(R));const U=d(t,["referenceImages"]);if(e!==void 0&&U!=null){let L=U;Array.isArray(L)&&(L=L.map(q=>WR(q))),f(e,["instances[0]","referenceImages"],L)}const D=d(t,["mask"]);e!==void 0&&D!=null&&f(e,["instances[0]","mask"],KR(D));const I=d(t,["compressionQuality"]);return e!==void 0&&I!=null&&f(e,["parameters","compressionQuality"],I),s}function Xb(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["name"],s);const r=d(t,["metadata"]);r!=null&&f(n,["metadata"],r);const l=d(t,["done"]);l!=null&&f(n,["done"],l);const c=d(t,["error"]);c!=null&&f(n,["error"],c);const h=d(t,["response","generateVideoResponse"]);return h!=null&&f(n,["response"],jb(h)),n}function Wb(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["name"],s);const r=d(t,["metadata"]);r!=null&&f(n,["metadata"],r);const l=d(t,["done"]);l!=null&&f(n,["done"],l);const c=d(t,["error"]);c!=null&&f(n,["error"],c);const h=d(t,["response"]);return h!=null&&f(n,["response"],eR(h)),n}function Qb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["prompt"]);l!=null&&f(s,["instances[0]","prompt"],l);const c=d(e,["image"]);c!=null&&f(s,["instances[0]","image"],ol(c));const h=d(e,["video"]);h!=null&&f(s,["instances[0]","video"],kv(h));const g=d(e,["source"]);g!=null&&tR(g,s);const p=d(e,["config"]);return p!=null&&Yb(p,s),s}function Zb(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["prompt"]);l!=null&&f(s,["instances[0]","prompt"],l);const c=d(e,["image"]);c!=null&&f(s,["instances[0]","image"],ln(c));const h=d(e,["video"]);h!=null&&f(s,["instances[0]","video"],Ov(h));const g=d(e,["source"]);g!=null&&nR(g,s);const p=d(e,["config"]);return p!=null&&Kb(p,s),s}function jb(t,e){const n={},s=d(t,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>sR(h))),f(n,["generatedVideos"],c)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&f(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(n,["raiMediaFilteredReasons"],l),n}function eR(t,e){const n={},s=d(t,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>rR(h))),f(n,["generatedVideos"],c)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&f(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(n,["raiMediaFilteredReasons"],l),n}function tR(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],ol(l));const c=d(t,["video"]);return e!==void 0&&c!=null&&f(e,["instances[0]","video"],kv(c)),s}function nR(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],ln(l));const c=d(t,["video"]);return e!==void 0&&c!=null&&f(e,["instances[0]","video"],Ov(c)),s}function iR(t,e){const n={},s=d(t,["_self"]);s!=null&&f(n,["image"],pR(s));const r=d(t,["raiFilteredReason"]);r!=null&&f(n,["raiFilteredReason"],r);const l=d(t,["_self"]);return l!=null&&f(n,["safetyAttributes"],xv(l)),n}function il(t,e){const n={},s=d(t,["_self"]);s!=null&&f(n,["image"],Iv(s));const r=d(t,["raiFilteredReason"]);r!=null&&f(n,["raiFilteredReason"],r);const l=d(t,["_self"]);l!=null&&f(n,["safetyAttributes"],Dv(l));const c=d(t,["prompt"]);return c!=null&&f(n,["enhancedPrompt"],c),n}function oR(t,e){const n={},s=d(t,["_self"]);s!=null&&f(n,["mask"],Iv(s));const r=d(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(n,["labels"],l)}return n}function sR(t,e){const n={},s=d(t,["video"]);return s!=null&&f(n,["video"],JR(s)),n}function rR(t,e){const n={},s=d(t,["_self"]);return s!=null&&f(n,["video"],YR(s)),n}function aR(t,e){const n={},s=d(t,["modelSelectionConfig"]);s!=null&&f(n,["modelConfig"],s);const r=d(t,["responseJsonSchema"]);r!=null&&f(n,["responseJsonSchema"],r);const l=d(t,["audioTimestamp"]);l!=null&&f(n,["audioTimestamp"],l);const c=d(t,["candidateCount"]);c!=null&&f(n,["candidateCount"],c);const h=d(t,["enableAffectiveDialog"]);h!=null&&f(n,["enableAffectiveDialog"],h);const g=d(t,["frequencyPenalty"]);g!=null&&f(n,["frequencyPenalty"],g);const p=d(t,["logprobs"]);p!=null&&f(n,["logprobs"],p);const v=d(t,["maxOutputTokens"]);v!=null&&f(n,["maxOutputTokens"],v);const _=d(t,["mediaResolution"]);_!=null&&f(n,["mediaResolution"],_);const S=d(t,["presencePenalty"]);S!=null&&f(n,["presencePenalty"],S);const E=d(t,["responseLogprobs"]);E!=null&&f(n,["responseLogprobs"],E);const A=d(t,["responseMimeType"]);A!=null&&f(n,["responseMimeType"],A);const C=d(t,["responseModalities"]);C!=null&&f(n,["responseModalities"],C);const R=d(t,["responseSchema"]);R!=null&&f(n,["responseSchema"],R);const U=d(t,["routingConfig"]);U!=null&&f(n,["routingConfig"],U);const D=d(t,["seed"]);D!=null&&f(n,["seed"],D);const I=d(t,["speechConfig"]);I!=null&&f(n,["speechConfig"],I);const L=d(t,["stopSequences"]);L!=null&&f(n,["stopSequences"],L);const q=d(t,["temperature"]);q!=null&&f(n,["temperature"],q);const Y=d(t,["thinkingConfig"]);Y!=null&&f(n,["thinkingConfig"],Y);const H=d(t,["topK"]);H!=null&&f(n,["topK"],H);const oe=d(t,["topP"]);if(oe!=null&&f(n,["topP"],oe),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function lR(t,e,n){const s={},r=d(e,["model"]);return r!=null&&f(s,["_url","name"],Ce(t,r)),s}function uR(t,e,n){const s={},r=d(e,["model"]);return r!=null&&f(s,["_url","name"],Ce(t,r)),s}function cR(t,e){const n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=d(t,["enableWidget"]);return s!=null&&f(n,["enableWidget"],s),n}function dR(t,e){const n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=d(t,["timeRangeFilter"]);return s!=null&&f(n,["timeRangeFilter"],s),n}function fR(t,e){const n={},s=d(t,["aspectRatio"]);s!=null&&f(n,["aspectRatio"],s);const r=d(t,["imageSize"]);if(r!=null&&f(n,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function hR(t,e){const n={},s=d(t,["aspectRatio"]);s!=null&&f(n,["aspectRatio"],s);const r=d(t,["imageSize"]);r!=null&&f(n,["imageSize"],r);const l=d(t,["personGeneration"]);l!=null&&f(n,["personGeneration"],l);const c=d(t,["outputMimeType"]);c!=null&&f(n,["imageOutputOptions","mimeType"],c);const h=d(t,["outputCompressionQuality"]);return h!=null&&f(n,["imageOutputOptions","compressionQuality"],h),n}function pR(t,e){const n={},s=d(t,["bytesBase64Encoded"]);s!=null&&f(n,["imageBytes"],hi(s));const r=d(t,["mimeType"]);return r!=null&&f(n,["mimeType"],r),n}function Iv(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["gcsUri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&f(n,["imageBytes"],hi(r));const l=d(t,["mimeType"]);return l!=null&&f(n,["mimeType"],l),n}function ol(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=d(t,["imageBytes"]);s!=null&&f(n,["bytesBase64Encoded"],hi(s));const r=d(t,["mimeType"]);return r!=null&&f(n,["mimeType"],r),n}function ln(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["gcsUri"],s);const r=d(t,["imageBytes"]);r!=null&&f(n,["bytesBase64Encoded"],hi(r));const l=d(t,["mimeType"]);return l!=null&&f(n,["mimeType"],l),n}function mR(t,e,n,s){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const c=d(e,["pageToken"]);n!==void 0&&c!=null&&f(n,["_query","pageToken"],c);const h=d(e,["filter"]);n!==void 0&&h!=null&&f(n,["_query","filter"],h);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&f(n,["_url","models_url"],wv(t,g)),r}function gR(t,e,n,s){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const c=d(e,["pageToken"]);n!==void 0&&c!=null&&f(n,["_query","pageToken"],c);const h=d(e,["filter"]);n!==void 0&&h!=null&&f(n,["_query","filter"],h);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&f(n,["_url","models_url"],wv(t,g)),r}function yR(t,e,n){const s={},r=d(e,["config"]);return r!=null&&mR(t,r,s),s}function vR(t,e,n){const s={},r=d(e,["config"]);return r!=null&&gR(t,r,s),s}function _R(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let c=Av(l);Array.isArray(c)&&(c=c.map(h=>id(h))),f(n,["models"],c)}return n}function SR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let c=Av(l);Array.isArray(c)&&(c=c.map(h=>od(h))),f(n,["models"],c)}return n}function TR(t,e){const n={},s=d(t,["maskMode"]);s!=null&&f(n,["maskMode"],s);const r=d(t,["segmentationClasses"]);r!=null&&f(n,["maskClasses"],r);const l=d(t,["maskDilation"]);return l!=null&&f(n,["dilation"],l),n}function id(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["name"],s);const r=d(t,["displayName"]);r!=null&&f(n,["displayName"],r);const l=d(t,["description"]);l!=null&&f(n,["description"],l);const c=d(t,["version"]);c!=null&&f(n,["version"],c);const h=d(t,["_self"]);h!=null&&f(n,["tunedModelInfo"],LR(h));const g=d(t,["inputTokenLimit"]);g!=null&&f(n,["inputTokenLimit"],g);const p=d(t,["outputTokenLimit"]);p!=null&&f(n,["outputTokenLimit"],p);const v=d(t,["supportedGenerationMethods"]);v!=null&&f(n,["supportedActions"],v);const _=d(t,["temperature"]);_!=null&&f(n,["temperature"],_);const S=d(t,["maxTemperature"]);S!=null&&f(n,["maxTemperature"],S);const E=d(t,["topP"]);E!=null&&f(n,["topP"],E);const A=d(t,["topK"]);A!=null&&f(n,["topK"],A);const C=d(t,["thinking"]);return C!=null&&f(n,["thinking"],C),n}function od(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["name"],s);const r=d(t,["displayName"]);r!=null&&f(n,["displayName"],r);const l=d(t,["description"]);l!=null&&f(n,["description"],l);const c=d(t,["versionId"]);c!=null&&f(n,["version"],c);const h=d(t,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(E=>kb(E))),f(n,["endpoints"],S)}const g=d(t,["labels"]);g!=null&&f(n,["labels"],g);const p=d(t,["_self"]);p!=null&&f(n,["tunedModelInfo"],qR(p));const v=d(t,["defaultCheckpointId"]);v!=null&&f(n,["defaultCheckpointId"],v);const _=d(t,["checkpoints"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(E=>E)),f(n,["checkpoints"],S)}return n}function ER(t,e){const n={},s=d(t,["mediaResolution"]);s!=null&&f(n,["mediaResolution"],s);const r=d(t,["codeExecutionResult"]);r!=null&&f(n,["codeExecutionResult"],r);const l=d(t,["executableCode"]);l!=null&&f(n,["executableCode"],l);const c=d(t,["fileData"]);c!=null&&f(n,["fileData"],Ob(c));const h=d(t,["functionCall"]);h!=null&&f(n,["functionCall"],Pb(h));const g=d(t,["functionResponse"]);g!=null&&f(n,["functionResponse"],g);const p=d(t,["inlineData"]);p!=null&&f(n,["inlineData"],ab(p));const v=d(t,["text"]);v!=null&&f(n,["text"],v);const _=d(t,["thought"]);_!=null&&f(n,["thought"],_);const S=d(t,["thoughtSignature"]);S!=null&&f(n,["thoughtSignature"],S);const E=d(t,["videoMetadata"]);return E!=null&&f(n,["videoMetadata"],E),n}function wR(t,e){const n={},s=d(t,["productImage"]);return s!=null&&f(n,["image"],ln(s)),n}function AR(t,e,n){const s={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const c=d(t,["outputGcsUri"]);e!==void 0&&c!=null&&f(e,["parameters","storageUri"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const v=d(t,["addWatermark"]);e!==void 0&&v!=null&&f(e,["parameters","addWatermark"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const A=d(t,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),s}function CR(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["source"]);l!=null&&RR(l,s);const c=d(e,["config"]);return c!=null&&AR(c,s),s}function bR(t,e){const n={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>il(l))),f(n,["generatedImages"],r)}return n}function RR(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const l=d(t,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],ln(l));const c=d(t,["productImages"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>wR(g))),f(e,["instances[0]","productImages"],h)}return s}function NR(t,e){const n={},s=d(t,["referenceImage"]);s!=null&&f(n,["referenceImage"],ln(s));const r=d(t,["referenceId"]);r!=null&&f(n,["referenceId"],r);const l=d(t,["referenceType"]);l!=null&&f(n,["referenceType"],l);const c=d(t,["maskImageConfig"]);c!=null&&f(n,["maskImageConfig"],TR(c));const h=d(t,["controlImageConfig"]);h!=null&&f(n,["controlImageConfig"],pb(h));const g=d(t,["styleImageConfig"]);g!=null&&f(n,["styleImageConfig"],g);const p=d(t,["subjectImageConfig"]);return p!=null&&f(n,["subjectImageConfig"],p),n}function xv(t,e){const n={},s=d(t,["safetyAttributes","categories"]);s!=null&&f(n,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&f(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&f(n,["contentType"],l),n}function Dv(t,e){const n={},s=d(t,["safetyAttributes","categories"]);s!=null&&f(n,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&f(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&f(n,["contentType"],l),n}function MR(t,e){const n={},s=d(t,["category"]);if(s!=null&&f(n,["category"],s),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&f(n,["threshold"],r),n}function IR(t,e){const n={},s=d(t,["image"]);return s!=null&&f(n,["image"],ln(s)),n}function xR(t,e,n){const s={},r=d(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const c=d(t,["confidenceThreshold"]);e!==void 0&&c!=null&&f(e,["parameters","confidenceThreshold"],c);const h=d(t,["maskDilation"]);e!==void 0&&h!=null&&f(e,["parameters","maskDilation"],h);const g=d(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&f(e,["parameters","binaryColorThreshold"],g);const p=d(t,["labels"]);return e!==void 0&&p!=null&&f(e,["labels"],p),s}function DR(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["source"]);l!=null&&kR(l,s);const c=d(e,["config"]);return c!=null&&xR(c,s),s}function UR(t,e){const n={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>oR(l))),f(n,["generatedMasks"],r)}return n}function kR(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],ln(l));const c=d(t,["scribbleImage"]);return e!==void 0&&c!=null&&f(e,["instances[0]","scribble"],IR(c)),s}function OR(t,e){const n={},s=d(t,["retrievalConfig"]);s!=null&&f(n,["retrievalConfig"],s);const r=d(t,["functionCallingConfig"]);return r!=null&&f(n,["functionCallingConfig"],Lb(r)),n}function PR(t,e){const n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["computerUse"]);s!=null&&f(n,["computerUse"],s);const r=d(t,["fileSearch"]);r!=null&&f(n,["fileSearch"],r);const l=d(t,["codeExecution"]);if(l!=null&&f(n,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>S)),f(n,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(n,["googleMaps"],cR(h));const g=d(t,["googleSearch"]);g!=null&&f(n,["googleSearch"],dR(g));const p=d(t,["googleSearchRetrieval"]);p!=null&&f(n,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(n,["urlContext"],v),n}function Uv(t,e){const n={},s=d(t,["retrieval"]);s!=null&&f(n,["retrieval"],s);const r=d(t,["computerUse"]);if(r!=null&&f(n,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(n,["codeExecution"],l);const c=d(t,["enterpriseWebSearch"]);c!=null&&f(n,["enterpriseWebSearch"],c);const h=d(t,["functionDeclarations"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(E=>qb(E))),f(n,["functionDeclarations"],S)}const g=d(t,["googleMaps"]);g!=null&&f(n,["googleMaps"],g);const p=d(t,["googleSearch"]);p!=null&&f(n,["googleSearch"],p);const v=d(t,["googleSearchRetrieval"]);v!=null&&f(n,["googleSearchRetrieval"],v);const _=d(t,["urlContext"]);return _!=null&&f(n,["urlContext"],_),n}function LR(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&f(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&f(n,["updateTime"],l),n}function qR(t,e){const n={},s=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&f(n,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&f(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&f(n,["updateTime"],l),n}function BR(t,e,n){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const c=d(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&f(e,["defaultCheckpointId"],c),s}function GR(t,e,n){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const c=d(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&f(e,["defaultCheckpointId"],c),s}function HR(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","name"],Ce(t,r));const l=d(e,["config"]);return l!=null&&BR(l,s),s}function VR(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["config"]);return l!=null&&GR(l,s),s}function zR(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const c=d(t,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&f(e,["parameters","includeRaiReason"],h);const g=d(t,["outputMimeType"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","mimeType"],g);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const v=d(t,["enhanceInputImage"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],v);const _=d(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const S=d(t,["labels"]);e!==void 0&&S!=null&&f(e,["labels"],S);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const A=d(t,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),s}function FR(t,e,n){const s={},r=d(e,["model"]);r!=null&&f(s,["_url","model"],Ce(t,r));const l=d(e,["image"]);l!=null&&f(s,["instances[0]","image"],ln(l));const c=d(e,["upscaleFactor"]);c!=null&&f(s,["parameters","upscaleConfig","upscaleFactor"],c);const h=d(e,["config"]);return h!=null&&zR(h,s),s}function $R(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>il(c))),f(n,["generatedImages"],l)}return n}function JR(t,e){const n={},s=d(t,["uri"]);s!=null&&f(n,["uri"],s);const r=d(t,["encodedVideo"]);r!=null&&f(n,["videoBytes"],hi(r));const l=d(t,["encoding"]);return l!=null&&f(n,["mimeType"],l),n}function YR(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["uri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&f(n,["videoBytes"],hi(r));const l=d(t,["mimeType"]);return l!=null&&f(n,["mimeType"],l),n}function KR(t,e){const n={},s=d(t,["image"]);s!=null&&f(n,["_self"],ln(s));const r=d(t,["maskMode"]);return r!=null&&f(n,["maskMode"],r),n}function XR(t,e){const n={},s=d(t,["image"]);s!=null&&f(n,["image"],ol(s));const r=d(t,["referenceType"]);return r!=null&&f(n,["referenceType"],r),n}function WR(t,e){const n={},s=d(t,["image"]);s!=null&&f(n,["image"],ln(s));const r=d(t,["referenceType"]);return r!=null&&f(n,["referenceType"],r),n}function kv(t,e){const n={},s=d(t,["uri"]);s!=null&&f(n,["uri"],s);const r=d(t,["videoBytes"]);r!=null&&f(n,["encodedVideo"],hi(r));const l=d(t,["mimeType"]);return l!=null&&f(n,["encoding"],l),n}function Ov(t,e){const n={},s=d(t,["uri"]);s!=null&&f(n,["gcsUri"],s);const r=d(t,["videoBytes"]);r!=null&&f(n,["bytesBase64Encoded"],hi(r));const l=d(t,["mimeType"]);return l!=null&&f(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QR(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),n}function ZR(t){const e={},n=d(t,["config"]);return n!=null&&QR(n,e),e}function jR(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function eN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&jR(s,e),e}function tN(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function nN(t,e){const n={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function iN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],sN(c)),e}function oN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const r=d(t,["config"]);return r!=null&&nN(r,e),e}function sN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function rN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function aN(t){const e={},n=d(t,["config"]);return n!=null&&rN(n,e),e}function lN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function Pv(t,e){const n={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),n}function uN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["config"]);return s!=null&&Pv(s,e),e}function cN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dN="Content-Type",fN="X-Server-Timeout",hN="User-Agent",sd="x-goog-api-client",pN="1.39.0",mN=`google-genai-sdk/${pN}`,gN="v1beta1",yN="v1beta";class vN{constructor(e){var n,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:gN}else{if(!this.clientOptions.apiKey)throw new nr({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:yN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===jc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,r){if(n&&n.timeout||r){const l=new AbortController,c=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>l.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return n&&n.extraBody!==null&&_N(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Ty(r),new ed(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Ty(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return rn(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield ue(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const A=JSON.parse(_);if("error"in A){const C=JSON.parse(JSON.stringify(A.error)),R=C.status,U=C.code,D=`got status: ${R}. ${JSON.stringify(A)}`;if(U>=400&&U<600)throw new nr({message:D,status:U})}}catch(A){if(A.name==="ApiError")throw A}c+=_;let S=-1,E=0;for(;;){S=-1,E=0;for(const R of g){const U=c.indexOf(R);U!==-1&&(S===-1||U<S)&&(S=U,E=R.length)}if(S===-1)break;const A=c.substring(0,S);c=c.substring(S+E);const C=A.trim();if(C.startsWith(h)){const R=C.substring(h.length).trim();try{const U=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ue(new ed(U))}catch(U){throw new Error(`exception parsing stream chunk ${R}. ${U}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=mN+" "+this.clientOptions.userAgentExtra;return e[hN]=n,e[sd]=n,e[dN]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(fN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},p=this.getFileName(e),v=W("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,g,n==null?void 0:n.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,s){var r;const l=this.clientOptions.uploader,c=await l.stat(n),h=String(c.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),_={};s!=null&&Pv(s,_);const S=await this.fetchUploadUrl(p,h,g,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,r,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Ty(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new nr({message:r,status:n}):new Error(r)}}function _N(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN="mcp_used/unknown";let TN=!1;function Lv(t){for(const e of t)if(EN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TN}function qv(t){var e;const n=(e=t[sd])!==null&&e!==void 0?e:"";t[sd]=(n+` ${SN}`).trimStart()}function EN(t){return t!==null&&typeof t=="object"&&t instanceof Id}function wN(t){return rn(this,arguments,function*(n,s=100){let r,l=0;for(;l<s;){const c=yield ue(n.listTools({cursor:r}));for(const h of c.tools)yield yield ue(h),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class Id{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Id(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(n=void 0,an(wN(v))),p;p=await g.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const _=r;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){n={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Zw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AN(t,e,n){const s=new Fw;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(s,r),e(s)}class CN{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=NN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(I=>{p=I}),_=e.callbacks,S=function(){p({})},E=this.apiClient,A={onopen:S,onmessage:I=>{AN(E,_.onmessage,I)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(I){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(I){}},C=this.webSocketFactory.create(g,RN(c),A);C.connect(),await v;const D={setup:{model:Ce(this.apiClient,e.model)}};return C.send(JSON.stringify(D)),new bN(C,this.apiClient)}}class bN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=QC(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=WC(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bo.PLAY)}pause(){this.sendPlaybackControl(Bo.PAUSE)}stop(){this.sendPlaybackControl(Bo.STOP)}resetContext(){this.sendPlaybackControl(Bo.RESET_CONTEXT)}close(){this.conn.close()}}function RN(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function NN(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function IN(t,e,n){const s=new zw;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=eb(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class xN{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new CN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Lv(e.config.tools)&&qv(_);const S=ON(_);if(this.apiClient.isVertexAI()){const K=this.apiClient.getProject(),te=this.apiClient.getLocation(),pe=this.apiClient.getApiKey(),Ee=!!K&&!!te||!!pe;this.apiClient.getCustomBaseUrl()&&!Ee?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const K=this.apiClient.getApiKey();let te="BidiGenerateContent",pe="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),te="BidiGenerateContentConstrained",pe="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${te}?${pe}=${K}`}let E=()=>{};const A=new Promise(K=>{E=K}),C=e.callbacks,R=function(){var K;(K=C==null?void 0:C.onopen)===null||K===void 0||K.call(C),E({})},U=this.apiClient,D={onopen:R,onmessage:K=>{IN(U,C.onmessage,K)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(K){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(K){}},I=this.webSocketFactory.create(v,kN(S),D);I.connect(),await A;let L=Ce(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const K=this.apiClient.getProject(),te=this.apiClient.getLocation();K&&te&&(L=`projects/${K}/locations/${te}/`+L)}let q={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ja.AUDIO]}:e.config.responseModalities=[Ja.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],H=[];for(const K of Y)if(this.isCallableTool(K)){const te=K;H.push(await te.tool())}else H.push(K);H.length>0&&(e.config.tools=H);const oe={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=XC(this.apiClient,oe):q=KC(this.apiClient,oe),delete q.config,I.send(JSON.stringify(q)),new UN(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const DN={turnComplete:!0};class UN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Qt(n.turns),e.isVertexAI()||(s=s.map(r=>nl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(MN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},DN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:jC(e)}:n={realtimeInput:ZC(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function kN(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function ON(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ey=10;function wy(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(zo(c)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zo(t){return"callTool"in t&&typeof t.callTool=="function"}function PN(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>zo(r)))!==null&&s!==void 0?s:!1}function Ay(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(zo(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function Cy(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LN extends kn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!PN(n)||wy(n.config))return await this.generateContentInternal(g);const p=Ay(n);if(p.length>0){const C=p.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let v,_;const S=Qt(g.contents),E=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Ey;let A=0;for(;A<E&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const C=v.candidates[0].content,R=[];for(const U of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(zo(U)){const I=await U.callTool(v.functionCalls);R.push(...I)}A++,_={role:"user",parts:R},g.contents=Qt(g.contents),g.contents.push(C),g.contents.push(_),Cy(g.config)&&(S.push(C),S.push(_))}return Cy(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var s,r,l,c,h;if(this.maybeMoveToResponseJsonSchem(n),wy(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const g=Ay(n);if(g.length>0){const _=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async n=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Vi(Un.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var s,r,l,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>zo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&Lv(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),qv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const c of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(zo(c)){const h=c,g=await h.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Ey;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,_){return rn(this,arguments,function*(){for(var S,E,A,C,R,U;h<l;){c&&(h++,c=!1);const q=yield ue(p.processParamsMaybeAddMcpUsage(_)),Y=yield ue(p.generateContentStreamInternal(q)),H=[],oe=[];try{for(var D=!0,I=(E=void 0,an(Y)),L;L=yield ue(I.next()),S=L.done,!S;D=!0){C=L.value,D=!1;const K=C;if(yield yield ue(K),K.candidates&&(!((R=K.candidates[0])===null||R===void 0)&&R.content)){oe.push(K.candidates[0].content);for(const te of(U=K.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(h<l&&te.functionCall){if(!te.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(te.functionCall.name)){const pe=yield ue(v.get(te.functionCall.name).callTool([te.functionCall]));H.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${te.functionCall.name}`)}}}}catch(K){E={error:K}}finally{try{!D&&!S&&(A=I.return)&&(yield ue(A.call(I)))}finally{if(E)throw E.error}}if(H.length>0){c=!0;const K=new Ks;K.candidates=[{content:{role:"user",parts:H}}],yield yield ue(K);const te=[];te.push(...oe),te.push({role:"user",parts:H});const pe=Qt(_.contents).concat(te);_.contents=pe}else break}})})(this,g,e)}async generateContentInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vy(this.apiClient,e);return h=W("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Sy(v),S=new Ks;return Object.assign(S,_),S})}else{const p=yy(this.apiClient,e);return h=W("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=_y(v),S=new Ks;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vy(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return rn(this,arguments,function*(){var S,E,A,C;try{for(var R=!0,U=an(_),D;D=yield ue(U.next()),S=D.done,!S;R=!0){C=D.value,R=!1;const I=C,L=Sy(yield ue(I.json()),e);L.sdkHttpResponse={headers:I.headers};const q=new Ks;Object.assign(q,L),yield yield ue(q)}}catch(I){E={error:I}}finally{try{!R&&!S&&(A=U.return)&&(yield ue(A.call(U)))}finally{if(E)throw E.error}}})})}else{const p=yy(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return rn(this,arguments,function*(){var S,E,A,C;try{for(var R=!0,U=an(_),D;D=yield ue(U.next()),S=D.done,!S;R=!0){C=D.value,R=!1;const I=C,L=_y(yield ue(I.json()),e);L.sdkHttpResponse={headers:I.headers};const q=new Ks;Object.assign(q,L),yield yield ue(q)}}catch(I){E={error:I}}finally{try{!R&&!S&&(A=U.return)&&(yield ue(A.call(U)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=xb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Ub(v),S=new ey;return Object.assign(S,_),S})}else{const p=Ib(this.apiClient,e);return h=W("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Db(v),S=new ey;return Object.assign(S,_),S})}}async generateImagesInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Fb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Jb(v),S=new ty;return Object.assign(S,_),S})}else{const p=zb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=$b(v),S=new ty;return Object.assign(S,_),S})}}async editImageInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=bb(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=Rb(g),v=new xw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=FR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=$R(g),v=new Dw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=CR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=bR(g),v=new Uw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=DR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=UR(g),v=new kw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>od(v))}else{const p=lR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>id(v))}}async listInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vR(this.apiClient,e);return h=W("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=SR(v),S=new ny;return Object.assign(S,_),S})}else{const p=yR(this.apiClient,e);return h=W("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=_R(v),S=new ny;return Object.assign(S,_),S})}}async update(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=VR(this.apiClient,e);return h=W("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>od(v))}else{const p=HR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>id(v))}}async delete(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Eb(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Ab(v),S=new iy;return Object.assign(S,_),S})}else{const p=Tb(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=wb(v),S=new iy;return Object.assign(S,_),S})}}async countTokens(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vb(this.apiClient,e);return h=W("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Sb(v),S=new oy;return Object.assign(S,_),S})}else{const p=yb(this.apiClient,e);return h=W("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=_b(v),S=new oy;return Object.assign(S,_),S})}}async computeTokens(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=cb(this.apiClient,e);return l=W("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=db(g),v=new Ow;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Zb(this.apiClient,e);return h=W("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Wb(v),S=new Ya;return Object.assign(S,_),S})}else{const p=Qb(this.apiClient,e);return h=W("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Xb(v),S=new Ya;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qN extends kn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Cw(e);return h=W("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=Aw(e);return h=W("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=yw(e);return l=W("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function GN(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>XN(l))),f(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function HN(t,e,n){const s={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&f(n,["newSessionExpireTime"],l);const c=d(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=d(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],KN(t,h));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&f(n,["fieldMask"],g),s}function VN(t,e){const n={},s=d(e,["config"]);return s!=null&&f(n,["config"],HN(t,s,n)),n}function zN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function FN(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $N(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function JN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function YN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Md(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],GN(mt(A)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let Y=Yo(C);Array.isArray(Y)&&(Y=Y.map(H=>QN(Jo(H)))),f(e,["setup","tools"],Y)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],WN(R));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&f(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function KN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Ce(t,s));const r=d(e,["config"]);return r!=null&&f(n,["config"],YN(r,n)),n}function XN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],zN(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],FN(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],BN(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function WN(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],$N(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],JN(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function jN(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=ZN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class eM extends kn{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=VN(this.apiClient,e);l=W("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=jN(h,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tM(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function nM(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&tM(s,e),e}function iM(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function oM(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function sM(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const s=d(t,["config"]);return s!=null&&oM(s,e),e}function rM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aM extends kn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Vi(Un.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=iM(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nM(e);r=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sM(e);return l=W("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=rM(g),v=new Pw;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lM extends kn{constructor(e,n=new aM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Vi(Un.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZR(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tN(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eN(e);r=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aN(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=lN(g),v=new Lw;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uN(e);return l=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=cN(g),v=new qw;return Object.assign(v,p),v})}}async importFile(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=oN(e);return l=W("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=iN(g),v=new Ad;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Bv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Bv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const uM=()=>Bv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ad=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zt extends Error{}class St extends Zt{constructor(e,n,s,r){super(`${St.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,s){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new sl({message:s,cause:ad(n)});const l=n;return e===400?new Hv(e,l,s,r):e===401?new Vv(e,l,s,r):e===403?new zv(e,l,s,r):e===404?new Fv(e,l,s,r):e===409?new $v(e,l,s,r):e===422?new Jv(e,l,s,r):e===429?new Yv(e,l,s,r):e>=500?new Kv(e,l,s,r):new St(e,l,s,r)}}class ld extends St{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class sl extends St{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Gv extends sl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Hv extends St{}class Vv extends St{}class zv extends St{}class Fv extends St{}class $v extends St{}class Jv extends St{}class Yv extends St{}class Kv extends St{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cM=/^[a-z][a-z0-9+.-]*:/i,dM=t=>cM.test(t);let ud=t=>(ud=Array.isArray,ud(t));const fM=ud;let hM=fM;const by=hM;function pM(t){if(!t)return!0;for(const e in t)return!1;return!0}function mM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const gM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zt(`${t} must be an integer`);if(e<0)throw new Zt(`${t} must be a positive integer`);return e},yM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _M(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const SM=()=>{var t,e,n,s,r;const l=_M();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oo,"X-Stainless-OS":Ny(Deno.build.os),"X-Stainless-Arch":Ry(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oo,"X-Stainless-OS":Ny((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Ry((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=TM();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const Ry=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ny=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ma;const EM=()=>Ma??(Ma=SM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Xv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function AM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Xv({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Wv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qv=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bc(t,e,n){return Qv(),new File(t,e??"unknown_file",n)}function RM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const NM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",MM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Zv(t),IM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function xM(t,e,n){if(Qv(),t=await t,MM(t))return t instanceof File?t:Bc([await t.arrayBuffer()],t.name);if(IM(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Bc(await cd(r),e,n)}const s=await cd(t);if(e||(e=RM(t)),!(n!=null&&n.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Bc(s,e,n)}async function cd(t){var e,n,s,r,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(Zv(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(NM(t))try{for(var h=!0,g=an(t),p;p=await g.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const v=r;c.push(...await cd(v))}}catch(v){n={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${DM(t)}`)}return c}function DM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jv{constructor(e){this._client=e}}jv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const My=Object.freeze(Object.create(null)),UM=(t=e0)=>(function(n,...s){if(n.length===1)return n[0];let r=!1;const l=[],c=n.reduce((v,_,S)=>{var E,A,C;/[?#]/.test(_)&&(r=!0);const R=s[S];let U=(r?encodeURIComponent:t)(""+R);return S!==s.length&&(R==null||typeof R=="object"&&R.toString===((C=Object.getPrototypeOf((A=Object.getPrototypeOf((E=R.hasOwnProperty)!==null&&E!==void 0?E:My))!==null&&A!==void 0?A:My))===null||C===void 0?void 0:C.toString))&&(U=R+"",l.push({start:v.length+_.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),v+_+(S===s.length?"":U)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,E)=>{const A=" ".repeat(E.start-v),C="^".repeat(E.length);return v=E.start+E.length,S+A+C},"");throw new Zt(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),Ia=UM(e0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t0 extends jv{create(e,n){var s;const{api_version:r=this._client.apiVersion}=e,l=Xa(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Zt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Zt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ia`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ia`/${r}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ia`/${r}/interactions/${e}/cancel`,s)}get(e,n={},s){var r;const l=n??{},{api_version:c=this._client.apiVersion}=l,h=Xa(l,["api_version"]);return this._client.get(Ia`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}t0._key=Object.freeze(["interactions"]);class n0 extends t0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kM(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let xa;function xd(t){let e;return(xa??(e=new globalThis.TextEncoder,xa=e.encode.bind(e)))(t)}let Da;function Iy(t){let e;return(Da??(e=new globalThis.TextDecoder,Da=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xd(e):e;this.buffer=kM([this.buffer,n]);const s=[];let r;for(;(r=OM(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Iy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Iy(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}rl.NEWLINE_CHARS=new Set([`
`,"\r"]);rl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function OM(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function PM(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wa={off:0,error:200,warn:300,info:400,debug:500},xy=(t,e,n)=>{if(t){if(mM(Wa,t))return t;_t(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wa))}`)}};function Zs(){}function Ua(t,e,n){return!e||Wa[t]>Wa[n]?Zs:e[t].bind(e)}const LM={error:Zs,warn:Zs,info:Zs,debug:Zs};let Dy=new WeakMap;function _t(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return LM;const r=Dy.get(n);if(r&&r[0]===s)return r[1];const l={error:Ua("error",n,s),warn:Ua("warn",n,s),info:Ua("info",n,s),debug:Ua("debug",n,s)};return Dy.set(n,[s,l]),l}const Li=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Go{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let r=!1;const l=s?_t(s):console;function c(){return rn(this,arguments,function*(){var g,p,v,_;if(r)throw new Zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,A=an(qM(e,n)),C;C=yield ue(A.next()),g=C.done,!g;E=!0){_=C.value,E=!1;const R=_;if(!S)if(R.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield ue(JSON.parse(R.data))}catch(U){throw l.error("Could not parse message into JSON:",R.data),l.error("From chunk:",R.raw),U}}}catch(R){p={error:R}}finally{try{!E&&!g&&(v=A.return)&&(yield ue(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(R){if(rd(R))return yield ue(void 0);throw R}finally{S||n.abort()}})}return new Go(c,n,s)}static fromReadableStream(e,n,s){let r=!1;function l(){return rn(this,arguments,function*(){var g,p,v,_;const S=new rl,E=Wv(e);try{for(var A=!0,C=an(E),R;R=yield ue(C.next()),g=R.done,!g;A=!0){_=R.value,A=!1;const U=_;for(const D of S.decode(U))yield yield ue(D)}}catch(U){p={error:U}}finally{try{!A&&!g&&(v=C.return)&&(yield ue(v.call(C)))}finally{if(p)throw p.error}}for(const U of S.flush())yield yield ue(U)})}function c(){return rn(this,arguments,function*(){var g,p,v,_;if(r)throw new Zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,A=an(l()),C;C=yield ue(A.next()),g=C.done,!g;E=!0){_=C.value,E=!1;const R=_;S||R&&(yield yield ue(JSON.parse(R)))}}catch(R){p={error:R}}finally{try{!E&&!g&&(v=A.return)&&(yield ue(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(R){if(rd(R))return yield ue(void 0);throw R}finally{S||n.abort()}})}return new Go(c,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new Go(()=>r(e),this.controller,this.client),new Go(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Xv({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await n.next();if(l)return s.close();const c=xd(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function qM(t,e){return rn(this,arguments,function*(){var s,r,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zt("Attempted to iterate over a response with no body");const h=new GM,g=new rl,p=Wv(t.body);try{for(var v=!0,_=an(BM(p)),S;S=yield ue(_.next()),s=S.done,!s;v=!0){c=S.value,v=!1;const E=c;for(const A of g.decode(E)){const C=h.decode(A);C&&(yield yield ue(C))}}}catch(E){r={error:E}}finally{try{!v&&!s&&(l=_.return)&&(yield ue(l.call(_)))}finally{if(r)throw r.error}}for(const E of g.flush()){const A=h.decode(E);A&&(yield yield ue(A))}})}function BM(t){return rn(this,arguments,function*(){var n,s,r,l;let c=new Uint8Array;try{for(var h=!0,g=an(t),p;p=yield ue(g.next()),n=p.done,!n;h=!0){l=p.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?xd(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let E;for(;(E=PM(c))!==-1;)yield yield ue(c.slice(0,E)),c=c.slice(E)}}catch(v){s={error:v}}finally{try{!h&&!n&&(r=g.return)&&(yield ue(r.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield ue(c))})}class GM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=HM(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function HM(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VM(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return _t(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Go.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return _t(t).debug(`[${s}] response parsed`,Li({retryOfRequestLogID:r,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dd extends Promise{constructor(e,n,s=VM){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Dd(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i0=Symbol("brand.privateNullableHeaders");function*zM(t){if(!t)return;if(i0 in t){const{values:s,nulls:r}=t;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():by(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=by(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const Xs=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[l,c]of zM(s)){const h=l.toLowerCase();r.has(h)||(e.delete(l),r.add(h)),c===null?(e.delete(l),n.add(h)):(e.append(l,c),n.delete(h))}}return{[i0]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gc=t=>{var e,n,s,r,l,c;if(typeof globalThis.process<"u")return(s=(n=(e=dw)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var o0;class al{constructor(e){var n,s,r,l,c,h,g,{baseURL:p=Gc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Gc("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=e,S=Xa(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:v,apiVersion:_},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:al.DEFAULT_TIMEOUT,this.logger=(r=E.logger)!==null&&r!==void 0?r:console;const A="warn";this.logLevel=A,this.logLevel=(c=(l=xy(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:xy(Gc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:A,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=E.fetch)!==null&&g!==void 0?g:wM(),this.encoder=bM,this._options=E,this.apiKey=v,this.apiVersion=_,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Xs([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new Zt(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Oo}`}defaultIdempotencyKey(){return`stainless-node-retry-${uM()}`}makeStatusError(e,n,s,r){return St.generate(e,n,s,r)}buildURL(e,n,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=dM(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return pM(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Dd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var r,l,c;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:p,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(p,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,A=Date.now();if(_t(this).debug(`[${S}] sending request`,Li({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:p.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new ld;const C=new AbortController,R=await this.fetchWithTimeout(v,p,_,C).catch(ad),U=Date.now();if(R instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new ld;const L=rd(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(n)return _t(this).info(`[${S}] connection ${L?"timed out":"failed"} - ${I}`),_t(this).debug(`[${S}] connection ${L?"timed out":"failed"} (${I})`,Li({retryOfRequestLogID:s,url:v,durationMs:U-A,message:R.message})),this.retryRequest(h,n,s??S);throw _t(this).info(`[${S}] connection ${L?"timed out":"failed"} - error; no more retries left`),_t(this).debug(`[${S}] connection ${L?"timed out":"failed"} (error; no more retries left)`,Li({retryOfRequestLogID:s,url:v,durationMs:U-A,message:R.message})),L?new Gv:new sl({cause:R})}const D=`[${S}${E}] ${p.method} ${v} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${U-A}ms`;if(!R.ok){const I=await this.shouldRetry(R);if(n&&I){const K=`retrying, ${n} attempts remaining`;return await CM(R.body),_t(this).info(`${D} - ${K}`),_t(this).debug(`[${S}] response error (${K})`,Li({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,durationMs:U-A})),this.retryRequest(h,n,s??S,R.headers)}const L=I?"error; no more retries left":"error; not retryable";_t(this).info(`${D} - ${L}`);const q=await R.text().catch(K=>ad(K).message),Y=yM(q),H=Y?void 0:q;throw _t(this).debug(`[${S}] response error (${L})`,Li({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,message:H,durationMs:Date.now()-A})),this.makeStatusError(R.status,Y,H,R.headers)}return _t(this).info(D),_t(this).debug(`[${S}] response start`,Li({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,durationMs:U-A})),{response:R,options:h,controller:C,requestLogID:S,retryOfRequestLogID:s,startTime:A}}async fetchWithTimeout(e,n,s,r){const l=n||{},{signal:c,method:h}=l,g=Xa(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){var l;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,p)}return await vM(c),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,r,l;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,_=this.buildURL(g,p,v);"timeout"in c&&gM("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:E}=this.buildBody({options:c}),A=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:A},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Xs([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),EM()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Xs([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:AM(e)}:this.encoder({body:e,headers:s})}}al.DEFAULT_TIMEOUT=6e4;class st extends al{constructor(){super(...arguments),this.interactions=new n0(this)}}o0=st;st.GeminiNextGenAPIClient=o0;st.GeminiNextGenAPIClientError=Zt;st.APIError=St;st.APIConnectionError=sl;st.APIConnectionTimeoutError=Gv;st.APIUserAbortError=ld;st.NotFoundError=Fv;st.ConflictError=$v;st.RateLimitError=Yv;st.BadRequestError=Hv;st.AuthenticationError=Vv;st.InternalServerError=Kv;st.PermissionDeniedError=zv;st.UnprocessableEntityError=Jv;st.toFile=xM;st.Interactions=n0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FM(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function $M(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function JM(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function YM(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function KM(t,e,n){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function XM(t,e,n){const s={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec"],Hc(q))}else if(r==="PREFERENCE_TUNING"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&f(e,["preferenceOptimizationSpec"],Hc(q))}else if(r==="DISTILLATION"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&f(e,["distillationSpec"],Hc(q))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],q)}else if(h==="PREFERENCE_TUNING"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],q)}else if(h==="DISTILLATION"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],q)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],q)}else if(g==="PREFERENCE_TUNING"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],q)}else if(g==="DISTILLATION"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],q)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],q)}else if(p==="PREFERENCE_TUNING"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],q)}else if(p==="DISTILLATION"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],q)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],q)}else if(v==="PREFERENCE_TUNING"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],q)}else if(v==="DISTILLATION"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],q)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const q=d(t,["tuningMode"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","tuningMode"],q)}const S=d(t,["customBaseModel"]);e!==void 0&&S!=null&&f(e,["customBaseModel"],S);let E=d(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const q=d(t,["batchSize"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],q)}let A=d(n,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const q=d(t,["learningRate"]);e!==void 0&&q!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],q)}const C=d(t,["labels"]);e!==void 0&&C!=null&&f(e,["labels"],C);const R=d(t,["beta"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],R);const U=d(t,["baseTeacherModel"]);e!==void 0&&U!=null&&f(e,["distillationSpec","baseTeacherModel"],U);const D=d(t,["tunedTeacherModelSource"]);e!==void 0&&D!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],D);const I=d(t,["sftLossWeightMultiplier"]);e!==void 0&&I!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const L=d(t,["outputUri"]);return e!==void 0&&L!=null&&f(e,["outputUri"],L),s}function WM(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&aI(l);const c=d(t,["config"]);return c!=null&&KM(c,n),n}function QM(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&lI(l,n,e);const c=d(t,["config"]);return c!=null&&XM(c,n,e),n}function ZM(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function jM(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function eI(t,e,n){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function tI(t,e,n){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function nI(t,e){const n={},s=d(t,["config"]);return s!=null&&eI(s,n),n}function iI(t,e){const n={},s=d(t,["config"]);return s!=null&&tI(s,n),n}function oI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>s0(h))),f(n,["tuningJobs"],c)}return n}function sI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>dd(h))),f(n,["tuningJobs"],c)}return n}function rI(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["model"],s);const r=d(t,["name"]);return r!=null&&f(n,["endpoint"],r),n}function aI(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),f(n,["examples","examples"],r)}return n}function lI(t,e,n){const s={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(r==="DISTILLATION"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["distillationSpec","promptDatasetUri"],c)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(l==="DISTILLATION"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["distillationSpec","promptDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function s0(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const l=d(t,["state"]);l!=null&&f(n,["state"],Tv(l));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["description"]);v!=null&&f(n,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(n,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&f(n,["tunedModel"],rI(S)),n}function dd(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const l=d(t,["state"]);l!=null&&f(n,["state"],Tv(l));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["error"]);v!=null&&f(n,["error"],v);const _=d(t,["description"]);_!=null&&f(n,["description"],_);const S=d(t,["baseModel"]);S!=null&&f(n,["baseModel"],S);const E=d(t,["tunedModel"]);E!=null&&f(n,["tunedModel"],E);const A=d(t,["preTunedModel"]);A!=null&&f(n,["preTunedModel"],A);const C=d(t,["supervisedTuningSpec"]);C!=null&&f(n,["supervisedTuningSpec"],C);const R=d(t,["preferenceOptimizationSpec"]);R!=null&&f(n,["preferenceOptimizationSpec"],R);const U=d(t,["distillationSpec"]);U!=null&&f(n,["distillationSpec"],U);const D=d(t,["tuningDataStats"]);D!=null&&f(n,["tuningDataStats"],D);const I=d(t,["encryptionSpec"]);I!=null&&f(n,["encryptionSpec"],I);const L=d(t,["partnerModelTuningSpec"]);L!=null&&f(n,["partnerModelTuningSpec"],L);const q=d(t,["customBaseModel"]);q!=null&&f(n,["customBaseModel"],q);const Y=d(t,["experiment"]);Y!=null&&f(n,["experiment"],Y);const H=d(t,["labels"]);H!=null&&f(n,["labels"],H);const oe=d(t,["outputUri"]);oe!=null&&f(n,["outputUri"],oe);const K=d(t,["pipelineJob"]);K!=null&&f(n,["pipelineJob"],K);const te=d(t,["serviceAccount"]);te!=null&&f(n,["serviceAccount"],te);const pe=d(t,["tunedModelDisplayName"]);pe!=null&&f(n,["tunedModelDisplayName"],pe);const Ee=d(t,["veoTuningSpec"]);return Ee!=null&&f(n,["veoTuningSpec"],Ee),n}function uI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const l=d(t,["metadata"]);l!=null&&f(n,["metadata"],l);const c=d(t,["done"]);c!=null&&f(n,["done"],c);const h=d(t,["error"]);return h!=null&&f(n,["error"],h),n}function Hc(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["validationDatasetUri"],s);const r=d(t,["vertexDatasetResource"]);return r!=null&&f(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cI extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vi(Un.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Zc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jM(e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>dd(v))}else{const p=ZM(e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>s0(v))}}async listInternal(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iI(e);return h=W("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=sI(v),S=new sy;return Object.assign(S,_),S})}else{const p=nI(e);return h=W("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=oI(v),S=new sy;return Object.assign(S,_),S})}}async cancel(e){var n,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=$M(e);return h=W("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=YM(v),S=new ry;return Object.assign(S,_),S})}else{const p=FM(e);return h=W("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=JM(v),S=new ry;return Object.assign(S,_),S})}}async tuneInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=QM(e,e);return l=W("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>dd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=WM(e);return l=W("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>uI(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dI{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fI=1024*1024*8,hI=3,pI=1e3,mI=2,Qa="x-goog-upload-status";async function gI(t,e,n){var s;const r=await r0(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function yI(t,e,n){var s;const r=await r0(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=mv(l),h=new Cd;return Object.assign(h,c),h}async function r0(t,e,n){var s,r;let l=0,c=0,h=new ed(new Response),g="upload";for(l=t.size;c<l;){const p=Math.min(fI,l-c),v=t.slice(c,c+p);c+p>=l&&(g+=", finalize");let _=0,S=pI;for(;_<hI&&(h=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Qa]));)_++,await _I(S),S=S*mI;if(c+=p,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[Qa])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function vI(t){return{size:t.size,type:t.type}}function _I(t){return new Promise(e=>setTimeout(e,t))}class SI{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gI(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yI(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI{create(e,n,s){return new EI(e,n,s)}}class EI{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uy="x-goog-api-key";class wI{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Uy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Uy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AI="gl-node/";class CI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new st({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=mw(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new wI(this.apiKey);this.apiClient=new vN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:AI+"web",uploader:new SI,downloader:new dI}),this.models=new LN(this.apiClient),this.live=new xN(this.apiClient,r,new TI),this.batches=new $A(this.apiClient),this.chats=new bC(this.models,this.apiClient),this.caches=new wC(this.apiClient),this.files=new qC(this.apiClient),this.operations=new qN(this.apiClient),this.authTokens=new eM(this.apiClient),this.tunings=new cI(this.apiClient),this.fileSearchStores=new lM(this.apiClient)}}const bI=async(t,e)=>{const n=new CI({apiKey:"PLACEHOLDER_API_KEY"}),s=`You are a scheduling assistant. Your sole task is to extract event titles and times from user memos.
  Today is: ${e} (CDT Timezone).

  STRICT PARSING RULES:
  1. If input is "2pm tree", TITLE="tree", TIME="14:00", DATE="${e}".
  2. If input is "11am ", TITLE="", TIME="11:00", DATE="${e}".
  3. If input is "tomorrow 9am coffee", TITLE="coffee", TIME="09:00", DATE="Calculated tomorrow date based on ${e}".
  4. DEFAULT DURATION: 1 hour.
  5. Always return times in HH:mm 24-hour format.
  6. Output must be a valid JSON object with an 'events' array.`;try{const l=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Memo: "${t}"`,config:{systemInstruction:s,responseMimeType:"application/json",responseSchema:{type:pt.OBJECT,properties:{events:{type:pt.ARRAY,items:{type:pt.OBJECT,properties:{title:{type:pt.STRING},date:{type:pt.STRING},startTime:{type:pt.STRING},endTime:{type:pt.STRING},category:{type:pt.STRING,enum:["work","personal","health","other"]}},required:["title","date","startTime","endTime"]}}},required:["events"]}}})).text;if(!l)throw new Error("Empty response");return JSON.parse(l)}catch(r){return console.error("AI Parsing Error:",r),{events:[]}}};function ll(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function RI(t,e,n,s){function r(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(v){try{p(s.next(v))}catch(_){c(_)}}function g(v){try{p(s.throw(v))}catch(_){c(_)}}function p(v){v.done?l(v.value):r(v.value).then(h,g)}p((s=s.apply(t,e||[])).next())})}const NI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ud extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class MI extends Ud{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ky extends Ud{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Oy extends Ud{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fd||(fd={}));class II{constructor(e,{headers:n={},customFetch:s,region:r=fd.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=NI(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return RI(this,arguments,void 0,function*(n,s={}){var r;let l,c;try{const{headers:h,method:g,body:p,signal:v,timeout:_}=s;let S={},{region:E}=s;E||(E=this.region);const A=new URL(`${this.url}/${n}`);E&&E!=="any"&&(S["x-region"]=E,A.searchParams.set("forceFunctionRegion",E));let C;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(S["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(S["Content-Type"]="application/json",C=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?C=JSON.stringify(p):C=p;let R=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(R=c.signal,v.addEventListener("abort",()=>c.abort())):R=c.signal);const U=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:C,signal:R}).catch(q=>{throw new MI(q)}),D=U.headers.get("x-relay-error");if(D&&D==="true")throw new ky(U);if(!U.ok)throw new Oy(U);let I=((r=U.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),L;return I==="application/json"?L=yield U.json():I==="application/octet-stream"||I==="application/pdf"?L=yield U.blob():I==="text/event-stream"?L=U:I==="multipart/form-data"?L=yield U.formData():L=yield U.text(),{data:L,error:null,response:U}}catch(h){return{data:null,error:h,response:h instanceof Oy||h instanceof ky?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var xI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},DI=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,p=l.status,v=l.statusText;if(l.ok){var _,S;if(n.method!=="HEAD"){var E;const U=await l.text();U===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((E=n.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?h=U:h=JSON.parse(U))}const C=(_=n.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");C&&R&&R.length>1&&(g=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var A;const C=await l.text();try{c=JSON.parse(C),Array.isArray(c)&&l.status===404&&(h=[],c=null,p=200,v="OK")}catch{l.status===404&&C===""?(p=204,v="No Content"):c={message:C}}if(c&&n.isMaybeSingle&&(!(c==null||(A=c.details)===null||A===void 0)&&A.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&n.shouldThrowOnError)throw new xI(c)}return{error:c,data:h,count:g,status:p,statusText:v}});return this.shouldThrowOnError||(r=r.catch(l=>{var c;let h="";const g=l==null?void 0:l.cause;if(g){var p,v,_,S;const A=(p=g==null?void 0:g.message)!==null&&p!==void 0?p:"",C=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";h=`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(S=g==null?void 0:g.name)!==null&&S!==void 0?S:"Error"}: ${A}`,C&&(h+=` (${C})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var E;h=(E=l==null?void 0:l.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},UI=class extends DI{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const l=r?`${r}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Py=new RegExp("[,()]");var Po=class extends UI{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Py.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Py.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${r}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},kI=class{constructor(t,{headers:e={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:s}=e??{},r=n?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",c),s&&g.append("Prefer",`count=${s}`),new Po({method:r,url:h,headers:g,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const r="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),n||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",g.join(","))}}return new Po({method:r,url:l,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){var l;const c="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),s&&g.append("Prefer",`count=${s}`),r||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);h.searchParams.set("columns",v.join(","))}}return new Po({method:c,url:h,headers:g,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var n;const s="PATCH",{url:r,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new Po({method:s,url:r,headers:l,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:s,headers:r}=this.cloneRequestState();return t&&r.append("Prefer",`count=${t}`),new Po({method:n,url:s,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},OI=class a0{constructor(e,{headers:n={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kI(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:r=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const v=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(v)),_=s&&Object.values(n).some(v);_?(h="POST",p=n):s||r?(h=s?"HEAD":"GET",Object.entries(n).filter(([E,A])=>A!==void 0).map(([E,A])=>[E,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([E,A])=>{g.searchParams.append(E,A)})):(h="POST",p=n);const S=new Headers(this.headers);return _?S.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&S.set("Prefer",`count=${l}`),new Po({method:h,url:g,headers:S,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class PI{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const r=s.node,l=parseInt(r.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const LI="2.93.3",qI=`realtime-js/${LI}`,BI="1.0.0",l0="2.0.0",Ly=l0,hd=1e4,GI=1e3,HI=100;var di;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(di||(di={}));var nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(nt||(nt={}));var sn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(sn||(sn={}));var pd;(function(t){t.websocket="websocket"})(pd||(pd={}));var Bi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Bi||(Bi={}));class VI{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,n,s){var r,l;const c=e.topic,h=(r=e.ref)!==null&&r!==void 0?r:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+_.length,E=new ArrayBuffer(this.HEADER_LENGTH+S);let A=new DataView(E),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,g.length),A.setUint8(C++,h.length),A.setUint8(C++,c.length),A.setUint8(C++,p.length),A.setUint8(C++,_.length),A.setUint8(C++,n),Array.from(g,U=>A.setUint8(C++,U.charCodeAt(0))),Array.from(h,U=>A.setUint8(C++,U.charCodeAt(0))),Array.from(c,U=>A.setUint8(C++,U.charCodeAt(0))),Array.from(p,U=>A.setUint8(C++,U.charCodeAt(0))),Array.from(_,U=>A.setUint8(C++,U.charCodeAt(0)));var R=new Uint8Array(E.byteLength+s.byteLength);return R.set(new Uint8Array(E),0),R.set(new Uint8Array(s),E.byteLength),R.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,l,c,h,g]=s;return n({join_ref:r,ref:l,topic:c,event:h,payload:g})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,s){const r=n.getUint8(1),l=n.getUint8(2),c=n.getUint8(3),h=n.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+r));g=g+r;const v=s.decode(e.slice(g,g+l));g=g+l;const _=s.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),E=h===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,A={type:this.BROADCAST_EVENT,event:v,payload:E};return c>0&&(A.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class u0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qe||(qe={}));const qy=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=zI(c,t,e,r),l),{}):{}},zI=(t,e,n,s)=>{const r=e.find(h=>h.name===t),l=r==null?void 0:r.type,c=n[t];return l&&!s.includes(l)?c0(l,c):md(c)},c0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return YI(e,n)}switch(t){case qe.bool:return FI(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return $I(e);case qe.json:case qe.jsonb:return JI(e);case qe.timestamp:return KI(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return md(e);default:return md(e)}},md=t=>t,FI=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$I=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},JI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},YI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>c0(e,h))}return t},KI=t=>typeof t=="string"?t.replace(" ","T"):t,d0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Vc{constructor(e,n,s={},r=hd){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var By;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(By||(By={}));class er{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=er.syncState(this.state,r,l,c),this.pendingDiffs.forEach(g=>{this.state=er.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=er.syncDiff(this.state,r,l,c),h())}),this.onJoin((r,l,c)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:c})}),this.onLeave((r,l,c)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const l=this.cloneDeep(e),c=this.transformState(n),h={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const _=l[p];if(_){const S=v.map(R=>R.presence_ref),E=_.map(R=>R.presence_ref),A=v.filter(R=>E.indexOf(R.presence_ref)<0),C=_.filter(R=>S.indexOf(R.presence_ref)<0);A.length>0&&(h[p]=A),C.length>0&&(g[p]=C)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:g},s,r)}static syncDiff(e,n,s,r){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(E=>E.presence_ref),S=v.filter(E=>_.indexOf(E.presence_ref)<0);e[h].unshift(...S)}s(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(_=>_.presence_ref);p=p.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=p,r(h,p,g),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Gy||(Gy={}));var tr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(tr||(tr={}));var Dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Ho{constructor(e,n={config:{}},s){var r,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Vc(this,sn.join,this.params,this.timeout),this.rejoinTimer=new u0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new er(this),this.broadcastEndpointURL=d0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(E=>E.filter))!==null&&r!==void 0?r:[],v=!!this.bindings[tr.PRESENCE]&&this.bindings[tr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(Dn.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e==null||e(Dn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,R=(A=C==null?void 0:C.length)!==null&&A!==void 0?A:0,U=[];for(let D=0;D<R;D++){const I=C[D],{filter:{event:L,schema:q,table:Y,filter:H}}=I,oe=E&&E[D];if(oe&&oe.event===L&&Ho.isFilterValueEqual(oe.schema,q)&&Ho.isFilterValueEqual(oe.table,Y)&&Ho.isFilterValueEqual(oe.filter,H))U.push(Object.assign(Object.assign({},I),{id:oe.id}));else{this.unsubscribe(),this.state=nt.errored,e==null||e(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(Dn.SUBSCRIBED);return}}).receive("error",E=>{this.state=nt.errored,e==null||e(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===nt.joined&&e===tr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Vc(this,sn.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Vc(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>HI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=sn;if(s&&[h,g,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,n,s);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(E=>{var A,C,R;return((A=E.filter)===null||A===void 0?void 0:A.event)==="*"||((R=(C=E.filter)===null||C===void 0?void 0:C.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(E=>E.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(E=>{var A,C,R,U,D,I;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const L=E.id,q=(A=E.filter)===null||A===void 0?void 0:A.event;return L&&((C=n.ids)===null||C===void 0?void 0:C.includes(L))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const L=(D=(U=E==null?void 0:E.filter)===null||U===void 0?void 0:U.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return L==="*"||L===((I=n==null?void 0:n.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof S=="object"&&"ids"in S){const A=S.data,{schema:C,table:R,commit_timestamp:U,type:D,errors:I}=A;S=Object.assign(Object.assign({},{schema:C,table:R,commit_timestamp:U,eventType:D,new:{},old:{},errors:I}),this._getPayloadRecords(A))}E.callback(S,s)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),l={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ho.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(sn.close,{},e)}_onError(e){this._on(sn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=qy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=qy(e.columns,e.old_record)),n}}const zc=()=>{},ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XI=[1e3,2e3,5e3,1e4],WI=1e4,QI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZI{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hd,this.transport=null,this.heartbeatIntervalMs=ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zc,this.ref=0,this.reconnectTimer=null,this.vsn=Ly,this.logger=zc,this.conn=null,this.sendBuffer=[],this.serializer=new VI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...l)=>r(...l):(...l)=>fetch(...l),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${pd.websocket}`,this.httpEndpoint=d0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=PI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case di.connecting:return Bi.Connecting;case di.open:return Bi.Open;case di.closing:return Bi.Closing;default:return Bi.Closed}}isConnected(){return this.connectionState()===Bi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new Ho(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:r,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${s} (${l})`,r),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(GI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:r,payload:l,ref:c}=n,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${r} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(r,l,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===di.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===di.open||this.conn.readyState===di.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(sn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([QI],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:qI};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(sn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new u0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,l,c,h,g,p,v,_,S,E;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:hd,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:ka.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:zc,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Ly,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(A=>XI[A-1]||WI),this.vsn){case BI:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((A,C)=>C(JSON.stringify(A))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((A,C)=>C(JSON.parse(A)));break;case l0:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ir=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jI(t,e,n){const s=new URL(e,t);if(n)for(const[r,l]of Object.entries(n))l!==void 0&&s.searchParams.set(r,l);return s.toString()}async function ex(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function tx(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:l,headers:c}){const h=jI(t.baseUrl,s,r),g=await ex(t.auth),p=await e(h,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!p.ok){const E=_?S:void 0,A=E==null?void 0:E.error;throw new ir((A==null?void 0:A.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:E})}return{status:p.status,headers:p.headers,data:S}}}}function Oa(t){return t.join("")}var nx=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Oa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`}),!0}catch(e){if(e instanceof ir&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ir&&n.status===409)return;throw n}}};function Mo(t){return t.join("")}var ix=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ir&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ir&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},ox=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=tx({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new nx(this.client,e),this.tableOps=new ix(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ul=class extends Error{constructor(t,e="storage",n,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=s}};function cl(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Pa=class extends ul{constructor(t,e,n,s="storage"){super(t,s,e,n),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},f0=class extends ul{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const sx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),rx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gd=t=>{if(Array.isArray(t))return t.map(n=>gd(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=gd(s)}),e},ax=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function or(t){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(t)}function lx(t,e){if(or(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(or(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ux(t){var e=lx(t,"string");return or(e)=="symbol"?e:e+""}function cx(t,e,n){return(e=ux(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hy(Object(n),!0).forEach(function(s){cx(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const Vy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dx=async(t,e,n,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t,l=r.status||500;if(typeof r.json=="function")r.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||l+"";e(new Pa(Vy(c),l,h,s))}).catch(()=>{if(s==="vectors"){const c=l+"";e(new Pa(r.statusText||`HTTP ${l} error`,l,c,s))}else{const c=l+"";e(new Pa(r.statusText||`HTTP ${l} error`,l,c,s))}});else{const c=l+"";e(new Pa(r.statusText||`HTTP ${l} error`,l,c,s))}}else e(new f0(Vy(t),t,s))},fx=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!s?le(le({},r),n):(rx(s)?(r.headers=le({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),le(le({},r),n))};async function Ws(t,e,n,s,r,l,c){return new Promise((h,g)=>{t(n,fx(e,s,r,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;if(c==="vectors"){const v=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!v||!v.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>dx(p,g,s,c))})}function h0(t="storage"){return{get:async(e,n,s,r)=>Ws(e,"GET",n,s,r,void 0,t),post:async(e,n,s,r,l)=>Ws(e,"POST",n,r,l,s,t),put:async(e,n,s,r,l)=>Ws(e,"PUT",n,r,l,s,t),head:async(e,n,s,r)=>Ws(e,"HEAD",n,le(le({},s),{},{noResolveJson:!0}),r,void 0,t),remove:async(e,n,s,r,l)=>Ws(e,"DELETE",n,r,l,s,t)}}const hx=h0("storage"),{get:sr,post:on,put:yd,head:px,remove:kd}=hx,Gt=h0("vectors");var Xo=class{constructor(t,e={},n,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=sx(n),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(cl(n))return{data:null,error:n};throw n}}},mx=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(cl(e))return{data:null,error:e};throw e}}};let p0;p0=Symbol.toStringTag;var gx=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[p0]="BlobDownloadBuilder",this.promise=null}asStream(){return new mx(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(cl(e))return{data:null,error:e};throw e}}};const yx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vx=class extends Xo{constructor(t,e={},n,s){super(t,e,s,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,s){var r=this;return r.handleOperation(async()=>{let l;const c=le(le({},zy),s);let h=le(le({},r.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",r.encodeMetadata(g)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",r.encodeMetadata(g))):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=r.toBase64(r.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s!=null&&s.headers&&(h=le(le({},h),s.headers));const p=r._removeEmptyFolders(e),v=r._getFinalPath(p),_=await(t=="PUT"?yd:on)(r.fetch,`${r.url}/object/${v}`,l,le({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:p,id:_.Id,fullPath:_.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var r=this;const l=r._removeEmptyFolders(t),c=r._getFinalPath(l),h=new URL(r.url+`/object/upload/sign/${c}`);return h.searchParams.set("token",e),r.handleOperation(async()=>{let g;const p=le({upsert:zy.upsert},s),v=le(le({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",n)):typeof FormData<"u"&&n instanceof FormData?(g=n,g.append("cacheControl",p.cacheControl)):(g=n,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{path:l,fullPath:(await yd(r.fetch,h.toString(),g,{headers:v})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t);const r=le({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const l=await on(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),c=new URL(n.url+l.url),h=c.searchParams.get("token");if(!h)throw new ul("No token returned by API");return{signedUrl:c.toString(),path:t,token:h}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;return s.handleOperation(async()=>await on(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}))}async copy(t,e,n){var s=this;return s.handleOperation(async()=>({path:(await on(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,n){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(t),l=await on(s.fetch,`${s.url}/object/sign/${r}`,le({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)}})}async createSignedUrls(t,e,n){var s=this;return s.handleOperation(async()=>{const r=await on(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(c=>le(le({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),c=()=>sr(this.fetch,`${this.url}/${n}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new gx(c,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>gd(await sr(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await px(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(cl(s)&&s instanceof f0){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await kd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var s=this;return s.handleOperation(async()=>{const r=le(le(le({},yx),e),{},{prefix:t||""});return await on(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const s=le({},t);return await on(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const _x="2.93.3",ur={"X-Client-Info":`storage-js/${_x}`};var Sx=class extends Xo{constructor(t,e={},n,s){const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const l=r.href.replace(/\/$/,""),c=le(le({},ur),e);super(l,c,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await sr(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await sr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await on(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await yd(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await on(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await kd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Tx=class extends Xo{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=le(le({},ur),e);super(s,r,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await on(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await sr(e.fetch,r,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await kd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!ax(t))throw new ul("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new ox({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,l){const c=r[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(r,h),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}},Ex=class extends Xo{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=le(le({},ur),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Gt.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Gt.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},wx=class extends Xo{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=le(le({},ur),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Ax=class extends Xo{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=le(le({},ur),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Gt.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Cx=class extends Ax{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new bx(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},bx=class extends Ex{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Rx(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Rx=class extends wx{constructor(t,e,n,s,r){super(t,e,r),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,le(le({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Nx=class extends Sx{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new vx(this.url,this.headers,t,this.fetch)}get vectors(){return new Cx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Tx(this.url+"/iceberg",this.headers,this.fetch)}};const m0="2.93.3",Lo=30*1e3,vd=3,Fc=vd*Lo,Mx="http://localhost:9999",Ix="supabase.auth.token",xx={"X-Client-Info":`gotrue-js/${m0}`},_d="X-Supabase-Api-Version",g0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ux=600*1e3;class rr extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class kx extends rr{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function Ox(t){return ie(t)&&t.name==="AuthApiError"}class Gi extends rr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Pn extends rr{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class Bt extends Pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $c(t){return ie(t)&&t.name==="AuthSessionMissingError"}class Io extends Pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class La extends Pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qa extends Pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Px(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class Fy extends Pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lx extends Pn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Sd extends Pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Jc(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class $y extends Pn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Td extends Pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Za="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jy=` 	
\r=`.split(""),qx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Jy.length;e+=1)t[Jy[e].charCodeAt(0)]=-2;for(let e=0;e<Za.length;e+=1)t[Za[e].charCodeAt(0)]=e;return t})();function Yy(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Za[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Za[s]),e.queuedBits-=6}}function y0(t,e,n){const s=qx[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ky(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=c=>{Hx(c,s,n)};for(let c=0;c<t.length;c+=1)y0(t.charCodeAt(c),r,l);return e.join("")}function Bx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Gx(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}Bx(s,e)}}function Hx(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Fo(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)y0(t.charCodeAt(r),n,s);return new Uint8Array(e)}function Vx(t){const e=[];return Gx(t,n=>e.push(n)),new Uint8Array(e)}function Hi(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Yy(r,n,s)),Yy(null,n,s),e.join("")}function zx(t){return Math.round(Date.now()/1e3)+t}function Fx(){return Symbol("auth-callback")}const ft=()=>typeof window<"u"&&typeof document<"u",Ui={tested:!1,writable:!1},v0=()=>{if(!ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ui.tested)return Ui.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ui.tested=!0,Ui.writable=!0}catch{Ui.tested=!0,Ui.writable=!1}return Ui.writable};function $x(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const _0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ki=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},dt=async(t,e)=>{await t.removeItem(e)};class dl{constructor(){this.promise=new dl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}dl.promiseConstructor=Promise;function Ba(t){const e=t.split(".");if(e.length!==3)throw new Td("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Dx.test(e[s]))throw new Td("JWT not in base64url format");return{header:JSON.parse(Ky(e[0])),payload:JSON.parse(Ky(e[1])),signature:Fo(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Kx(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){r(c);return}}})()})}function Xx(t){return("0"+t.toString(16)).substr(-2)}function Wx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let l=0;l<56;l++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,Xx).join("")}async function Qx(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function Zx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Qx(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xo(t,e,n=!1){const s=Wx();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await qo(t,`${e}-code-verifier`,r);const l=await Zx(s);return[l,s===l?"plain":"s256"]}const jx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eD(t){const e=t.headers.get(_d);if(!e||!e.match(jx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function tD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function nD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(t){if(!iD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oD(t,e){return new Proxy(t,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,r)}})}function Xy(t){return JSON.parse(JSON.stringify(t))}const qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sD=[502,503,504];async function Wy(t){var e;if(!Jx(t))throw new Sd(qi(t),0);if(sD.includes(t.status))throw new Sd(qi(t),t.status);let n;try{n=await t.json()}catch(l){throw new Gi(qi(l),l)}let s;const r=eD(t);if(r&&r.getTime()>=g0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new $y(qi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Bt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new $y(qi(n),t.status,n.weak_password.reasons);throw new kx(qi(n),t.status||500,s)}const rD=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function ae(t,e,n,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[_d]||(l[_d]=g0["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await aD(t,e,n+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function aD(t,e,n,s,r,l){const c=rD(e,s,r,l);let h;try{h=await t(n,Object.assign({},c))}catch(g){throw console.error(g),new Sd(qi(g),0)}if(h.ok||await Wy(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Wy(g)}}function nn(t){var e;let n=null;cD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=zx(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Qy(t){const e=nn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function lD(t){return{data:t,error:null}}function uD(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l}=t,c=ll(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Zy(t){return t}function cD(t){return t.access_token&&t.refresh_token&&t.expires_in}const Kc=["global","local","others"];class dD{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=_0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Kc[0]){if(Kc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kc.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fi})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=ll(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:uD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fi})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Zy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);p[`${R}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Do(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fi})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Do(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:fi})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Do(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:fi})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Do(e.userId);try{const{data:n,error:s}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,r,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Zy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);p[`${R}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(ie(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}}function jy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Uo={debug:!!(globalThis&&v0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fD extends S0{}async function hD(t,e,n){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new fD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Uo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function pD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function T0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function mD(t){return parseInt(t,16)}function gD(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function yD(t){var e;const{chainId:n,domain:s,expirationTime:r,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=T0(t.address),A=v?`${v}://${s}`:s,C=t.statement?`${t.statement}
`:"",R=`${A} wants you to sign in with your Ethereum account:
${E}

${C}`;let U=`URI: ${_}
Version: ${S}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(r&&(U+=`
Expiration Time: ${r.toISOString()}`),h&&(U+=`
Not Before: ${h.toISOString()}`),g&&(U+=`
Request ID: ${g}`),p){let D=`
Resources:`;for(const I of p){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);D+=`
- ${I}`}U+=D}return`${R}
${U}`}class et extends Error{constructor({message:e,code:n,cause:s,name:r}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=r??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class ja extends et{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function vD({error:t,options:e}){var n,s,r;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(E0(c)){if(l.rp.id!==c)return new et({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function _D({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(E0(s)){if(n.rpId!==s)return new et({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class SD{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const TD=new SD;function ED(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,r=ll(t,["challenge","user","excludeCredentials"]),l=Fo(e).buffer,c=Object.assign(Object.assign({},n),{id:Fo(n.id).buffer}),h=Object.assign(Object.assign({},r),{challenge:l,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Fo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function wD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=ll(t,["challenge","allowCredentials"]),r=Fo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const h=n[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Fo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function AD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Hi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Hi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function CD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Hi(new Uint8Array(r.authenticatorData)),clientDataJSON:Hi(new Uint8Array(r.clientDataJSON)),signature:Hi(new Uint8Array(r.signature)),userHandle:r.userHandle?Hi(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function E0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ev(){var t,e;return!!(ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function bD(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:vD({error:e,options:t})}}}async function RD(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:_D({error:e,options:t})}}}const ND={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},MD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function el(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const l in r){const c=r[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(n(c))s[l]=c;else if(e(c)){const h=s[l];e(h)?s[l]=el(h,c):s[l]=el(c)}else s[l]=c}return s}function ID(t,e){return el(ND,t,e||{})}function xD(t,e){return el(MD,t,e||{})}class DD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:r},l){var c;try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!h)return{data:null,error:g};const p=r??TD.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;if(!v.name){const _=s;if(_)v.name=`${v.id}:${_}`;else{const E=(await this.client.getUser()).data.user,A=((c=E==null?void 0:E.user_metadata)===null||c===void 0?void 0:c.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";v.name=`${v.id}:${A}`}}v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=ID(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:_,error:S}=await bD({publicKey:v,signal:p});return _?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:_}},error:null}:{data:null,error:S}}case"request":{const v=xD(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:_,error:S}=await RD(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:p}));return _?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:_}},error:null}:{data:null,error:S}}}}catch(h){return ie(h)?{data:null,error:h}:{data:null,error:new Gi("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new rr("rpId is required for WebAuthn authentication")};try{if(!ev())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:n,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return ie(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new rr("rpId is required for WebAuthn registration")};try{if(!ev())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:n,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ie(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in register",c)}}}}pD();const UD={url:Mx,storageKey:Ix,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function tv(t,e,n){return await n()}const ko={};class ar{get jwks(){var e,n;return(n=(e=ko[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ko[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},UD),e);if(this.storageKey=l.storageKey,this.instanceID=(n=ar.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ar.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ft()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new dD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=_0(l.fetch),this.lock=l.lock||tv,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&ft()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=hD:this.lock=tv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:v0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=jy(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${m0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(ft()&&(n=$x(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),ft()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Px(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:h}=r;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?this._returnResult({error:n}):this._returnResult({error:new Gi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:nn}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,r;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let E=null,A=null;this.flowType==="pkce"&&([E,A]=await xo(this.storage,this.storageKey)),l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:E,code_challenge_method:A},xform:nn})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(r=S==null?void 0:S.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:nn})}else throw new La("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:h}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Qy})}else if("phone"in e){const{phone:l,password:c,options:h}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Qy})}else throw new La("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const l=new Io;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,r,l,c,h,g,p,v,_,S;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:C,wallet:R,statement:U,options:D}=e;let I;if(ft())if(typeof R=="object")I=R;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")I=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=R}const L=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href),q=await I.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=T0(q[0]);let H=(s=D==null?void 0:D.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!H){const K=await I.request({method:"eth_chainId"});H=mD(K)}const oe={domain:L.host,address:Y,statement:U,uri:L.href,version:"1",chainId:H,nonce:(r=D==null?void 0:D.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(c=(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=D==null?void 0:D.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=D==null?void 0:D.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=D==null?void 0:D.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=D==null?void 0:D.signInWithEthereum)===null||v===void 0?void 0:v.resources};E=yD(oe),A=await I.request({method:"personal_sign",params:[gD(E),Y]})}try{const{data:C,error:R}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:A},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:nn});if(R)throw R;if(!C||!C.session||!C.user){const U=new Io;return this._returnResult({data:{user:null,session:null},error:U})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:R})}catch(C){if(ie(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var n,s,r,l,c,h,g,p,v,_,S,E;let A,C;if("message"in e)A=e.message,C=e.signature;else{const{chain:R,wallet:U,statement:D,options:I}=e;let L;if(ft())if(typeof U=="object")L=U;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))L=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=U}const q=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in L&&L.signIn){const Y=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),D?{statement:D}:null));let H;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")H=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)H=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)A=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),C=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${q.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(r=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I==null?void 0:I.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((g=I==null?void 0:I.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((_=(v=I==null?void 0:I.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...I.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const Y=await L.signMessage(new TextEncoder().encode(A),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=Y}}try{const{data:R,error:U}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Hi(C)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:nn});if(U)throw U;if(!R||!R.session||!R.user){const D=new Io;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:U})}catch(R){if(ie(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Lx;const{data:l,error:c}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:nn});if(await dt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:c})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:l,nonce:c}=e,h=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nn}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new Io;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(n){if(ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,r,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await xo(this.storage,this.storageKey));const{error:_}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new La("You must provide either an email or phone number.")}catch(h){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,s;try{let r,l;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:nn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,s,r,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await xo(this.storage,this.storageKey));const p=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:lD});return!((l=p.data)===null||l===void 0)&&l.url&&ft()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Bt;const{error:r}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:c}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:c,error:h}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new La("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ki(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Yc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=oD(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fi}):await this._useSession(async n=>{var s,r,l;const{data:c,error:h}=n;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:fi})})}catch(n){if(ie(n))return $c(n)&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new Bt;const c=r.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await xo(this.storage,this.storageKey));const{data:p,error:v}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:fi});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bt;const n=Date.now()/1e3;let s=n,r=!0,l=null;const{payload:c}=Ba(e.access_token);if(c.exp&&(s=c.exp,r=s<=n),r){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(ie(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:h}=n;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Bt;const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ft())throw new qa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fy("No code detected.");const{data:D,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new qa("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const E=S-v;E*1e3<=Lo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${_}s`);const A=S-_;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,S,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,S,v);const{data:C,error:R}=await this._getUser(l);if(R)throw R;const U={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(s){if(ie(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l&&!$c(l))return this._returnResult({error:l});const c=(s=r.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(Ox(h)&&(h.status===404||h.status===401||h.status===403)||$c(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Fx(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await xo(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:r}=await this._useSession(async l=>{var c,h,g,p,v;const{data:_,error:S}=l;if(S)throw S;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",E,{headers:this.headers,jwt:(v=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(r)throw r;return ft()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ie(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:l}}=n;if(r)throw r;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,_=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:nn}),{data:S,error:E}=_;return E?this._returnResult({data:{user:null,session:null},error:E}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Io}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:E}))}catch(r){if(await dt(this.storage,`${this.storageKey}-code-verifier`),ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:c}=n;if(c)throw c;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Kx(async r=>(r>0&&await Yx(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(r,l)=>{const c=200*Math.pow(2,r);return l&&Jc(l)&&Date.now()+c-s<Lo})}catch(s){if(this._debug(n,"error",s),ie(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),ft()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await ki(this.storage,this.storageKey);if(r&&this.userStorage){let c=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:r.user},await qo(this.userStorage,this.storageKey+"-user",c)),r.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Yc()}else if(r&&!r.user&&!r.user){const c=await ki(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(r.user=c.user,await dt(this.storage,this.storageKey+"-user"),await qo(this.storage,this.storageKey,r)):r.user=Yc()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const l=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Fc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Fc}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:c}=await this._callRefreshToken(r.refresh_token);c&&(console.error(c),Jc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(r.access_token);!h&&(c!=null&&c.user)?(r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new dl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Bt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(r,"error",l),ie(l)){const c={data:null,error:l};return Jc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await qo(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const l=Xy(r);await qo(this.storage,this.storageKey,l)}else{const r=Xy(n);await qo(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await dt(this.storage,this.storageKey),await dt(this.storage,this.storageKey+"-code-verifier"),await dt(this.storage,this.storageKey+"-user"),this.userStorage&&await dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Lo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Lo}ms, refresh threshold is ${vd} ticks`),r<=vd&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await xo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});r.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?this._returnResult({data:null,error:l}):await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?AD(e.webauthn.credential_response):CD(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:ED(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:wD(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(l),l.status==="verified"&&r[l.factor_type].push(l);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,s,r,l;if(e)try{const{payload:E}=Ba(e);let A=null;E.aal&&(A=E.aal);let C=A;const{data:{user:R},error:U}=await this.getUser(e);if(U)return this._returnResult({data:null,error:U});((s=(n=R==null?void 0:R.factors)===null||n===void 0?void 0:n.filter(L=>L.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(C="aal2");const I=E.amr||[];return{data:{currentLevel:A,nextLevel:C,currentAuthenticationMethods:I},error:null}}catch(E){if(ie(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:c},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=Ba(c.access_token);let p=null;g.aal&&(p=g.aal);let v=p;((l=(r=c.user.factors)===null||r===void 0?void 0:r.filter(E=>E.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(v="aal2");const S=g.amr||[];return{data:{currentLevel:p,nextLevel:v,currentAuthenticationMethods:S},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Bt});const c=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ie(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Bt});const c=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ie(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bt})})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(h=>h.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+Ux>r)return s;const{data:l,error:c}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,s=l.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:E,error:A}=await this.getSession();if(A||!E.session)return this._returnResult({data:null,error:A});s=E.session.access_token}const{header:r,payload:l,signature:c,raw:{header:h,payload:g}}=Ba(s);n!=null&&n.allowExpired||tD(l.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:E}=await this.getUser(s);if(E)throw E;return{data:{claims:l,header:r,signature:c},error:null}}const v=nD(r.alg),_=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,Vx(`${h}.${g}`)))throw new Td("Invalid JWT signature");return{data:{claims:l,header:r,signature:c},error:null}}catch(s){if(ie(s))return this._returnResult({data:null,error:s});throw s}}}ar.nextInstanceID={};const kD=ar,OD="2.93.3";let js="";typeof Deno<"u"?js="deno":typeof document<"u"?js="web":typeof navigator<"u"&&navigator.product==="ReactNative"?js="react-native":js="node";const PD={"X-Client-Info":`supabase-js-${js}/${OD}`},LD={headers:PD},qD={schema:"public"},BD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GD={};function lr(t){"@babel/helpers - typeof";return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(t)}function HD(t,e){if(lr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(lr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VD(t){var e=HD(t,"string");return lr(e)=="symbol"?e:e+""}function zD(t,e,n){return(e=VD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nv(Object(n),!0).forEach(function(s){zD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const FD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$D=()=>Headers,JD=(t,e,n)=>{const s=FD(n),r=$D();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new r(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Fe(Fe({},c),{},{headers:p}))}};function YD(t){return t.endsWith("/")?t:t+"/"}function KD(t,e){var n,s;const{db:r,auth:l,realtime:c,global:h}=t,{db:g,auth:p,realtime:v,global:_}=e,S={db:Fe(Fe({},g),r),auth:Fe(Fe({},p),l),realtime:Fe(Fe({},v),c),storage:{},global:Fe(Fe(Fe({},_),h),{},{headers:Fe(Fe({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function XD(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(YD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var WD=class extends kD{constructor(t){super(t)}},QD=class{constructor(t,e,n){var s,r;this.supabaseUrl=t,this.supabaseKey=e;const l=XD(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:qD,realtime:GD,auth:Fe(Fe({},BD),{},{storageKey:c}),global:LD},g=KD(n??{},h);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=g.global.headers)!==null&&r!==void 0?r:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=JD(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Fe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new OI(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Nx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new II(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:p},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WD({url:this.authUrl.href,headers:Fe(Fe({},S),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,flowType:c,lock:h,debug:g,throwOnError:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ZI(this.realtimeUrl.href,Fe(Fe({},t),{},{params:Fe(Fe({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ZD=(t,e,n)=>new QD(t,e,n);function jD(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}jD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const w0="https://rsolqzhjpjepxbquwypi.supabase.co",e1="sb_publishable___D5PFimIABpVv4hpLV7Wg_xfPXJfDC",A0=w0.length>0,ui=A0?ZD(w0,e1):null,Ga=()=>{let t=localStorage.getItem("memo_calendar_user_id");return t||(t=crypto.randomUUID(),localStorage.setItem("memo_calendar_user_id",t)),t},ci={getEvents(){try{return JSON.parse(localStorage.getItem("fallback_events")||"[]")}catch{return[]}},saveEvents(t){localStorage.setItem("fallback_events",JSON.stringify(t))},addEvent(t){const e=crypto.randomUUID(),n={...t,id:e},s=this.getEvents();return this.saveEvents([...s,n]),n}},Qs={async fetchEvents(){if(!ui)return ci.getEvents();try{const{data:t,error:e}=await ui.from("events").select("*").eq("user_id",Ga()).order("date",{ascending:!0});if(e)throw e;const n=(t||[]).map(s=>({id:s.id,title:s.title,date:s.date,startTime:s.start_time,endTime:s.end_time,color:s.color||"blue",notes:s.notes,category:s.category,originalText:s.original_text}));return ci.saveEvents(n),n}catch(t){return console.warn("Supabase fetch failed",t),ci.getEvents()}},async addEvent(t){const e=Ga(),n=ci.addEvent(t);if(!ui)return n;const s={user_id:e,title:t.title,date:t.date,start_time:t.startTime,end_time:t.endTime,color:t.color||"blue",notes:t.notes,category:t.category,original_text:t.originalText};try{const{data:r,error:l}=await ui.from("events").insert([s]).select().single();if(l)throw l;return{id:r.id,title:r.title,date:r.date,startTime:r.start_time,endTime:r.end_time,color:r.color,notes:r.notes,category:r.category,originalText:r.original_text}}catch(r){return console.warn("Supabase add failed",r),n}},async updateEvent(t,e){const s=ci.getEvents().map(l=>l.id===t?{...l,...e}:l);if(ci.saveEvents(s),!ui)return!0;const r={};e.color&&(r.color=e.color),e.notes!==void 0&&(r.notes=e.notes),e.title&&(r.title=e.title);try{const{error:l}=await ui.from("events").update(r).eq("id",t).eq("user_id",Ga());return!l}catch{return!0}},async updateEventColor(t,e){return this.updateEvent(t,{color:e})},async deleteEvent(t){const e=ci.getEvents();if(ci.saveEvents(e.filter(n=>n.id!==t)),!ui)return!0;try{const{error:n}=await ui.from("events").delete().eq("id",t).eq("user_id",Ga());return!n}catch{return!0}},isCloudConnected(){return A0}},Xc=[{value:"red",bg:"bg-[#F4D7D7]",text:"text-[#A64B4B]",dot:"bg-[#E59898]",label:"High Priority"},{value:"blue",bg:"bg-[#D7E4F4]",text:"text-[#4B70A6]",dot:"bg-[#98B6E5]",label:"Medium Priority"},{value:"green",bg:"bg-[#D7F4DC]",text:"text-[#4BA65E]",dot:"bg-[#98E5A7]",label:"Low Priority"},{value:"purple",bg:"bg-[#EBD7F4]",text:"text-[#874BA6]",dot:"bg-[#CB98E5]",label:"Personal / Ritual"}],t1=()=>{const[t,e]=Ke.useState([]),[n,s]=Ke.useState(!1),[r,l]=Ke.useState(!1),c=()=>{const D=new Date,I="America/Chicago",q=new Intl.DateTimeFormat("en-US",{timeZone:I,hour:"numeric",minute:"numeric",year:"numeric",month:"numeric",day:"numeric",hourCycle:"h23"}).formatToParts(D),Y=Ee=>{var Me;return((Me=q.find(Re=>Re.type===Ee))==null?void 0:Me.value)||"0"},H=parseInt(Y("hour")),oe=parseInt(Y("minute")),K=parseInt(Y("day")),te=parseInt(Y("month")),pe=parseInt(Y("year"));return{hour:H,minute:oe,day:K,month:te,year:pe,dateStr:`${pe}-${String(te).padStart(2,"0")}-${String(K).padStart(2,"0")}`,dateObj:D}},[h,g]=Ke.useState(c()),[p,v]=Ke.useState(()=>{const D=c();return new Date(D.year,D.month-1,D.day)}),_=Ke.useCallback(async()=>{l(!0);const D=await Qs.fetchEvents();e(D),l(!1)},[]);Ke.useEffect(()=>{_()},[_]),Ke.useEffect(()=>{const D=setInterval(()=>{g(c())},1e4);return()=>clearInterval(D)},[]);const S=async D=>{if(D.trim()){s(!0),l(!0);try{const I=await bI(D,h.dateStr);if(I.events&&I.events.length>0){const L=[];for(const q of I.events){const Y=await Qs.addEvent({...q,color:"blue",originalText:D});Y&&L.push(Y)}L.length>0&&e(q=>[...q,...L])}}catch(I){console.error("Error processing memo:",I)}finally{s(!1),l(!1)}}},E=async D=>{e(I=>I.filter(L=>L.id!==D)),l(!0),await Qs.deleteEvent(D),l(!1)},A=async(D,I)=>{e(L=>L.map(q=>q.id===D?{...q,...I}:q)),l(!0),await Qs.updateEvent(D,I),l(!1)},C=(D,I,L)=>{D.preventDefault(),D.stopPropagation(),A(I,{color:L})},R=D=>{v($a(D))},U=D=>{if(D==="today"){const I=c();v(new Date(I.year,I.month-1,I.day))}else{const I=D==="next"?7:-7;v(L=>cv(L,I))}};return G.jsxs("div",{className:"flex flex-col h-screen bg-[#FDF9F3] selection:bg-[#E8DCC4] selection:text-[#5D4E40]",children:[G.jsx(GT,{currentTime:h.dateObj,isSyncing:r,isCloud:Qs.isCloudConnected()}),G.jsxs("main",{className:"flex-1 flex flex-col md:flex-row gap-8 p-8 overflow-hidden",children:[G.jsxs("section",{className:"w-full md:w-[420px] flex flex-col gap-8 overflow-hidden",children:[G.jsxs("div",{className:"boho-card p-8 rounded-[3rem] shadow-sm",children:[G.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-3 text-[#5D4E40] font-heading",children:[G.jsx(Km,{className:"w-5 h-5 text-[#7D6B5D]"}),"What's On Your Plan?"]}),G.jsx(HT,{onAddMemo:S,isLoading:n})]}),G.jsxs("div",{className:"flex-1 boho-card p-8 rounded-[3rem] shadow-sm overflow-hidden flex flex-col",children:[G.jsx("div",{className:"flex items-center justify-between mb-6",children:G.jsxs("h2",{className:"text-xl font-bold flex items-center gap-3 text-[#5D4E40] font-heading",children:[G.jsx(Wc,{className:"w-5 h-5 text-[#7D6B5D]"}),"Your Path"]})}),G.jsx("div",{className:"flex-1 overflow-y-auto space-y-5 pr-2 custom-scroll",children:t.length===0&&!r?G.jsxs("div",{className:"text-center py-16 text-[#7D6B5D]",children:[G.jsx(Km,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),G.jsx("p",{className:"text-sm italic",children:"The day is a blank canvas..."})]}):[...t].sort((D,I)=>`${D.date} ${D.startTime}`.localeCompare(`${I.date} ${I.startTime}`)).map(D=>{const I=Xc.find(L=>L.value===D.color)||Xc[1];return G.jsxs("div",{onClick:()=>R(D.date),className:"group relative flex flex-col p-5 bg-white rounded-[2rem] hover:shadow-lg hover:shadow-[#E8DCC4]/30 transition-all duration-300 border border-transparent hover:border-[#E8DCC4] cursor-pointer animate-in fade-in slide-in-from-bottom-2",children:[G.jsxs("div",{className:"flex items-start justify-between",children:[G.jsxs("div",{className:"flex-1",children:[G.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[G.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${I.dot}`}),G.jsxs("h4",{className:"font-bold text-base text-[#5D4E40] tracking-tight flex items-center gap-2",children:[D.title,D.notes&&G.jsx(Ha,{className:"w-3 h-3 text-[#7D6B5D] opacity-40"})]})]}),G.jsxs("div",{className:"flex items-center gap-4 text-xs font-semibold text-[#7D6B5D]",children:[G.jsxs("span",{className:"flex items-center gap-1.5",children:[G.jsx(Wc,{className:"w-3.5 h-3.5"}),Pi($a(D.date),"EEE, MMM d")]}),G.jsxs("span",{className:"flex items-center gap-1.5",children:[G.jsx(sv,{className:"w-3.5 h-3.5"}),D.startTime]})]})]}),G.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),E(D.id)},className:"p-2 text-[#7D6B5D] hover:text-[#A64B4B] hover:bg-[#F4D7D7]/30 rounded-full transition-colors opacity-0 group-hover:opacity-100 z-20",children:G.jsx(rv,{className:"w-4 h-4"})})]}),G.jsxs("div",{className:"mt-5 flex items-center justify-between opacity-0 group-hover:opacity-100 transition-all duration-300",children:[G.jsx("div",{className:"flex gap-2.5 z-20",children:Xc.map(L=>G.jsxs("div",{className:"relative group/color",children:[G.jsx("button",{type:"button",onClick:q=>C(q,D.id,L.value),className:`w-7 h-7 rounded-full border-2 ${L.dot} ${D.color===L.value?"border-[#5D4E40] scale-110 shadow-sm":"border-transparent"} hover:scale-125 transition-transform shadow-inner pointer-events-auto`,"aria-label":`Change color to ${L.label}`}),G.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-[#5D4E40] text-white text-[10px] font-bold rounded-xl pointer-events-none opacity-0 group-hover/color:opacity-100 transition-all whitespace-nowrap z-30 shadow-xl",children:L.label})]},L.value))}),G.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-[#7D6B5D] uppercase tracking-[0.1em]",children:["Locate ",G.jsx(RT,{className:"w-3 h-3"})]})]})]},D.id)})})]})]}),G.jsx("section",{className:"flex-1 boho-card rounded-[4rem] shadow-sm overflow-hidden flex flex-col",children:G.jsx(cw,{events:t,viewDate:p,chicagoHour:h.hour,chicagoMinute:h.minute,chicagoDateStr:h.dateStr,onNavigate:U,onUpdateEvent:A,onDeleteEvent:E})})]})]})},C0=document.getElementById("root");if(!C0)throw new Error("Could not find root element to mount to");const n1=rT.createRoot(C0);n1.render(G.jsx(ZS.StrictMode,{children:G.jsx(t1,{})}));
